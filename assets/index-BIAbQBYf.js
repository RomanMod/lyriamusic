(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const pt=globalThis,fn=pt.ShadowRoot&&(pt.ShadyCSS===void 0||pt.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,hn=Symbol(),xn=new WeakMap;let mo=class{constructor(e,n,i){if(this._$cssResult$=!0,i!==hn)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(fn&&e===void 0){const i=n!==void 0&&n.length===1;i&&(e=xn.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&xn.set(n,e))}return e}toString(){return this.cssText}};const ns=t=>new mo(typeof t=="string"?t:t+"",void 0,hn),de=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((i,o,a)=>i+(l=>{if(l._$cssResult$===!0)return l.cssText;if(typeof l=="number")return l;throw Error("Value passed to 'css' function must be a 'css' function result: "+l+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+t[a+1],t[0]);return new mo(n,t,hn)},is=(t,e)=>{if(fn)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const i=document.createElement("style"),o=pt.litNonce;o!==void 0&&i.setAttribute("nonce",o),i.textContent=n.cssText,t.appendChild(i)}},An=fn?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const i of e.cssRules)n+=i.cssText;return ns(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:os,defineProperty:ss,getOwnPropertyDescriptor:rs,getOwnPropertyNames:as,getOwnPropertySymbols:ls,getPrototypeOf:us}=Object,ge=globalThis,Mn=ge.trustedTypes,cs=Mn?Mn.emptyScript:"",qt=ge.reactiveElementPolyfillSupport,je=(t,e)=>t,vt={toAttribute(t,e){switch(e){case Boolean:t=t?cs:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},pn=(t,e)=>!os(t,e),wn={attribute:!0,type:String,converter:vt,reflect:!1,useDefault:!1,hasChanged:pn};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),ge.litPropertyMetadata??(ge.litPropertyMetadata=new WeakMap);let De=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=wn){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const i=Symbol(),o=this.getPropertyDescriptor(e,i,n);o!==void 0&&ss(this.prototype,e,o)}}static getPropertyDescriptor(e,n,i){const{get:o,set:a}=rs(this.prototype,e)??{get(){return this[n]},set(l){this[n]=l}};return{get:o,set(l){const u=o==null?void 0:o.call(this);a==null||a.call(this,l),this.requestUpdate(e,u,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??wn}static _$Ei(){if(this.hasOwnProperty(je("elementProperties")))return;const e=us(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(je("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(je("properties"))){const n=this.properties,i=[...as(n),...ls(n)];for(const o of i)this.createProperty(o,n[o])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[i,o]of n)this.elementProperties.set(i,o)}this._$Eh=new Map;for(const[n,i]of this.elementProperties){const o=this._$Eu(n,i);o!==void 0&&this._$Eh.set(o,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const o of i)n.unshift(An(o))}else e!==void 0&&n.push(An(e));return n}static _$Eu(e,n){const i=n.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const i of n.keys())this.hasOwnProperty(i)&&(e.set(i,this[i]),delete this[i]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return is(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var i;return(i=n.hostConnected)==null?void 0:i.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var i;return(i=n.hostDisconnected)==null?void 0:i.call(n)})}attributeChangedCallback(e,n,i){this._$AK(e,i)}_$ET(e,n){var a;const i=this.constructor.elementProperties.get(e),o=this.constructor._$Eu(e,i);if(o!==void 0&&i.reflect===!0){const l=(((a=i.converter)==null?void 0:a.toAttribute)!==void 0?i.converter:vt).toAttribute(n,i.type);this._$Em=e,l==null?this.removeAttribute(o):this.setAttribute(o,l),this._$Em=null}}_$AK(e,n){var a,l;const i=this.constructor,o=i._$Eh.get(e);if(o!==void 0&&this._$Em!==o){const u=i.getPropertyOptions(o),d=typeof u.converter=="function"?{fromAttribute:u.converter}:((a=u.converter)==null?void 0:a.fromAttribute)!==void 0?u.converter:vt;this._$Em=o,this[o]=d.fromAttribute(n,u.type)??((l=this._$Ej)==null?void 0:l.get(o))??null,this._$Em=null}}requestUpdate(e,n,i){var o;if(e!==void 0){const a=this.constructor,l=this[e];if(i??(i=a.getPropertyOptions(e)),!((i.hasChanged??pn)(l,n)||i.useDefault&&i.reflect&&l===((o=this._$Ej)==null?void 0:o.get(e))&&!this.hasAttribute(a._$Eu(e,i))))return;this.C(e,n,i)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:i,reflect:o,wrapped:a},l){i&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,l??n??this[e]),a!==!0||l!==void 0)||(this._$AL.has(e)||(this.hasUpdated||i||(n=void 0),this._$AL.set(e,n)),o===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var i;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[a,l]of this._$Ep)this[a]=l;this._$Ep=void 0}const o=this.constructor.elementProperties;if(o.size>0)for(const[a,l]of o){const{wrapped:u}=l,d=this[a];u!==!0||this._$AL.has(a)||d===void 0||this.C(a,void 0,l,d)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(i=this._$EO)==null||i.forEach(o=>{var a;return(a=o.hostUpdate)==null?void 0:a.call(o)}),this.update(n)):this._$EM()}catch(o){throw e=!1,this._$EM(),o}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(i=>{var o;return(o=i.hostUpdated)==null?void 0:o.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};De.elementStyles=[],De.shadowRootOptions={mode:"open"},De[je("elementProperties")]=new Map,De[je("finalized")]=new Map,qt==null||qt({ReactiveElement:De}),(ge.reactiveElementVersions??(ge.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const et=globalThis,Ct=et.trustedTypes,In=Ct?Ct.createPolicy("lit-html",{createHTML:t=>t}):void 0,go="$lit$",me=`lit$${Math.random().toFixed(9).slice(2)}$`,yo="?"+me,ds=`<${yo}>`,Me=document,nt=()=>Me.createComment(""),it=t=>t===null||typeof t!="object"&&typeof t!="function",mn=Array.isArray,fs=t=>mn(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Bt=`[ 	
\f\r]`,Ze=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,bn=/-->/g,kn=/>/g,Ee=RegExp(`>|${Bt}(?:([^\\s"'>=/]+)(${Bt}*=${Bt}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Rn=/'/g,Pn=/"/g,vo=/^(?:script|style|textarea|title)$/i,Co=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),H=Co(1),Y=Co(2),ve=Symbol.for("lit-noChange"),q=Symbol.for("lit-nothing"),Dn=new WeakMap,xe=Me.createTreeWalker(Me,129);function To(t,e){if(!mn(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return In!==void 0?In.createHTML(e):e}const hs=(t,e)=>{const n=t.length-1,i=[];let o,a=e===2?"<svg>":e===3?"<math>":"",l=Ze;for(let u=0;u<n;u++){const d=t[u];let c,f,h=-1,p=0;for(;p<d.length&&(l.lastIndex=p,f=l.exec(d),f!==null);)p=l.lastIndex,l===Ze?f[1]==="!--"?l=bn:f[1]!==void 0?l=kn:f[2]!==void 0?(vo.test(f[2])&&(o=RegExp("</"+f[2],"g")),l=Ee):f[3]!==void 0&&(l=Ee):l===Ee?f[0]===">"?(l=o??Ze,h=-1):f[1]===void 0?h=-2:(h=l.lastIndex-f[2].length,c=f[1],l=f[3]===void 0?Ee:f[3]==='"'?Pn:Rn):l===Pn||l===Rn?l=Ee:l===bn||l===kn?l=Ze:(l=Ee,o=void 0);const m=l===Ee&&t[u+1].startsWith("/>")?" ":"";a+=l===Ze?d+ds:h>=0?(i.push(c),d.slice(0,h)+go+d.slice(h)+me+m):d+me+(h===-2?u:m)}return[To(t,a+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),i]};class ot{constructor({strings:e,_$litType$:n},i){let o;this.parts=[];let a=0,l=0;const u=e.length-1,d=this.parts,[c,f]=hs(e,n);if(this.el=ot.createElement(c,i),xe.currentNode=this.el.content,n===2||n===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(o=xe.nextNode())!==null&&d.length<u;){if(o.nodeType===1){if(o.hasAttributes())for(const h of o.getAttributeNames())if(h.endsWith(go)){const p=f[l++],m=o.getAttribute(h).split(me),g=/([.?@])?(.*)/.exec(p);d.push({type:1,index:a,name:g[2],strings:m,ctor:g[1]==="."?ms:g[1]==="?"?gs:g[1]==="@"?ys:Pt}),o.removeAttribute(h)}else h.startsWith(me)&&(d.push({type:6,index:a}),o.removeAttribute(h));if(vo.test(o.tagName)){const h=o.textContent.split(me),p=h.length-1;if(p>0){o.textContent=Ct?Ct.emptyScript:"";for(let m=0;m<p;m++)o.append(h[m],nt()),xe.nextNode(),d.push({type:2,index:++a});o.append(h[p],nt())}}}else if(o.nodeType===8)if(o.data===yo)d.push({type:2,index:a});else{let h=-1;for(;(h=o.data.indexOf(me,h+1))!==-1;)d.push({type:7,index:a}),h+=me.length-1}a++}}static createElement(e,n){const i=Me.createElement("template");return i.innerHTML=e,i}}function Ve(t,e,n=t,i){var l,u;if(e===ve)return e;let o=i!==void 0?(l=n._$Co)==null?void 0:l[i]:n._$Cl;const a=it(e)?void 0:e._$litDirective$;return(o==null?void 0:o.constructor)!==a&&((u=o==null?void 0:o._$AO)==null||u.call(o,!1),a===void 0?o=void 0:(o=new a(t),o._$AT(t,n,i)),i!==void 0?(n._$Co??(n._$Co=[]))[i]=o:n._$Cl=o),o!==void 0&&(e=Ve(t,o._$AS(t,e.values),o,i)),e}class ps{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:i}=this._$AD,o=((e==null?void 0:e.creationScope)??Me).importNode(n,!0);xe.currentNode=o;let a=xe.nextNode(),l=0,u=0,d=i[0];for(;d!==void 0;){if(l===d.index){let c;d.type===2?c=new at(a,a.nextSibling,this,e):d.type===1?c=new d.ctor(a,d.name,d.strings,this,e):d.type===6&&(c=new vs(a,this,e)),this._$AV.push(c),d=i[++u]}l!==(d==null?void 0:d.index)&&(a=xe.nextNode(),l++)}return xe.currentNode=Me,o}p(e){let n=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,n),n+=i.strings.length-2):i._$AI(e[n])),n++}}class at{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,i,o){this.type=2,this._$AH=q,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=i,this.options=o,this._$Cv=(o==null?void 0:o.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Ve(this,e,n),it(e)?e===q||e==null||e===""?(this._$AH!==q&&this._$AR(),this._$AH=q):e!==this._$AH&&e!==ve&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):fs(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==q&&it(this._$AH)?this._$AA.nextSibling.data=e:this.T(Me.createTextNode(e)),this._$AH=e}$(e){var a;const{values:n,_$litType$:i}=e,o=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=ot.createElement(To(i.h,i.h[0]),this.options)),i);if(((a=this._$AH)==null?void 0:a._$AD)===o)this._$AH.p(n);else{const l=new ps(o,this),u=l.u(this.options);l.p(n),this.T(u),this._$AH=l}}_$AC(e){let n=Dn.get(e.strings);return n===void 0&&Dn.set(e.strings,n=new ot(e)),n}k(e){mn(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let i,o=0;for(const a of e)o===n.length?n.push(i=new at(this.O(nt()),this.O(nt()),this,this.options)):i=n[o],i._$AI(a),o++;o<n.length&&(this._$AR(i&&i._$AB.nextSibling,o),n.length=o)}_$AR(e=this._$AA.nextSibling,n){var i;for((i=this._$AP)==null?void 0:i.call(this,!1,!0,n);e&&e!==this._$AB;){const o=e.nextSibling;e.remove(),e=o}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class Pt{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,i,o,a){this.type=1,this._$AH=q,this._$AN=void 0,this.element=e,this.name=n,this._$AM=o,this.options=a,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=q}_$AI(e,n=this,i,o){const a=this.strings;let l=!1;if(a===void 0)e=Ve(this,e,n,0),l=!it(e)||e!==this._$AH&&e!==ve,l&&(this._$AH=e);else{const u=e;let d,c;for(e=a[0],d=0;d<a.length-1;d++)c=Ve(this,u[i+d],n,d),c===ve&&(c=this._$AH[d]),l||(l=!it(c)||c!==this._$AH[d]),c===q?e=q:e!==q&&(e+=(c??"")+a[d+1]),this._$AH[d]=c}l&&!o&&this.j(e)}j(e){e===q?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class ms extends Pt{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===q?void 0:e}}class gs extends Pt{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==q)}}class ys extends Pt{constructor(e,n,i,o,a){super(e,n,i,o,a),this.type=5}_$AI(e,n=this){if((e=Ve(this,e,n,0)??q)===ve)return;const i=this._$AH,o=e===q&&i!==q||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,a=e!==q&&(i===q||o);o&&this.element.removeEventListener(this.name,this,i),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class vs{constructor(e,n,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){Ve(this,e)}}const Ot=et.litHtmlPolyfillSupport;Ot==null||Ot(ot,at),(et.litHtmlVersions??(et.litHtmlVersions=[])).push("3.3.0");const Cs=(t,e,n)=>{const i=(n==null?void 0:n.renderBefore)??e;let o=i._$litPart$;if(o===void 0){const a=(n==null?void 0:n.renderBefore)??null;i._$litPart$=o=new at(e.insertBefore(nt(),a),a,void 0,n??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ae=globalThis;let j=class extends De{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Cs(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return ve}};var po;j._$litElement$=!0,j.finalized=!0,(po=Ae.litElementHydrateSupport)==null||po.call(Ae,{LitElement:j});const Ht=Ae.litElementPolyfillSupport;Ht==null||Ht({LitElement:j});(Ae.litElementVersions??(Ae.litElementVersions=[])).push("4.2.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const X=t=>(e,n)=>{n!==void 0?n.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ts={attribute:!0,type:String,converter:vt,reflect:!1,hasChanged:pn},_s=(t=Ts,e,n)=>{const{kind:i,metadata:o}=n;let a=globalThis.litPropertyMetadata.get(o);if(a===void 0&&globalThis.litPropertyMetadata.set(o,a=new Map),i==="setter"&&((t=Object.create(t)).wrapped=!0),a.set(n.name,t),i==="accessor"){const{name:l}=n;return{set(u){const d=e.get.call(this);e.set.call(this,u),this.requestUpdate(l,d,t)},init(u){return u!==void 0&&this.C(l,void 0,t,u),u}}}if(i==="setter"){const{name:l}=n;return function(u){const d=this[l];e.call(this,u),this.requestUpdate(l,d,t)}}throw Error("Unsupported decorator location: "+i)};function B(t){return(e,n)=>typeof n=="object"?_s(t,e,n):((i,o,a)=>{const l=o.hasOwnProperty(a);return o.constructor.createProperty(a,i),l?Object.getOwnPropertyDescriptor(o,a):void 0})(t,e,n)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Te(t){return B({...t,state:!0,attribute:!1})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Es=(t,e,n)=>(n.configurable=!0,n.enumerable=!0,Reflect.decorate&&typeof e!="object"&&Object.defineProperty(t,e,n),n);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function ke(t,e){return(n,i,o)=>{const a=l=>{var u;return((u=l.renderRoot)==null?void 0:u.querySelector(t))??null};return Es(n,i,{get(){return a(this)}})}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const _o={ATTRIBUTE:1},Eo=t=>(...e)=>({_$litDirective$:t,values:e});let So=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,n,i){this._$Ct=e,this._$AM=n,this._$Ci=i}_$AS(e,n){return this.update(e,n)}update(e,n){return this.render(...n)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const xo="important",Ss=" !"+xo,Ao=Eo(class extends So{constructor(t){var e;if(super(t),t.type!==_o.ATTRIBUTE||t.name!=="style"||((e=t.strings)==null?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return i==null?e:e+`${n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`},"")}update(t,[e]){const{style:n}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const i of this.ft)e[i]==null&&(this.ft.delete(i),i.includes("-")?n.removeProperty(i):n[i]=null);for(const i in e){const o=e[i];if(o!=null){this.ft.add(i);const a=typeof o=="string"&&o.endsWith(Ss);i.includes("-")||a?n.setProperty(i,a?o.slice(0,-11):o,a?xo:""):n[i]=o}}return ve}});var N;(function(t){t.assertEqual=o=>{};function e(o){}t.assertIs=e;function n(o){throw new Error}t.assertNever=n,t.arrayToEnum=o=>{const a={};for(const l of o)a[l]=l;return a},t.getValidEnumValues=o=>{const a=t.objectKeys(o).filter(u=>typeof o[o[u]]!="number"),l={};for(const u of a)l[u]=o[u];return t.objectValues(l)},t.objectValues=o=>t.objectKeys(o).map(function(a){return o[a]}),t.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const a=[];for(const l in o)Object.prototype.hasOwnProperty.call(o,l)&&a.push(l);return a},t.find=(o,a)=>{for(const l of o)if(a(l))return l},t.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function i(o,a=" | "){return o.map(l=>typeof l=="string"?`'${l}'`:l).join(a)}t.joinValues=i,t.jsonStringifyReplacer=(o,a)=>typeof a=="bigint"?a.toString():a})(N||(N={}));var Nn;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Nn||(Nn={}));const T=N.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),pe=t=>{switch(typeof t){case"undefined":return T.undefined;case"string":return T.string;case"number":return Number.isNaN(t)?T.nan:T.number;case"boolean":return T.boolean;case"function":return T.function;case"bigint":return T.bigint;case"symbol":return T.symbol;case"object":return Array.isArray(t)?T.array:t===null?T.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?T.promise:typeof Map<"u"&&t instanceof Map?T.map:typeof Set<"u"&&t instanceof Set?T.set:typeof Date<"u"&&t instanceof Date?T.date:T.object;default:return T.unknown}},y=N.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ue extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},i={_errors:[]},o=a=>{for(const l of a.issues)if(l.code==="invalid_union")l.unionErrors.map(o);else if(l.code==="invalid_return_type")o(l.returnTypeError);else if(l.code==="invalid_arguments")o(l.argumentsError);else if(l.path.length===0)i._errors.push(n(l));else{let u=i,d=0;for(;d<l.path.length;){const c=l.path[d];d===l.path.length-1?(u[c]=u[c]||{_errors:[]},u[c]._errors.push(n(l))):u[c]=u[c]||{_errors:[]},u=u[c],d++}}};return o(this),i}static assert(e){if(!(e instanceof ue))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,N.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const o of this.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(e(o))):i.push(e(o));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}ue.create=t=>new ue(t);const Kt=(t,e)=>{let n;switch(t.code){case y.invalid_type:t.received===T.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case y.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,N.jsonStringifyReplacer)}`;break;case y.unrecognized_keys:n=`Unrecognized key(s) in object: ${N.joinValues(t.keys,", ")}`;break;case y.invalid_union:n="Invalid input";break;case y.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${N.joinValues(t.options)}`;break;case y.invalid_enum_value:n=`Invalid enum value. Expected ${N.joinValues(t.options)}, received '${t.received}'`;break;case y.invalid_arguments:n="Invalid function arguments";break;case y.invalid_return_type:n="Invalid function return type";break;case y.invalid_date:n="Invalid date";break;case y.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:N.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case y.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case y.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case y.custom:n="Invalid input";break;case y.invalid_intersection_types:n="Intersection results could not be merged";break;case y.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case y.not_finite:n="Number must be finite";break;default:n=e.defaultError,N.assertNever(t)}return{message:n}};let xs=Kt;function As(){return xs}const Ms=t=>{const{data:e,path:n,errorMaps:i,issueData:o}=t,a=[...n,...o.path||[]],l={...o,path:a};if(o.message!==void 0)return{...o,path:a,message:o.message};let u="";const d=i.filter(c=>!!c).slice().reverse();for(const c of d)u=c(l,{data:e,defaultError:u}).message;return{...o,path:a,message:u}};function C(t,e){const n=As(),i=Ms({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Kt?void 0:Kt].filter(o=>!!o)});t.common.issues.push(i)}class W{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const o of n){if(o.status==="aborted")return I;o.status==="dirty"&&e.dirty(),i.push(o.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const o of n){const a=await o.key,l=await o.value;i.push({key:a,value:l})}return W.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const o of n){const{key:a,value:l}=o;if(a.status==="aborted"||l.status==="aborted")return I;a.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof l.value<"u"||o.alwaysSet)&&(i[a.value]=l.value)}return{status:e.value,value:i}}}const I=Object.freeze({status:"aborted"}),Xe=t=>({status:"dirty",value:t}),Q=t=>({status:"valid",value:t}),Un=t=>t.status==="aborted",$n=t=>t.status==="dirty",Ge=t=>t.status==="valid",Tt=t=>typeof Promise<"u"&&t instanceof Promise;var _;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(_||(_={}));class re{constructor(e,n,i,o){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Fn=(t,e)=>{if(Ge(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ue(t.common.issues);return this._error=n,this._error}}};function R(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:o}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(l,u)=>{const{message:d}=t;return l.code==="invalid_enum_value"?{message:d??u.defaultError}:typeof u.data>"u"?{message:d??i??u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:d??n??u.defaultError}},description:o}}class D{get description(){return this._def.description}_getType(e){return pe(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:pe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new W,ctx:{common:e.parent.common,data:e.data,parsedType:pe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Tt(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){const i={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:pe(e)},o=this._parseSync({data:e,path:i.path,parent:i});return Fn(i,o)}"~validate"(e){var i,o;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:pe(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return Ge(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(o=(i=a==null?void 0:a.message)==null?void 0:i.toLowerCase())!=null&&o.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>Ge(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:pe(e)},o=this._parse({data:e,path:i.path,parent:i}),a=await(Tt(o)?o:Promise.resolve(o));return Fn(i,a)}refine(e,n){const i=o=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(o):n;return this._refinement((o,a)=>{const l=e(o),u=()=>a.addIssue({code:y.custom,...i(o)});return typeof Promise<"u"&&l instanceof Promise?l.then(d=>d?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(e,n){return this._refinement((i,o)=>e(i)?!0:(o.addIssue(typeof n=="function"?n(i,o):n),!1))}_refinement(e){return new Oe({schema:this,typeName:M.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ye.create(this,this._def)}nullable(){return He.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return se.create(this)}promise(){return At.create(this,this._def)}or(e){return Et.create([this,e],this._def)}and(e){return St.create(this,e,this._def)}transform(e){return new Oe({...R(this._def),schema:this,typeName:M.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Qt({...R(this._def),innerType:this,defaultValue:n,typeName:M.ZodDefault})}brand(){return new Zs({typeName:M.ZodBranded,type:this,...R(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new jt({...R(this._def),innerType:this,catchValue:n,typeName:M.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return gn.create(this,e)}readonly(){return en.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ws=/^c[^\s-]{8,}$/i,Is=/^[0-9a-z]+$/,bs=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ks=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Rs=/^[a-z0-9_-]{21}$/i,Ps=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ds=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ns=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Us="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Jt;const $s=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Fs=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Ls=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Vs=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Gs=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,qs=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Mo="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Bs=new RegExp(`^${Mo}$`);function wo(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function Os(t){return new RegExp(`^${wo(t)}$`)}function Hs(t){let e=`${Mo}T${wo(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Js(t,e){return!!((e==="v4"||!e)&&$s.test(t)||(e==="v6"||!e)&&Ls.test(t))}function Ws(t,e){if(!Ps.test(t))return!1;try{const[n]=t.split("."),i=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),o=JSON.parse(atob(i));return!(typeof o!="object"||o===null||"typ"in o&&(o==null?void 0:o.typ)!=="JWT"||!o.alg||e&&o.alg!==e)}catch{return!1}}function zs(t,e){return!!((e==="v4"||!e)&&Fs.test(t)||(e==="v6"||!e)&&Vs.test(t))}class ie extends D{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==T.string){const a=this._getOrReturnCtx(e);return C(a,{code:y.invalid_type,expected:T.string,received:a.parsedType}),I}const i=new W;let o;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(o=this._getOrReturnCtx(e,o),C(o,{code:y.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),i.dirty());else if(a.kind==="max")e.data.length>a.value&&(o=this._getOrReturnCtx(e,o),C(o,{code:y.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),i.dirty());else if(a.kind==="length"){const l=e.data.length>a.value,u=e.data.length<a.value;(l||u)&&(o=this._getOrReturnCtx(e,o),l?C(o,{code:y.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):u&&C(o,{code:y.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),i.dirty())}else if(a.kind==="email")Ns.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"email",code:y.invalid_string,message:a.message}),i.dirty());else if(a.kind==="emoji")Jt||(Jt=new RegExp(Us,"u")),Jt.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"emoji",code:y.invalid_string,message:a.message}),i.dirty());else if(a.kind==="uuid")ks.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"uuid",code:y.invalid_string,message:a.message}),i.dirty());else if(a.kind==="nanoid")Rs.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"nanoid",code:y.invalid_string,message:a.message}),i.dirty());else if(a.kind==="cuid")ws.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"cuid",code:y.invalid_string,message:a.message}),i.dirty());else if(a.kind==="cuid2")Is.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"cuid2",code:y.invalid_string,message:a.message}),i.dirty());else if(a.kind==="ulid")bs.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"ulid",code:y.invalid_string,message:a.message}),i.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),C(o,{validation:"url",code:y.invalid_string,message:a.message}),i.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"regex",code:y.invalid_string,message:a.message}),i.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(o=this._getOrReturnCtx(e,o),C(o,{code:y.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),i.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(o=this._getOrReturnCtx(e,o),C(o,{code:y.invalid_string,validation:{startsWith:a.value},message:a.message}),i.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(o=this._getOrReturnCtx(e,o),C(o,{code:y.invalid_string,validation:{endsWith:a.value},message:a.message}),i.dirty()):a.kind==="datetime"?Hs(a).test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{code:y.invalid_string,validation:"datetime",message:a.message}),i.dirty()):a.kind==="date"?Bs.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{code:y.invalid_string,validation:"date",message:a.message}),i.dirty()):a.kind==="time"?Os(a).test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{code:y.invalid_string,validation:"time",message:a.message}),i.dirty()):a.kind==="duration"?Ds.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"duration",code:y.invalid_string,message:a.message}),i.dirty()):a.kind==="ip"?Js(e.data,a.version)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"ip",code:y.invalid_string,message:a.message}),i.dirty()):a.kind==="jwt"?Ws(e.data,a.alg)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"jwt",code:y.invalid_string,message:a.message}),i.dirty()):a.kind==="cidr"?zs(e.data,a.version)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"cidr",code:y.invalid_string,message:a.message}),i.dirty()):a.kind==="base64"?Gs.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"base64",code:y.invalid_string,message:a.message}),i.dirty()):a.kind==="base64url"?qs.test(e.data)||(o=this._getOrReturnCtx(e,o),C(o,{validation:"base64url",code:y.invalid_string,message:a.message}),i.dirty()):N.assertNever(a);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(o=>e.test(o),{validation:n,code:y.invalid_string,..._.errToObj(i)})}_addCheck(e){return new ie({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",..._.errToObj(e)})}url(e){return this._addCheck({kind:"url",..._.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",..._.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",..._.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",..._.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",..._.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",..._.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",..._.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",..._.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",..._.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",..._.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",..._.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",..._.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,..._.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,..._.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",..._.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,..._.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,..._.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,..._.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,..._.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,..._.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,..._.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,..._.errToObj(n)})}nonempty(e){return this.min(1,_.errToObj(e))}trim(){return new ie({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ie({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ie({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ie.create=t=>new ie({checks:[],typeName:M.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...R(t)});function Ks(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,o=n>i?n:i,a=Number.parseInt(t.toFixed(o).replace(".","")),l=Number.parseInt(e.toFixed(o).replace(".",""));return a%l/10**o}class we extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==T.number){const a=this._getOrReturnCtx(e);return C(a,{code:y.invalid_type,expected:T.number,received:a.parsedType}),I}let i;const o=new W;for(const a of this._def.checks)a.kind==="int"?N.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),C(i,{code:y.invalid_type,expected:"integer",received:"float",message:a.message}),o.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(i=this._getOrReturnCtx(e,i),C(i,{code:y.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),o.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(i=this._getOrReturnCtx(e,i),C(i,{code:y.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),o.dirty()):a.kind==="multipleOf"?Ks(e.data,a.value)!==0&&(i=this._getOrReturnCtx(e,i),C(i,{code:y.not_multiple_of,multipleOf:a.value,message:a.message}),o.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),C(i,{code:y.not_finite,message:a.message}),o.dirty()):N.assertNever(a);return{status:o.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,_.toString(n))}gt(e,n){return this.setLimit("min",e,!1,_.toString(n))}lte(e,n){return this.setLimit("max",e,!0,_.toString(n))}lt(e,n){return this.setLimit("max",e,!1,_.toString(n))}setLimit(e,n,i,o){return new we({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:_.toString(o)}]})}_addCheck(e){return new we({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:_.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:_.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:_.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&N.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}we.create=t=>new we({checks:[],typeName:M.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...R(t)});class Ie extends D{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==T.bigint)return this._getInvalidInput(e);let i;const o=new W;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(i=this._getOrReturnCtx(e,i),C(i,{code:y.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),o.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(i=this._getOrReturnCtx(e,i),C(i,{code:y.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),o.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),C(i,{code:y.not_multiple_of,multipleOf:a.value,message:a.message}),o.dirty()):N.assertNever(a);return{status:o.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return C(n,{code:y.invalid_type,expected:T.bigint,received:n.parsedType}),I}gte(e,n){return this.setLimit("min",e,!0,_.toString(n))}gt(e,n){return this.setLimit("min",e,!1,_.toString(n))}lte(e,n){return this.setLimit("max",e,!0,_.toString(n))}lt(e,n){return this.setLimit("max",e,!1,_.toString(n))}setLimit(e,n,i,o){return new Ie({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:_.toString(o)}]})}_addCheck(e){return new Ie({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:_.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ie.create=t=>new Ie({checks:[],typeName:M.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...R(t)});class _t extends D{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==T.boolean){const i=this._getOrReturnCtx(e);return C(i,{code:y.invalid_type,expected:T.boolean,received:i.parsedType}),I}return Q(e.data)}}_t.create=t=>new _t({typeName:M.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...R(t)});class qe extends D{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==T.date){const a=this._getOrReturnCtx(e);return C(a,{code:y.invalid_type,expected:T.date,received:a.parsedType}),I}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return C(a,{code:y.invalid_date}),I}const i=new W;let o;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(o=this._getOrReturnCtx(e,o),C(o,{code:y.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),i.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(o=this._getOrReturnCtx(e,o),C(o,{code:y.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),i.dirty()):N.assertNever(a);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new qe({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:_.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:_.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}qe.create=t=>new qe({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:M.ZodDate,...R(t)});class Ln extends D{_parse(e){if(this._getType(e)!==T.symbol){const i=this._getOrReturnCtx(e);return C(i,{code:y.invalid_type,expected:T.symbol,received:i.parsedType}),I}return Q(e.data)}}Ln.create=t=>new Ln({typeName:M.ZodSymbol,...R(t)});class Vn extends D{_parse(e){if(this._getType(e)!==T.undefined){const i=this._getOrReturnCtx(e);return C(i,{code:y.invalid_type,expected:T.undefined,received:i.parsedType}),I}return Q(e.data)}}Vn.create=t=>new Vn({typeName:M.ZodUndefined,...R(t)});class Gn extends D{_parse(e){if(this._getType(e)!==T.null){const i=this._getOrReturnCtx(e);return C(i,{code:y.invalid_type,expected:T.null,received:i.parsedType}),I}return Q(e.data)}}Gn.create=t=>new Gn({typeName:M.ZodNull,...R(t)});class qn extends D{constructor(){super(...arguments),this._any=!0}_parse(e){return Q(e.data)}}qn.create=t=>new qn({typeName:M.ZodAny,...R(t)});class Zt extends D{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Q(e.data)}}Zt.create=t=>new Zt({typeName:M.ZodUnknown,...R(t)});class Ce extends D{_parse(e){const n=this._getOrReturnCtx(e);return C(n,{code:y.invalid_type,expected:T.never,received:n.parsedType}),I}}Ce.create=t=>new Ce({typeName:M.ZodNever,...R(t)});class Bn extends D{_parse(e){if(this._getType(e)!==T.undefined){const i=this._getOrReturnCtx(e);return C(i,{code:y.invalid_type,expected:T.void,received:i.parsedType}),I}return Q(e.data)}}Bn.create=t=>new Bn({typeName:M.ZodVoid,...R(t)});class se extends D{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),o=this._def;if(n.parsedType!==T.array)return C(n,{code:y.invalid_type,expected:T.array,received:n.parsedType}),I;if(o.exactLength!==null){const l=n.data.length>o.exactLength.value,u=n.data.length<o.exactLength.value;(l||u)&&(C(n,{code:l?y.too_big:y.too_small,minimum:u?o.exactLength.value:void 0,maximum:l?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),i.dirty())}if(o.minLength!==null&&n.data.length<o.minLength.value&&(C(n,{code:y.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),i.dirty()),o.maxLength!==null&&n.data.length>o.maxLength.value&&(C(n,{code:y.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((l,u)=>o.type._parseAsync(new re(n,l,n.path,u)))).then(l=>W.mergeArray(i,l));const a=[...n.data].map((l,u)=>o.type._parseSync(new re(n,l,n.path,u)));return W.mergeArray(i,a)}get element(){return this._def.type}min(e,n){return new se({...this._def,minLength:{value:e,message:_.toString(n)}})}max(e,n){return new se({...this._def,maxLength:{value:e,message:_.toString(n)}})}length(e,n){return new se({...this._def,exactLength:{value:e,message:_.toString(n)}})}nonempty(e){return this.min(1,e)}}se.create=(t,e)=>new se({type:t,minLength:null,maxLength:null,exactLength:null,typeName:M.ZodArray,...R(e)});function Ne(t){if(t instanceof G){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=ye.create(Ne(i))}return new G({...t._def,shape:()=>e})}else return t instanceof se?new se({...t._def,type:Ne(t.element)}):t instanceof ye?ye.create(Ne(t.unwrap())):t instanceof He?He.create(Ne(t.unwrap())):t instanceof be?be.create(t.items.map(e=>Ne(e))):t}class G extends D{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=N.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==T.object){const c=this._getOrReturnCtx(e);return C(c,{code:y.invalid_type,expected:T.object,received:c.parsedType}),I}const{status:i,ctx:o}=this._processInputParams(e),{shape:a,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof Ce&&this._def.unknownKeys==="strip"))for(const c in o.data)l.includes(c)||u.push(c);const d=[];for(const c of l){const f=a[c],h=o.data[c];d.push({key:{status:"valid",value:c},value:f._parse(new re(o,h,o.path,c)),alwaysSet:c in o.data})}if(this._def.catchall instanceof Ce){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of u)d.push({key:{status:"valid",value:f},value:{status:"valid",value:o.data[f]}});else if(c==="strict")u.length>0&&(C(o,{code:y.unrecognized_keys,keys:u}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of u){const h=o.data[f];d.push({key:{status:"valid",value:f},value:c._parse(new re(o,h,o.path,f)),alwaysSet:f in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of d){const h=await f.key,p=await f.value;c.push({key:h,value:p,alwaysSet:f.alwaysSet})}return c}).then(c=>W.mergeObjectSync(i,c)):W.mergeObjectSync(i,d)}get shape(){return this._def.shape()}strict(e){return _.errToObj,new G({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var a,l;const o=((l=(a=this._def).errorMap)==null?void 0:l.call(a,n,i).message)??i.defaultError;return n.code==="unrecognized_keys"?{message:_.errToObj(e).message??o}:{message:o}}}:{}})}strip(){return new G({...this._def,unknownKeys:"strip"})}passthrough(){return new G({...this._def,unknownKeys:"passthrough"})}extend(e){return new G({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new G({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:M.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new G({...this._def,catchall:e})}pick(e){const n={};for(const i of N.objectKeys(e))e[i]&&this.shape[i]&&(n[i]=this.shape[i]);return new G({...this._def,shape:()=>n})}omit(e){const n={};for(const i of N.objectKeys(this.shape))e[i]||(n[i]=this.shape[i]);return new G({...this._def,shape:()=>n})}deepPartial(){return Ne(this)}partial(e){const n={};for(const i of N.objectKeys(this.shape)){const o=this.shape[i];e&&!e[i]?n[i]=o:n[i]=o.optional()}return new G({...this._def,shape:()=>n})}required(e){const n={};for(const i of N.objectKeys(this.shape))if(e&&!e[i])n[i]=this.shape[i];else{let a=this.shape[i];for(;a instanceof ye;)a=a._def.innerType;n[i]=a}return new G({...this._def,shape:()=>n})}keyof(){return Io(N.objectKeys(this.shape))}}G.create=(t,e)=>new G({shape:()=>t,unknownKeys:"strip",catchall:Ce.create(),typeName:M.ZodObject,...R(e)});G.strictCreate=(t,e)=>new G({shape:()=>t,unknownKeys:"strict",catchall:Ce.create(),typeName:M.ZodObject,...R(e)});G.lazycreate=(t,e)=>new G({shape:t,unknownKeys:"strip",catchall:Ce.create(),typeName:M.ZodObject,...R(e)});class Et extends D{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function o(a){for(const u of a)if(u.result.status==="valid")return u.result;for(const u of a)if(u.result.status==="dirty")return n.common.issues.push(...u.ctx.common.issues),u.result;const l=a.map(u=>new ue(u.ctx.common.issues));return C(n,{code:y.invalid_union,unionErrors:l}),I}if(n.common.async)return Promise.all(i.map(async a=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(o);{let a;const l=[];for(const d of i){const c={...n,common:{...n.common,issues:[]},parent:null},f=d._parseSync({data:n.data,path:n.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!a&&(a={result:f,ctx:c}),c.common.issues.length&&l.push(c.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const u=l.map(d=>new ue(d));return C(n,{code:y.invalid_union,unionErrors:u}),I}}get options(){return this._def.options}}Et.create=(t,e)=>new Et({options:t,typeName:M.ZodUnion,...R(e)});function Yt(t,e){const n=pe(t),i=pe(e);if(t===e)return{valid:!0,data:t};if(n===T.object&&i===T.object){const o=N.objectKeys(e),a=N.objectKeys(t).filter(u=>o.indexOf(u)!==-1),l={...t,...e};for(const u of a){const d=Yt(t[u],e[u]);if(!d.valid)return{valid:!1};l[u]=d.data}return{valid:!0,data:l}}else if(n===T.array&&i===T.array){if(t.length!==e.length)return{valid:!1};const o=[];for(let a=0;a<t.length;a++){const l=t[a],u=e[a],d=Yt(l,u);if(!d.valid)return{valid:!1};o.push(d.data)}return{valid:!0,data:o}}else return n===T.date&&i===T.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class St extends D{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),o=(a,l)=>{if(Un(a)||Un(l))return I;const u=Yt(a.value,l.value);return u.valid?(($n(a)||$n(l))&&n.dirty(),{status:n.value,value:u.data}):(C(i,{code:y.invalid_intersection_types}),I)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([a,l])=>o(a,l)):o(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}St.create=(t,e,n)=>new St({left:t,right:e,typeName:M.ZodIntersection,...R(n)});class be extends D{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==T.array)return C(i,{code:y.invalid_type,expected:T.array,received:i.parsedType}),I;if(i.data.length<this._def.items.length)return C(i,{code:y.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),I;!this._def.rest&&i.data.length>this._def.items.length&&(C(i,{code:y.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...i.data].map((l,u)=>{const d=this._def.items[u]||this._def.rest;return d?d._parse(new re(i,l,i.path,u)):null}).filter(l=>!!l);return i.common.async?Promise.all(a).then(l=>W.mergeArray(n,l)):W.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new be({...this._def,rest:e})}}be.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new be({items:t,typeName:M.ZodTuple,rest:null,...R(e)})};class xt extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==T.object)return C(i,{code:y.invalid_type,expected:T.object,received:i.parsedType}),I;const o=[],a=this._def.keyType,l=this._def.valueType;for(const u in i.data)o.push({key:a._parse(new re(i,u,i.path,u)),value:l._parse(new re(i,i.data[u],i.path,u)),alwaysSet:u in i.data});return i.common.async?W.mergeObjectAsync(n,o):W.mergeObjectSync(n,o)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof D?new xt({keyType:e,valueType:n,typeName:M.ZodRecord,...R(i)}):new xt({keyType:ie.create(),valueType:e,typeName:M.ZodRecord,...R(n)})}}class On extends D{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==T.map)return C(i,{code:y.invalid_type,expected:T.map,received:i.parsedType}),I;const o=this._def.keyType,a=this._def.valueType,l=[...i.data.entries()].map(([u,d],c)=>({key:o._parse(new re(i,u,i.path,[c,"key"])),value:a._parse(new re(i,d,i.path,[c,"value"]))}));if(i.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const d of l){const c=await d.key,f=await d.value;if(c.status==="aborted"||f.status==="aborted")return I;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),u.set(c.value,f.value)}return{status:n.value,value:u}})}else{const u=new Map;for(const d of l){const c=d.key,f=d.value;if(c.status==="aborted"||f.status==="aborted")return I;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),u.set(c.value,f.value)}return{status:n.value,value:u}}}}On.create=(t,e,n)=>new On({valueType:e,keyType:t,typeName:M.ZodMap,...R(n)});class st extends D{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==T.set)return C(i,{code:y.invalid_type,expected:T.set,received:i.parsedType}),I;const o=this._def;o.minSize!==null&&i.data.size<o.minSize.value&&(C(i,{code:y.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),n.dirty()),o.maxSize!==null&&i.data.size>o.maxSize.value&&(C(i,{code:y.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),n.dirty());const a=this._def.valueType;function l(d){const c=new Set;for(const f of d){if(f.status==="aborted")return I;f.status==="dirty"&&n.dirty(),c.add(f.value)}return{status:n.value,value:c}}const u=[...i.data.values()].map((d,c)=>a._parse(new re(i,d,i.path,c)));return i.common.async?Promise.all(u).then(d=>l(d)):l(u)}min(e,n){return new st({...this._def,minSize:{value:e,message:_.toString(n)}})}max(e,n){return new st({...this._def,maxSize:{value:e,message:_.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}st.create=(t,e)=>new st({valueType:t,minSize:null,maxSize:null,typeName:M.ZodSet,...R(e)});class Xt extends D{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Xt.create=(t,e)=>new Xt({getter:t,typeName:M.ZodLazy,...R(e)});class Hn extends D{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return C(n,{received:n.data,code:y.invalid_literal,expected:this._def.value}),I}return{status:"valid",value:e.data}}get value(){return this._def.value}}Hn.create=(t,e)=>new Hn({value:t,typeName:M.ZodLiteral,...R(e)});function Io(t,e){return new Be({values:t,typeName:M.ZodEnum,...R(e)})}class Be extends D{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return C(n,{expected:N.joinValues(i),received:n.parsedType,code:y.invalid_type}),I}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return C(n,{received:n.data,code:y.invalid_enum_value,options:i}),I}return Q(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Be.create(e,{...this._def,...n})}exclude(e,n=this._def){return Be.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}Be.create=Io;class Jn extends D{_parse(e){const n=N.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==T.string&&i.parsedType!==T.number){const o=N.objectValues(n);return C(i,{expected:N.joinValues(o),received:i.parsedType,code:y.invalid_type}),I}if(this._cache||(this._cache=new Set(N.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const o=N.objectValues(n);return C(i,{received:i.data,code:y.invalid_enum_value,options:o}),I}return Q(e.data)}get enum(){return this._def.values}}Jn.create=(t,e)=>new Jn({values:t,typeName:M.ZodNativeEnum,...R(e)});class At extends D{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==T.promise&&n.common.async===!1)return C(n,{code:y.invalid_type,expected:T.promise,received:n.parsedType}),I;const i=n.parsedType===T.promise?n.data:Promise.resolve(n.data);return Q(i.then(o=>this._def.type.parseAsync(o,{path:n.path,errorMap:n.common.contextualErrorMap})))}}At.create=(t,e)=>new At({type:t,typeName:M.ZodPromise,...R(e)});class Oe extends D{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===M.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),o=this._def.effect||null,a={addIssue:l=>{C(i,l),l.fatal?n.abort():n.dirty()},get path(){return i.path}};if(a.addIssue=a.addIssue.bind(a),o.type==="preprocess"){const l=o.transform(i.data,a);if(i.common.async)return Promise.resolve(l).then(async u=>{if(n.value==="aborted")return I;const d=await this._def.schema._parseAsync({data:u,path:i.path,parent:i});return d.status==="aborted"?I:d.status==="dirty"||n.value==="dirty"?Xe(d.value):d});{if(n.value==="aborted")return I;const u=this._def.schema._parseSync({data:l,path:i.path,parent:i});return u.status==="aborted"?I:u.status==="dirty"||n.value==="dirty"?Xe(u.value):u}}if(o.type==="refinement"){const l=u=>{const d=o.refinement(u,a);if(i.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(i.common.async===!1){const u=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return u.status==="aborted"?I:(u.status==="dirty"&&n.dirty(),l(u.value),{status:n.value,value:u.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(u=>u.status==="aborted"?I:(u.status==="dirty"&&n.dirty(),l(u.value).then(()=>({status:n.value,value:u.value}))))}if(o.type==="transform")if(i.common.async===!1){const l=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Ge(l))return I;const u=o.transform(l.value,a);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:u}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(l=>Ge(l)?Promise.resolve(o.transform(l.value,a)).then(u=>({status:n.value,value:u})):I);N.assertNever(o)}}Oe.create=(t,e,n)=>new Oe({schema:t,typeName:M.ZodEffects,effect:e,...R(n)});Oe.createWithPreprocess=(t,e,n)=>new Oe({schema:e,effect:{type:"preprocess",transform:t},typeName:M.ZodEffects,...R(n)});class ye extends D{_parse(e){return this._getType(e)===T.undefined?Q(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ye.create=(t,e)=>new ye({innerType:t,typeName:M.ZodOptional,...R(e)});class He extends D{_parse(e){return this._getType(e)===T.null?Q(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}He.create=(t,e)=>new He({innerType:t,typeName:M.ZodNullable,...R(e)});class Qt extends D{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===T.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Qt.create=(t,e)=>new Qt({innerType:t,typeName:M.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...R(e)});class jt extends D{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},o=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Tt(o)?o.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ue(i.common.issues)},input:i.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new ue(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}jt.create=(t,e)=>new jt({innerType:t,typeName:M.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...R(e)});class Wn extends D{_parse(e){if(this._getType(e)!==T.nan){const i=this._getOrReturnCtx(e);return C(i,{code:y.invalid_type,expected:T.nan,received:i.parsedType}),I}return{status:"valid",value:e.data}}}Wn.create=t=>new Wn({typeName:M.ZodNaN,...R(t)});class Zs extends D{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class gn extends D{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?I:a.status==="dirty"?(n.dirty(),Xe(a.value)):this._def.out._parseAsync({data:a.value,path:i.path,parent:i})})();{const o=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return o.status==="aborted"?I:o.status==="dirty"?(n.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:i.path,parent:i})}}static create(e,n){return new gn({in:e,out:n,typeName:M.ZodPipeline})}}class en extends D{_parse(e){const n=this._def.innerType._parse(e),i=o=>(Ge(o)&&(o.value=Object.freeze(o.value)),o);return Tt(n)?n.then(o=>i(o)):i(n)}unwrap(){return this._def.innerType}}en.create=(t,e)=>new en({innerType:t,typeName:M.ZodReadonly,...R(e)});var M;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(M||(M={}));const Se=ie.create,zn=we.create;Ie.create;const Ys=_t.create;qe.create;const Kn=Zt.create;Ce.create;const Qe=se.create,Xs=G.create,Qs=Et.create;St.create;be.create;const js=xt.create,er=Xt.create,tr=Be.create;At.create;ye.create;He.create;const Pe={string:t=>ie.create({...t,coerce:!0}),number:t=>we.create({...t,coerce:!0}),boolean:t=>_t.create({...t,coerce:!0}),bigint:t=>Ie.create({...t,coerce:!0}),date:t=>qe.create({...t,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let nr,ir;function or(){return{geminiUrl:nr,vertexUrl:ir}}function sr(t,e,n){var i,o,a;if(!(!((i=t.httpOptions)===null||i===void 0)&&i.baseUrl)){const l=or();return t.vertexai?(o=l.vertexUrl)!==null&&o!==void 0?o:e:(a=l.geminiUrl)!==null&&a!==void 0?a:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ze{}function S(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function r(t,e,n){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[u])){const d=t[u];if(Array.isArray(n))for(let c=0;c<d.length;c++){const f=d[c];r(f,e.slice(a+1),n[c])}else for(const c of d)r(c,e.slice(a+1),n)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in t||(t[u]=[{}]);const d=t[u];r(d[0],e.slice(a+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],o=t[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else t[i]=n}function s(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const i=e[n];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const a=t[o];return Array.isArray(a)?a.map(l=>s(l,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Zn;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Zn||(Zn={}));var Yn;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Yn||(Yn={}));var oe;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(oe||(oe={}));var Xn;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Xn||(Xn={}));var Qn;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Qn||(Qn={}));var jn;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(jn||(jn={}));var ei;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ei||(ei={}));var ti;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(ti||(ti={}));var ni;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(ni||(ni={}));var ii;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(ii||(ii={}));var oi;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(oi||(oi={}));var si;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(si||(si={}));var ri;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ri||(ri={}));var Mt;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Mt||(Mt={}));var ai;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ai||(ai={}));var tn;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(tn||(tn={}));var li;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(li||(li={}));var ui;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(ui||(ui={}));var ci;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(ci||(ci={}));var di;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(di||(di={}));var fi;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(fi||(fi={}));var hi;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(hi||(hi={}));var pi;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(pi||(pi={}));var mi;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(mi||(mi={}));var gi;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(gi||(gi={}));var yi;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(yi||(yi={}));var vi;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(vi||(vi={}));var Ci;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Ci||(Ci={}));var Ti;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Ti||(Ti={}));var _i;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(_i||(_i={}));var Ei;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Ei||(Ei={}));var Si;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Si||(Si={}));var xi;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(xi||(xi={}));var Ai;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ai||(Ai={}));var Mi;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Mi||(Mi={}));var wi;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(wi||(wi={}));var Ii;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Ii||(Ii={}));var K;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(K||(K={}));var Ue;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ue||(Ue={}));class nn{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ye{get text(){var e,n,i,o,a,l,u,d;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const h=[];for(const p of(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[m,g]of Object.entries(p))m!=="text"&&m!=="thought"&&(g!==null||g!==void 0)&&h.push(m);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,c+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,n,i,o,a,l,u,d;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const h of(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[p,m]of Object.entries(h))p!=="inlineData"&&(m!==null||m!==void 0)&&f.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(c+=atob(h.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,i,o,a,l,u,d;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,i,o,a,l,u,d,c;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,i,o,a,l,u,d,c;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class bi{}class ki{}class rr{}class ar{}class Ri{}class Pi{}class Di{}class lr{}class Ni{}class Ui{}class $i{}class ur{}class cr{}class dr{}class fr{get text(){var e,n,i;let o="",a=!1;const l=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&l.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;a=!0,o+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,n,i;let o="";const a=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,d]of Object.entries(l))u!=="inlineData"&&d!==null&&a.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(o+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class hr{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function bo(t,e){const n=F(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function ko(t){return Array.isArray(t)?t.map(e=>wt(e)):[wt(t)]}function wt(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function pr(t){const e=wt(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function mr(t){const e=wt(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Fi(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Ro(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Fi(e)):[Fi(t)]}function on(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Li(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Vi(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function J(t){if(t==null)throw new Error("ContentUnion is required");return on(t)?t:{role:"user",parts:Ro(t)}}function Po(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=J(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=J(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>J(n)):[J(e)]}function ee(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Li(t)||Vi(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[J(t)]}const e=[],n=[],i=on(t[0]);for(const o of t){const a=on(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(Li(o)||Vi(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||e.push({role:"user",parts:Ro(n)}),e}const gr=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),Gi=tr(["string","number","integer","object","array","boolean","null"]),yr=Qs([Gi,Qe(Gi)]);function vr(t=!0){const e=er(()=>{const n=Xs({type:yr.optional(),format:Se().optional(),title:Se().optional(),description:Se().optional(),default:Kn().optional(),items:e.optional(),minItems:Pe.string().optional(),maxItems:Pe.string().optional(),enum:Qe(Kn()).optional(),properties:js(Se(),e).optional(),required:Qe(Se()).optional(),minProperties:Pe.string().optional(),maxProperties:Pe.string().optional(),propertyOrdering:Qe(Se()).optional(),minimum:zn().optional(),maximum:zn().optional(),minLength:Pe.string().optional(),maxLength:Pe.string().optional(),pattern:Se().optional(),anyOf:Qe(e).optional(),additionalProperties:Ys().optional()});return t?n.strict():n});return e}function Cr(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(oe).includes(n[0].toUpperCase())?n[0].toUpperCase():oe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(oe).includes(i.toUpperCase())?i.toUpperCase():oe.TYPE_UNSPECIFIED})}}function Fe(t){const e={},n=["items"],i=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&Cr(t.type,e);for(const[l,u]of Object.entries(t))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(oe).includes(u.toUpperCase())?u.toUpperCase():oe.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=Fe(u);else if(i.includes(l)){const d=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}d.push(Fe(c))}e[l]=d}else if(o.includes(l)){const d={};for(const[c,f]of Object.entries(u))d[c]=Fe(f);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=u}return e}function It(t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=vr().parse(t);return Fe(e)}else return Fe(t)}function Do(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function yn(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function lt(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=It(e.parameters)),e.response&&(e.response=It(e.response));return t}function ut(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Tr(t,e,n,i=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function _e(t,e){if(typeof e!="string")throw new Error("name must be a string");return Tr(t,e,"cachedContents")}function No(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function fe(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function _r(t){return t!=null&&typeof t=="object"&&"name"in t}function Er(t){return t!=null&&typeof t=="object"&&"video"in t}function Sr(t){return t!=null&&typeof t=="object"&&"uri"in t}function Uo(t){var e;let n;if(_r(t)&&(n=t.name),!(Sr(t)&&(n=t.uri,n===void 0))&&!(Er(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function $o(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Fo(t){for(const e of["models","tunedModels","publisherModels"])if(xr(t,e))return t[e];return[]}function xr(t,e){return t!==null&&typeof t=="object"&&e in t}function Ar(t,e={}){const n=t,i={name:n.name,description:n.description,parameters:Fe(Dt(n.inputSchema))};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Mr(t,e={}){const n=[],i=new Set;for(const o of t){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const l=Ar(o,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function wr(t){const e=[];for(const n of t)e.push(Dt(n));return e}function Ir(t){const e={};for(const[n,i]of Object.entries(t)){const o=i;e[n]=Dt(o)}return e}function Dt(t){const e=new Set(["items"]),n=new Set(["anyOf"]),i=new Set(["properties"]),o={};for(const[a,l]of Object.entries(t))if(e.has(a))o[a]=Dt(l);else if(n.has(a))o[a]=wr(l);else if(i.has(a))o[a]=Ir(l);else if(a==="type"){const u=l.toUpperCase();o[a]=Object.values(oe).includes(u)?u:oe.TYPE_UNSPECIFIED}else gr.has(a)&&(o[a]=l);return o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function br(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function kr(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["data"]);n!=null&&r(e,["data"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function Rr(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function Pr(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],br(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],kr(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],Rr(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=s(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=s(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function qi(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Pr(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function Dr(t){const e={},n=s(t,["behavior"]);n!=null&&r(e,["behavior"],n);const i=s(t,["description"]);i!=null&&r(e,["description"],i);const o=s(t,["name"]);o!=null&&r(e,["name"],o);const a=s(t,["parameters"]);a!=null&&r(e,["parameters"],a);const l=s(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const u=s(t,["response"]);u!=null&&r(e,["response"],u);const d=s(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function Nr(t){const e={},n=s(t,["startTime"]);n!=null&&r(e,["startTime"],n);const i=s(t,["endTime"]);return i!=null&&r(e,["endTime"],i),e}function Ur(t){const e={},n=s(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],Nr(n)),e}function $r(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["dynamicThreshold"]);return i!=null&&r(e,["dynamicThreshold"],i),e}function Fr(t){const e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],$r(n)),e}function Lr(){return{}}function Vr(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>Dr(d))),r(e,["functionDeclarations"],u)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(t,["googleSearch"]);i!=null&&r(e,["googleSearch"],Ur(i));const o=s(t,["googleSearchRetrieval"]);if(o!=null&&r(e,["googleSearchRetrieval"],Fr(o)),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(t,["urlContext"])!=null&&r(e,["urlContext"],Lr());const l=s(t,["codeExecution"]);return l!=null&&r(e,["codeExecution"],l),e}function Gr(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["allowedFunctionNames"]);return i!=null&&r(e,["allowedFunctionNames"],i),e}function qr(t){const e={},n=s(t,["latitude"]);n!=null&&r(e,["latitude"],n);const i=s(t,["longitude"]);return i!=null&&r(e,["longitude"],i),e}function Br(t){const e={},n=s(t,["latLng"]);n!=null&&r(e,["latLng"],qr(n));const i=s(t,["languageCode"]);return i!=null&&r(e,["languageCode"],i),e}function Or(t){const e={},n=s(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],Gr(n));const i=s(t,["retrievalConfig"]);return i!=null&&r(e,["retrievalConfig"],Br(i)),e}function Hr(t,e){const n={},i=s(t,["ttl"]);e!==void 0&&i!=null&&r(e,["ttl"],i);const o=s(t,["expireTime"]);e!==void 0&&o!=null&&r(e,["expireTime"],o);const a=s(t,["displayName"]);e!==void 0&&a!=null&&r(e,["displayName"],a);const l=s(t,["contents"]);if(e!==void 0&&l!=null){let f=ee(l);Array.isArray(f)&&(f=f.map(h=>qi(h))),r(e,["contents"],f)}const u=s(t,["systemInstruction"]);e!==void 0&&u!=null&&r(e,["systemInstruction"],qi(J(u)));const d=s(t,["tools"]);if(e!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(h=>Vr(h))),r(e,["tools"],f)}const c=s(t,["toolConfig"]);if(e!==void 0&&c!=null&&r(e,["toolConfig"],Or(c)),s(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Jr(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["model"],bo(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],Hr(o,n)),n}function Wr(t,e){const n={},i=s(e,["name"]);i!=null&&r(n,["_url","name"],_e(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function zr(t,e){const n={},i=s(e,["name"]);i!=null&&r(n,["_url","name"],_e(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function Kr(t,e){const n={},i=s(t,["ttl"]);e!==void 0&&i!=null&&r(e,["ttl"],i);const o=s(t,["expireTime"]);return e!==void 0&&o!=null&&r(e,["expireTime"],o),n}function Zr(t,e){const n={},i=s(e,["name"]);i!=null&&r(n,["_url","name"],_e(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],Kr(o,n)),n}function Yr(t,e){const n={},i=s(t,["pageSize"]);e!==void 0&&i!=null&&r(e,["_query","pageSize"],i);const o=s(t,["pageToken"]);return e!==void 0&&o!=null&&r(e,["_query","pageToken"],o),n}function Xr(t){const e={},n=s(t,["config"]);return n!=null&&r(e,["config"],Yr(n,e)),e}function Qr(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function jr(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["data"]);i!=null&&r(e,["data"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function ea(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["fileUri"]);i!=null&&r(e,["fileUri"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function ta(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Qr(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],jr(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],ea(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=s(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=s(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function Bi(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>ta(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function na(t){const e={};if(s(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(t,["description"]);n!=null&&r(e,["description"],n);const i=s(t,["name"]);i!=null&&r(e,["name"],i);const o=s(t,["parameters"]);o!=null&&r(e,["parameters"],o);const a=s(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const l=s(t,["response"]);l!=null&&r(e,["response"],l);const u=s(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function ia(t){const e={},n=s(t,["startTime"]);n!=null&&r(e,["startTime"],n);const i=s(t,["endTime"]);return i!=null&&r(e,["endTime"],i),e}function oa(t){const e={},n=s(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],ia(n)),e}function sa(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["dynamicThreshold"]);return i!=null&&r(e,["dynamicThreshold"],i),e}function ra(t){const e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],sa(n)),e}function aa(){return{}}function la(t){const e={},n=s(t,["apiKeyString"]);return n!=null&&r(e,["apiKeyString"],n),e}function ua(t){const e={},n=s(t,["apiKeyConfig"]);n!=null&&r(e,["apiKeyConfig"],la(n));const i=s(t,["authType"]);i!=null&&r(e,["authType"],i);const o=s(t,["googleServiceAccountConfig"]);o!=null&&r(e,["googleServiceAccountConfig"],o);const a=s(t,["httpBasicAuthConfig"]);a!=null&&r(e,["httpBasicAuthConfig"],a);const l=s(t,["oauthConfig"]);l!=null&&r(e,["oauthConfig"],l);const u=s(t,["oidcConfig"]);return u!=null&&r(e,["oidcConfig"],u),e}function ca(t){const e={},n=s(t,["authConfig"]);return n!=null&&r(e,["authConfig"],ua(n)),e}function da(){return{}}function fa(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>na(h))),r(e,["functionDeclarations"],f)}const i=s(t,["retrieval"]);i!=null&&r(e,["retrieval"],i);const o=s(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],oa(o));const a=s(t,["googleSearchRetrieval"]);a!=null&&r(e,["googleSearchRetrieval"],ra(a)),s(t,["enterpriseWebSearch"])!=null&&r(e,["enterpriseWebSearch"],aa());const u=s(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],ca(u)),s(t,["urlContext"])!=null&&r(e,["urlContext"],da());const c=s(t,["codeExecution"]);return c!=null&&r(e,["codeExecution"],c),e}function ha(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["allowedFunctionNames"]);return i!=null&&r(e,["allowedFunctionNames"],i),e}function pa(t){const e={},n=s(t,["latitude"]);n!=null&&r(e,["latitude"],n);const i=s(t,["longitude"]);return i!=null&&r(e,["longitude"],i),e}function ma(t){const e={},n=s(t,["latLng"]);n!=null&&r(e,["latLng"],pa(n));const i=s(t,["languageCode"]);return i!=null&&r(e,["languageCode"],i),e}function ga(t){const e={},n=s(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],ha(n));const i=s(t,["retrievalConfig"]);return i!=null&&r(e,["retrievalConfig"],ma(i)),e}function ya(t,e){const n={},i=s(t,["ttl"]);e!==void 0&&i!=null&&r(e,["ttl"],i);const o=s(t,["expireTime"]);e!==void 0&&o!=null&&r(e,["expireTime"],o);const a=s(t,["displayName"]);e!==void 0&&a!=null&&r(e,["displayName"],a);const l=s(t,["contents"]);if(e!==void 0&&l!=null){let h=ee(l);Array.isArray(h)&&(h=h.map(p=>Bi(p))),r(e,["contents"],h)}const u=s(t,["systemInstruction"]);e!==void 0&&u!=null&&r(e,["systemInstruction"],Bi(J(u)));const d=s(t,["tools"]);if(e!==void 0&&d!=null){let h=d;Array.isArray(h)&&(h=h.map(p=>fa(p))),r(e,["tools"],h)}const c=s(t,["toolConfig"]);e!==void 0&&c!=null&&r(e,["toolConfig"],ga(c));const f=s(t,["kmsKeyName"]);return e!==void 0&&f!=null&&r(e,["encryption_spec","kmsKeyName"],f),n}function va(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["model"],bo(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],ya(o,n)),n}function Ca(t,e){const n={},i=s(e,["name"]);i!=null&&r(n,["_url","name"],_e(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function Ta(t,e){const n={},i=s(e,["name"]);i!=null&&r(n,["_url","name"],_e(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function _a(t,e){const n={},i=s(t,["ttl"]);e!==void 0&&i!=null&&r(e,["ttl"],i);const o=s(t,["expireTime"]);return e!==void 0&&o!=null&&r(e,["expireTime"],o),n}function Ea(t,e){const n={},i=s(e,["name"]);i!=null&&r(n,["_url","name"],_e(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],_a(o,n)),n}function Sa(t,e){const n={},i=s(t,["pageSize"]);e!==void 0&&i!=null&&r(e,["_query","pageSize"],i);const o=s(t,["pageToken"]);return e!==void 0&&o!=null&&r(e,["_query","pageToken"],o),n}function xa(t){const e={},n=s(t,["config"]);return n!=null&&r(e,["config"],Sa(n,e)),e}function mt(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["displayName"]);i!=null&&r(e,["displayName"],i);const o=s(t,["model"]);o!=null&&r(e,["model"],o);const a=s(t,["createTime"]);a!=null&&r(e,["createTime"],a);const l=s(t,["updateTime"]);l!=null&&r(e,["updateTime"],l);const u=s(t,["expireTime"]);u!=null&&r(e,["expireTime"],u);const d=s(t,["usageMetadata"]);return d!=null&&r(e,["usageMetadata"],d),e}function Aa(){return{}}function Ma(t){const e={},n=s(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const i=s(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>mt(a))),r(e,["cachedContents"],o)}return e}function gt(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["displayName"]);i!=null&&r(e,["displayName"],i);const o=s(t,["model"]);o!=null&&r(e,["model"],o);const a=s(t,["createTime"]);a!=null&&r(e,["createTime"],a);const l=s(t,["updateTime"]);l!=null&&r(e,["updateTime"],l);const u=s(t,["expireTime"]);u!=null&&r(e,["expireTime"],u);const d=s(t,["usageMetadata"]);return d!=null&&r(e,["usageMetadata"],d),e}function wa(){return{}}function Ia(t){const e={},n=s(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const i=s(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>gt(a))),r(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Je;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Je||(Je={}));class Nt{constructor(e,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,o)}init(e,n,i){var o,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let l={config:{}};i?typeof i=="object"?l=Object.assign({},i):l=i:l={config:{}},l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(o=l.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ba extends ze{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Nt(Je.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=va(this.apiClient,e);return u=S("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>gt(f))}else{const c=Jr(this.apiClient,e);return u=S("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>mt(f))}}async get(e){var n,i,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Ca(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>gt(f))}else{const c=Wr(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>mt(f))}}async delete(e){var n,i,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Ta(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(()=>{const f=wa(),h=new Ui;return Object.assign(h,f),h})}else{const c=zr(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(()=>{const f=Aa(),h=new Ui;return Object.assign(h,f),h})}}async update(e){var n,i,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Ea(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>gt(f))}else{const c=Zr(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>mt(f))}}async listInternal(e){var n,i,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=xa(e);return u=S("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>{const h=Ia(f),p=new $i;return Object.assign(p,h),p})}else{const c=Xr(e);return u=S("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const h=Ma(f),p=new $i;return Object.assign(p,h),p})}}}function Oi(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function L(t){return this instanceof L?(this.v=t,this):new L(t)}function Le(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),o[Symbol.asyncIterator]=function(){return this},o;function l(m){return function(g){return Promise.resolve(g).then(m,h)}}function u(m,g){i[m]&&(o[m]=function(v){return new Promise(function(E,x){a.push([m,v,E,x])>1||d(m,v)})},g&&(o[m]=g(o[m])))}function d(m,g){try{c(i[m](g))}catch(v){p(a[0][3],v)}}function c(m){m.value instanceof L?Promise.resolve(m.value.v).then(f,h):p(a[0][2],m)}function f(m){d("next",m)}function h(m){d("throw",m)}function p(m,g){m(g),a.shift(),a.length&&d(a[0][0],a[0][1])}}function tt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Oi=="function"?Oi(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(l){return new Promise(function(u,d){l=t[a](l),o(u,d,l.done,l.value)})}}function o(a,l,u,d){Promise.resolve(d).then(function(c){a({value:c,done:u})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ka(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Lo(n)}function Lo(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function Ra(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Hi(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const o=[];let a=!0;for(;i<n&&t[i].role==="model";)o.push(t[i]),a&&!Lo(t[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class Pa{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Da(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Da{constructor(e,n,i,o={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),Ra(a)}async sendMessage(e){var n;await this.sendPromise;const i=J(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,l,u;const d=await o,c=(l=(a=d.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,f=d.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];f!=null&&(p=(u=f.slice(h))!==null&&u!==void 0?u:[]);const m=c?[c]:[];this.recordHistory(i,m,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const i=J(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?Hi(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,o;return Le(this,arguments,function*(){var l,u,d,c;const f=[];try{for(var h=!0,p=tt(e),m;m=yield L(p.next()),l=m.done,!l;h=!0){c=m.value,h=!1;const g=c;if(ka(g)){const v=(o=(i=g.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;v!==void 0&&f.push(v)}yield yield L(g)}}catch(g){u={error:g}}finally{try{!h&&!l&&(d=p.return)&&(yield L(d.call(p)))}finally{if(u)throw u.error}}this.recordHistory(n,f)})}recordHistory(e,n,i){let o=[];n.length>0&&n.every(a=>a.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Hi(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ut extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ut.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Na(t,e){const n={},i=s(t,["pageSize"]);e!==void 0&&i!=null&&r(e,["_query","pageSize"],i);const o=s(t,["pageToken"]);return e!==void 0&&o!=null&&r(e,["_query","pageToken"],o),n}function Ua(t){const e={},n=s(t,["config"]);return n!=null&&r(e,["config"],Na(n,e)),e}function $a(t){const e={},n=s(t,["details"]);n!=null&&r(e,["details"],n);const i=s(t,["message"]);i!=null&&r(e,["message"],i);const o=s(t,["code"]);return o!=null&&r(e,["code"],o),e}function Fa(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["displayName"]);i!=null&&r(e,["displayName"],i);const o=s(t,["mimeType"]);o!=null&&r(e,["mimeType"],o);const a=s(t,["sizeBytes"]);a!=null&&r(e,["sizeBytes"],a);const l=s(t,["createTime"]);l!=null&&r(e,["createTime"],l);const u=s(t,["expirationTime"]);u!=null&&r(e,["expirationTime"],u);const d=s(t,["updateTime"]);d!=null&&r(e,["updateTime"],d);const c=s(t,["sha256Hash"]);c!=null&&r(e,["sha256Hash"],c);const f=s(t,["uri"]);f!=null&&r(e,["uri"],f);const h=s(t,["downloadUri"]);h!=null&&r(e,["downloadUri"],h);const p=s(t,["state"]);p!=null&&r(e,["state"],p);const m=s(t,["source"]);m!=null&&r(e,["source"],m);const g=s(t,["videoMetadata"]);g!=null&&r(e,["videoMetadata"],g);const v=s(t,["error"]);return v!=null&&r(e,["error"],$a(v)),e}function La(t){const e={},n=s(t,["file"]);n!=null&&r(e,["file"],Fa(n));const i=s(t,["config"]);return i!=null&&r(e,["config"],i),e}function Va(t){const e={},n=s(t,["name"]);n!=null&&r(e,["_url","file"],Uo(n));const i=s(t,["config"]);return i!=null&&r(e,["config"],i),e}function Ga(t){const e={},n=s(t,["name"]);n!=null&&r(e,["_url","file"],Uo(n));const i=s(t,["config"]);return i!=null&&r(e,["config"],i),e}function qa(t){const e={},n=s(t,["details"]);n!=null&&r(e,["details"],n);const i=s(t,["message"]);i!=null&&r(e,["message"],i);const o=s(t,["code"]);return o!=null&&r(e,["code"],o),e}function sn(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["displayName"]);i!=null&&r(e,["displayName"],i);const o=s(t,["mimeType"]);o!=null&&r(e,["mimeType"],o);const a=s(t,["sizeBytes"]);a!=null&&r(e,["sizeBytes"],a);const l=s(t,["createTime"]);l!=null&&r(e,["createTime"],l);const u=s(t,["expirationTime"]);u!=null&&r(e,["expirationTime"],u);const d=s(t,["updateTime"]);d!=null&&r(e,["updateTime"],d);const c=s(t,["sha256Hash"]);c!=null&&r(e,["sha256Hash"],c);const f=s(t,["uri"]);f!=null&&r(e,["uri"],f);const h=s(t,["downloadUri"]);h!=null&&r(e,["downloadUri"],h);const p=s(t,["state"]);p!=null&&r(e,["state"],p);const m=s(t,["source"]);m!=null&&r(e,["source"],m);const g=s(t,["videoMetadata"]);g!=null&&r(e,["videoMetadata"],g);const v=s(t,["error"]);return v!=null&&r(e,["error"],qa(v)),e}function Ba(t){const e={},n=s(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const i=s(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>sn(a))),r(e,["files"],o)}return e}function Oa(){return{}}function Ha(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ja extends ze{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Nt(Je.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>sn(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ua(e);return a=S("files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const c=Ba(d),f=new ur;return Object.assign(f,c),f})}}async createInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=La(e);return a=S("upload/v1beta/files",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(()=>{const d=Oa(),c=new cr;return Object.assign(c,d),c})}}async get(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Va(e);return a=S("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>sn(d))}}async delete(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Ga(e);return a=S("files/{file}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(()=>{const d=Ha(),c=new dr;return Object.assign(c,d),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wa(t){const e={},n=s(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function za(t){const e={},n=s(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function Vo(t){const e={},n=s(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],Wa(n)),e}function Ka(t){const e={},n=s(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],za(n)),e}function Za(t){const e={},n=s(t,["speaker"]);n!=null&&r(e,["speaker"],n);const i=s(t,["voiceConfig"]);return i!=null&&r(e,["voiceConfig"],Vo(i)),e}function Ya(t){const e={},n=s(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Za(o))),r(e,["speakerVoiceConfigs"],i)}return e}function Xa(t){const e={},n=s(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],Vo(n));const i=s(t,["multiSpeakerVoiceConfig"]);i!=null&&r(e,["multiSpeakerVoiceConfig"],Ya(i));const o=s(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function Qa(t){const e={},n=s(t,["voiceConfig"]);if(n!=null&&r(e,["voiceConfig"],Ka(n)),s(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=s(t,["languageCode"]);return i!=null&&r(e,["languageCode"],i),e}function ja(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function el(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function tl(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["data"]);n!=null&&r(e,["data"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function nl(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["data"]);i!=null&&r(e,["data"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function il(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function ol(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["fileUri"]);i!=null&&r(e,["fileUri"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function sl(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],ja(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],tl(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],il(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=s(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=s(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function rl(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],el(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],nl(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],ol(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=s(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=s(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function al(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>sl(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function ll(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>rl(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function ul(t){const e={},n=s(t,["behavior"]);n!=null&&r(e,["behavior"],n);const i=s(t,["description"]);i!=null&&r(e,["description"],i);const o=s(t,["name"]);o!=null&&r(e,["name"],o);const a=s(t,["parameters"]);a!=null&&r(e,["parameters"],a);const l=s(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const u=s(t,["response"]);u!=null&&r(e,["response"],u);const d=s(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function cl(t){const e={};if(s(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(t,["description"]);n!=null&&r(e,["description"],n);const i=s(t,["name"]);i!=null&&r(e,["name"],i);const o=s(t,["parameters"]);o!=null&&r(e,["parameters"],o);const a=s(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const l=s(t,["response"]);l!=null&&r(e,["response"],l);const u=s(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function dl(t){const e={},n=s(t,["startTime"]);n!=null&&r(e,["startTime"],n);const i=s(t,["endTime"]);return i!=null&&r(e,["endTime"],i),e}function fl(t){const e={},n=s(t,["startTime"]);n!=null&&r(e,["startTime"],n);const i=s(t,["endTime"]);return i!=null&&r(e,["endTime"],i),e}function hl(t){const e={},n=s(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],dl(n)),e}function pl(t){const e={},n=s(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],fl(n)),e}function ml(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["dynamicThreshold"]);return i!=null&&r(e,["dynamicThreshold"],i),e}function gl(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["dynamicThreshold"]);return i!=null&&r(e,["dynamicThreshold"],i),e}function yl(t){const e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],ml(n)),e}function vl(t){const e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],gl(n)),e}function Cl(){return{}}function Tl(t){const e={},n=s(t,["apiKeyString"]);return n!=null&&r(e,["apiKeyString"],n),e}function _l(t){const e={},n=s(t,["apiKeyConfig"]);n!=null&&r(e,["apiKeyConfig"],Tl(n));const i=s(t,["authType"]);i!=null&&r(e,["authType"],i);const o=s(t,["googleServiceAccountConfig"]);o!=null&&r(e,["googleServiceAccountConfig"],o);const a=s(t,["httpBasicAuthConfig"]);a!=null&&r(e,["httpBasicAuthConfig"],a);const l=s(t,["oauthConfig"]);l!=null&&r(e,["oauthConfig"],l);const u=s(t,["oidcConfig"]);return u!=null&&r(e,["oidcConfig"],u),e}function El(t){const e={},n=s(t,["authConfig"]);return n!=null&&r(e,["authConfig"],_l(n)),e}function Sl(){return{}}function xl(){return{}}function Al(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>ul(d))),r(e,["functionDeclarations"],u)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(t,["googleSearch"]);i!=null&&r(e,["googleSearch"],hl(i));const o=s(t,["googleSearchRetrieval"]);if(o!=null&&r(e,["googleSearchRetrieval"],yl(o)),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(t,["urlContext"])!=null&&r(e,["urlContext"],Sl());const l=s(t,["codeExecution"]);return l!=null&&r(e,["codeExecution"],l),e}function Ml(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>cl(h))),r(e,["functionDeclarations"],f)}const i=s(t,["retrieval"]);i!=null&&r(e,["retrieval"],i);const o=s(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],pl(o));const a=s(t,["googleSearchRetrieval"]);a!=null&&r(e,["googleSearchRetrieval"],vl(a)),s(t,["enterpriseWebSearch"])!=null&&r(e,["enterpriseWebSearch"],Cl());const u=s(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],El(u)),s(t,["urlContext"])!=null&&r(e,["urlContext"],xl());const c=s(t,["codeExecution"]);return c!=null&&r(e,["codeExecution"],c),e}function wl(t){const e={},n=s(t,["handle"]);if(n!=null&&r(e,["handle"],n),s(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Il(t){const e={},n=s(t,["handle"]);n!=null&&r(e,["handle"],n);const i=s(t,["transparent"]);return i!=null&&r(e,["transparent"],i),e}function Ji(){return{}}function Wi(){return{}}function bl(t){const e={},n=s(t,["disabled"]);n!=null&&r(e,["disabled"],n);const i=s(t,["startOfSpeechSensitivity"]);i!=null&&r(e,["startOfSpeechSensitivity"],i);const o=s(t,["endOfSpeechSensitivity"]);o!=null&&r(e,["endOfSpeechSensitivity"],o);const a=s(t,["prefixPaddingMs"]);a!=null&&r(e,["prefixPaddingMs"],a);const l=s(t,["silenceDurationMs"]);return l!=null&&r(e,["silenceDurationMs"],l),e}function kl(t){const e={},n=s(t,["disabled"]);n!=null&&r(e,["disabled"],n);const i=s(t,["startOfSpeechSensitivity"]);i!=null&&r(e,["startOfSpeechSensitivity"],i);const o=s(t,["endOfSpeechSensitivity"]);o!=null&&r(e,["endOfSpeechSensitivity"],o);const a=s(t,["prefixPaddingMs"]);a!=null&&r(e,["prefixPaddingMs"],a);const l=s(t,["silenceDurationMs"]);return l!=null&&r(e,["silenceDurationMs"],l),e}function Rl(t){const e={},n=s(t,["automaticActivityDetection"]);n!=null&&r(e,["automaticActivityDetection"],bl(n));const i=s(t,["activityHandling"]);i!=null&&r(e,["activityHandling"],i);const o=s(t,["turnCoverage"]);return o!=null&&r(e,["turnCoverage"],o),e}function Pl(t){const e={},n=s(t,["automaticActivityDetection"]);n!=null&&r(e,["automaticActivityDetection"],kl(n));const i=s(t,["activityHandling"]);i!=null&&r(e,["activityHandling"],i);const o=s(t,["turnCoverage"]);return o!=null&&r(e,["turnCoverage"],o),e}function Dl(t){const e={},n=s(t,["targetTokens"]);return n!=null&&r(e,["targetTokens"],n),e}function Nl(t){const e={},n=s(t,["targetTokens"]);return n!=null&&r(e,["targetTokens"],n),e}function Ul(t){const e={},n=s(t,["triggerTokens"]);n!=null&&r(e,["triggerTokens"],n);const i=s(t,["slidingWindow"]);return i!=null&&r(e,["slidingWindow"],Dl(i)),e}function $l(t){const e={},n=s(t,["triggerTokens"]);n!=null&&r(e,["triggerTokens"],n);const i=s(t,["slidingWindow"]);return i!=null&&r(e,["slidingWindow"],Nl(i)),e}function Fl(t){const e={},n=s(t,["proactiveAudio"]);return n!=null&&r(e,["proactiveAudio"],n),e}function Ll(t){const e={},n=s(t,["proactiveAudio"]);return n!=null&&r(e,["proactiveAudio"],n),e}function Vl(t,e){const n={},i=s(t,["generationConfig"]);e!==void 0&&i!=null&&r(e,["setup","generationConfig"],i);const o=s(t,["responseModalities"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig","responseModalities"],o);const a=s(t,["temperature"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","temperature"],a);const l=s(t,["topP"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","topP"],l);const u=s(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const d=s(t,["maxOutputTokens"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","maxOutputTokens"],d);const c=s(t,["mediaResolution"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","mediaResolution"],c);const f=s(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const h=s(t,["speechConfig"]);e!==void 0&&h!=null&&r(e,["setup","generationConfig","speechConfig"],Xa(yn(h)));const p=s(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=s(t,["systemInstruction"]);e!==void 0&&m!=null&&r(e,["setup","systemInstruction"],al(J(m)));const g=s(t,["tools"]);if(e!==void 0&&g!=null){let w=ut(g);Array.isArray(w)&&(w=w.map($=>Al(lt($)))),r(e,["setup","tools"],w)}const v=s(t,["sessionResumption"]);e!==void 0&&v!=null&&r(e,["setup","sessionResumption"],wl(v));const E=s(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&r(e,["setup","inputAudioTranscription"],Ji());const x=s(t,["outputAudioTranscription"]);e!==void 0&&x!=null&&r(e,["setup","outputAudioTranscription"],Ji());const b=s(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&r(e,["setup","realtimeInputConfig"],Rl(b));const A=s(t,["contextWindowCompression"]);e!==void 0&&A!=null&&r(e,["setup","contextWindowCompression"],Ul(A));const P=s(t,["proactivity"]);return e!==void 0&&P!=null&&r(e,["setup","proactivity"],Fl(P)),n}function Gl(t,e){const n={},i=s(t,["generationConfig"]);e!==void 0&&i!=null&&r(e,["setup","generationConfig"],i);const o=s(t,["responseModalities"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig","responseModalities"],o);const a=s(t,["temperature"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","temperature"],a);const l=s(t,["topP"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","topP"],l);const u=s(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const d=s(t,["maxOutputTokens"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","maxOutputTokens"],d);const c=s(t,["mediaResolution"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","mediaResolution"],c);const f=s(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const h=s(t,["speechConfig"]);e!==void 0&&h!=null&&r(e,["setup","generationConfig","speechConfig"],Qa(yn(h)));const p=s(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=s(t,["systemInstruction"]);e!==void 0&&m!=null&&r(e,["setup","systemInstruction"],ll(J(m)));const g=s(t,["tools"]);if(e!==void 0&&g!=null){let w=ut(g);Array.isArray(w)&&(w=w.map($=>Ml(lt($)))),r(e,["setup","tools"],w)}const v=s(t,["sessionResumption"]);e!==void 0&&v!=null&&r(e,["setup","sessionResumption"],Il(v));const E=s(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&r(e,["setup","inputAudioTranscription"],Wi());const x=s(t,["outputAudioTranscription"]);e!==void 0&&x!=null&&r(e,["setup","outputAudioTranscription"],Wi());const b=s(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&r(e,["setup","realtimeInputConfig"],Pl(b));const A=s(t,["contextWindowCompression"]);e!==void 0&&A!=null&&r(e,["setup","contextWindowCompression"],$l(A));const P=s(t,["proactivity"]);return e!==void 0&&P!=null&&r(e,["setup","proactivity"],Ll(P)),n}function ql(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["setup","model"],F(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],Vl(o,n)),n}function Bl(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["setup","model"],F(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],Gl(o,n)),n}function Ol(){return{}}function Hl(){return{}}function Jl(){return{}}function Wl(){return{}}function zl(t){const e={},n=s(t,["media"]);n!=null&&r(e,["mediaChunks"],ko(n));const i=s(t,["audio"]);i!=null&&r(e,["audio"],mr(i));const o=s(t,["audioStreamEnd"]);o!=null&&r(e,["audioStreamEnd"],o);const a=s(t,["video"]);a!=null&&r(e,["video"],pr(a));const l=s(t,["text"]);return l!=null&&r(e,["text"],l),s(t,["activityStart"])!=null&&r(e,["activityStart"],Ol()),s(t,["activityEnd"])!=null&&r(e,["activityEnd"],Jl()),e}function Kl(t){const e={},n=s(t,["media"]);if(n!=null&&r(e,["mediaChunks"],ko(n)),s(t,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=s(t,["audioStreamEnd"]);if(i!=null&&r(e,["audioStreamEnd"],i),s(t,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(s(t,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return s(t,["activityStart"])!=null&&r(e,["activityStart"],Hl()),s(t,["activityEnd"])!=null&&r(e,["activityEnd"],Wl()),e}function Go(t){const e={},n=s(t,["text"]);n!=null&&r(e,["text"],n);const i=s(t,["weight"]);return i!=null&&r(e,["weight"],i),e}function Zl(t){const e={},n=s(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Go(o))),r(e,["weightedPrompts"],i)}return e}function qo(t){const e={},n=s(t,["temperature"]);n!=null&&r(e,["temperature"],n);const i=s(t,["topK"]);i!=null&&r(e,["topK"],i);const o=s(t,["seed"]);o!=null&&r(e,["seed"],o);const a=s(t,["guidance"]);a!=null&&r(e,["guidance"],a);const l=s(t,["bpm"]);l!=null&&r(e,["bpm"],l);const u=s(t,["density"]);u!=null&&r(e,["density"],u);const d=s(t,["brightness"]);d!=null&&r(e,["brightness"],d);const c=s(t,["scale"]);c!=null&&r(e,["scale"],c);const f=s(t,["muteBass"]);f!=null&&r(e,["muteBass"],f);const h=s(t,["muteDrums"]);h!=null&&r(e,["muteDrums"],h);const p=s(t,["onlyBassAndDrums"]);return p!=null&&r(e,["onlyBassAndDrums"],p),e}function Yl(t){const e={},n=s(t,["musicGenerationConfig"]);return n!=null&&r(e,["musicGenerationConfig"],qo(n)),e}function Bo(t){const e={},n=s(t,["model"]);return n!=null&&r(e,["model"],n),e}function Oo(t){const e={},n=s(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Go(o))),r(e,["weightedPrompts"],i)}return e}function rn(t){const e={},n=s(t,["setup"]);n!=null&&r(e,["setup"],Bo(n));const i=s(t,["clientContent"]);i!=null&&r(e,["clientContent"],Oo(i));const o=s(t,["musicGenerationConfig"]);o!=null&&r(e,["musicGenerationConfig"],qo(o));const a=s(t,["playbackControl"]);return a!=null&&r(e,["playbackControl"],a),e}function Xl(){return{}}function Ql(){return{}}function jl(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function eu(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function tu(t){const e={},n=s(t,["data"]);n!=null&&r(e,["data"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function nu(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["data"]);i!=null&&r(e,["data"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function iu(t){const e={},n=s(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function ou(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["fileUri"]);i!=null&&r(e,["fileUri"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function su(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],jl(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],tu(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],iu(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=s(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=s(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function ru(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],eu(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],nu(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],ou(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=s(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=s(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function au(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>su(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function lu(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>ru(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function zi(t){const e={},n=s(t,["text"]);n!=null&&r(e,["text"],n);const i=s(t,["finished"]);return i!=null&&r(e,["finished"],i),e}function Ki(t){const e={},n=s(t,["text"]);n!=null&&r(e,["text"],n);const i=s(t,["finished"]);return i!=null&&r(e,["finished"],i),e}function uu(t){const e={},n=s(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const i=s(t,["urlRetrievalStatus"]);return i!=null&&r(e,["urlRetrievalStatus"],i),e}function cu(t){const e={},n=s(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>uu(o))),r(e,["urlMetadata"],i)}return e}function du(t){const e={},n=s(t,["modelTurn"]);n!=null&&r(e,["modelTurn"],au(n));const i=s(t,["turnComplete"]);i!=null&&r(e,["turnComplete"],i);const o=s(t,["interrupted"]);o!=null&&r(e,["interrupted"],o);const a=s(t,["groundingMetadata"]);a!=null&&r(e,["groundingMetadata"],a);const l=s(t,["generationComplete"]);l!=null&&r(e,["generationComplete"],l);const u=s(t,["inputTranscription"]);u!=null&&r(e,["inputTranscription"],zi(u));const d=s(t,["outputTranscription"]);d!=null&&r(e,["outputTranscription"],zi(d));const c=s(t,["urlContextMetadata"]);return c!=null&&r(e,["urlContextMetadata"],cu(c)),e}function fu(t){const e={},n=s(t,["modelTurn"]);n!=null&&r(e,["modelTurn"],lu(n));const i=s(t,["turnComplete"]);i!=null&&r(e,["turnComplete"],i);const o=s(t,["interrupted"]);o!=null&&r(e,["interrupted"],o);const a=s(t,["groundingMetadata"]);a!=null&&r(e,["groundingMetadata"],a);const l=s(t,["generationComplete"]);l!=null&&r(e,["generationComplete"],l);const u=s(t,["inputTranscription"]);u!=null&&r(e,["inputTranscription"],Ki(u));const d=s(t,["outputTranscription"]);return d!=null&&r(e,["outputTranscription"],Ki(d)),e}function hu(t){const e={},n=s(t,["id"]);n!=null&&r(e,["id"],n);const i=s(t,["args"]);i!=null&&r(e,["args"],i);const o=s(t,["name"]);return o!=null&&r(e,["name"],o),e}function pu(t){const e={},n=s(t,["args"]);n!=null&&r(e,["args"],n);const i=s(t,["name"]);return i!=null&&r(e,["name"],i),e}function mu(t){const e={},n=s(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>hu(o))),r(e,["functionCalls"],i)}return e}function gu(t){const e={},n=s(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>pu(o))),r(e,["functionCalls"],i)}return e}function yu(t){const e={},n=s(t,["ids"]);return n!=null&&r(e,["ids"],n),e}function vu(t){const e={},n=s(t,["ids"]);return n!=null&&r(e,["ids"],n),e}function dt(t){const e={},n=s(t,["modality"]);n!=null&&r(e,["modality"],n);const i=s(t,["tokenCount"]);return i!=null&&r(e,["tokenCount"],i),e}function ft(t){const e={},n=s(t,["modality"]);n!=null&&r(e,["modality"],n);const i=s(t,["tokenCount"]);return i!=null&&r(e,["tokenCount"],i),e}function Cu(t){const e={},n=s(t,["promptTokenCount"]);n!=null&&r(e,["promptTokenCount"],n);const i=s(t,["cachedContentTokenCount"]);i!=null&&r(e,["cachedContentTokenCount"],i);const o=s(t,["responseTokenCount"]);o!=null&&r(e,["responseTokenCount"],o);const a=s(t,["toolUsePromptTokenCount"]);a!=null&&r(e,["toolUsePromptTokenCount"],a);const l=s(t,["thoughtsTokenCount"]);l!=null&&r(e,["thoughtsTokenCount"],l);const u=s(t,["totalTokenCount"]);u!=null&&r(e,["totalTokenCount"],u);const d=s(t,["promptTokensDetails"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>dt(m))),r(e,["promptTokensDetails"],p)}const c=s(t,["cacheTokensDetails"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>dt(m))),r(e,["cacheTokensDetails"],p)}const f=s(t,["responseTokensDetails"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>dt(m))),r(e,["responseTokensDetails"],p)}const h=s(t,["toolUsePromptTokensDetails"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>dt(m))),r(e,["toolUsePromptTokensDetails"],p)}return e}function Tu(t){const e={},n=s(t,["promptTokenCount"]);n!=null&&r(e,["promptTokenCount"],n);const i=s(t,["cachedContentTokenCount"]);i!=null&&r(e,["cachedContentTokenCount"],i);const o=s(t,["candidatesTokenCount"]);o!=null&&r(e,["responseTokenCount"],o);const a=s(t,["toolUsePromptTokenCount"]);a!=null&&r(e,["toolUsePromptTokenCount"],a);const l=s(t,["thoughtsTokenCount"]);l!=null&&r(e,["thoughtsTokenCount"],l);const u=s(t,["totalTokenCount"]);u!=null&&r(e,["totalTokenCount"],u);const d=s(t,["promptTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>ft(g))),r(e,["promptTokensDetails"],m)}const c=s(t,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>ft(g))),r(e,["cacheTokensDetails"],m)}const f=s(t,["candidatesTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>ft(g))),r(e,["responseTokensDetails"],m)}const h=s(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>ft(g))),r(e,["toolUsePromptTokensDetails"],m)}const p=s(t,["trafficType"]);return p!=null&&r(e,["trafficType"],p),e}function _u(t){const e={},n=s(t,["timeLeft"]);return n!=null&&r(e,["timeLeft"],n),e}function Eu(t){const e={},n=s(t,["timeLeft"]);return n!=null&&r(e,["timeLeft"],n),e}function Su(t){const e={},n=s(t,["newHandle"]);n!=null&&r(e,["newHandle"],n);const i=s(t,["resumable"]);i!=null&&r(e,["resumable"],i);const o=s(t,["lastConsumedClientMessageIndex"]);return o!=null&&r(e,["lastConsumedClientMessageIndex"],o),e}function xu(t){const e={},n=s(t,["newHandle"]);n!=null&&r(e,["newHandle"],n);const i=s(t,["resumable"]);i!=null&&r(e,["resumable"],i);const o=s(t,["lastConsumedClientMessageIndex"]);return o!=null&&r(e,["lastConsumedClientMessageIndex"],o),e}function Au(t){const e={};s(t,["setupComplete"])!=null&&r(e,["setupComplete"],Xl());const i=s(t,["serverContent"]);i!=null&&r(e,["serverContent"],du(i));const o=s(t,["toolCall"]);o!=null&&r(e,["toolCall"],mu(o));const a=s(t,["toolCallCancellation"]);a!=null&&r(e,["toolCallCancellation"],yu(a));const l=s(t,["usageMetadata"]);l!=null&&r(e,["usageMetadata"],Cu(l));const u=s(t,["goAway"]);u!=null&&r(e,["goAway"],_u(u));const d=s(t,["sessionResumptionUpdate"]);return d!=null&&r(e,["sessionResumptionUpdate"],Su(d)),e}function Mu(t){const e={};s(t,["setupComplete"])!=null&&r(e,["setupComplete"],Ql());const i=s(t,["serverContent"]);i!=null&&r(e,["serverContent"],fu(i));const o=s(t,["toolCall"]);o!=null&&r(e,["toolCall"],gu(o));const a=s(t,["toolCallCancellation"]);a!=null&&r(e,["toolCallCancellation"],vu(a));const l=s(t,["usageMetadata"]);l!=null&&r(e,["usageMetadata"],Tu(l));const u=s(t,["goAway"]);u!=null&&r(e,["goAway"],Eu(u));const d=s(t,["sessionResumptionUpdate"]);return d!=null&&r(e,["sessionResumptionUpdate"],xu(d)),e}function wu(){return{}}function Iu(t){const e={},n=s(t,["text"]);n!=null&&r(e,["text"],n);const i=s(t,["weight"]);return i!=null&&r(e,["weight"],i),e}function bu(t){const e={},n=s(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Iu(o))),r(e,["weightedPrompts"],i)}return e}function ku(t){const e={},n=s(t,["temperature"]);n!=null&&r(e,["temperature"],n);const i=s(t,["topK"]);i!=null&&r(e,["topK"],i);const o=s(t,["seed"]);o!=null&&r(e,["seed"],o);const a=s(t,["guidance"]);a!=null&&r(e,["guidance"],a);const l=s(t,["bpm"]);l!=null&&r(e,["bpm"],l);const u=s(t,["density"]);u!=null&&r(e,["density"],u);const d=s(t,["brightness"]);d!=null&&r(e,["brightness"],d);const c=s(t,["scale"]);c!=null&&r(e,["scale"],c);const f=s(t,["muteBass"]);f!=null&&r(e,["muteBass"],f);const h=s(t,["muteDrums"]);h!=null&&r(e,["muteDrums"],h);const p=s(t,["onlyBassAndDrums"]);return p!=null&&r(e,["onlyBassAndDrums"],p),e}function Ru(t){const e={},n=s(t,["clientContent"]);n!=null&&r(e,["clientContent"],bu(n));const i=s(t,["musicGenerationConfig"]);return i!=null&&r(e,["musicGenerationConfig"],ku(i)),e}function Pu(t){const e={},n=s(t,["data"]);n!=null&&r(e,["data"],n);const i=s(t,["mimeType"]);i!=null&&r(e,["mimeType"],i);const o=s(t,["sourceMetadata"]);return o!=null&&r(e,["sourceMetadata"],Ru(o)),e}function Du(t){const e={},n=s(t,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Pu(o))),r(e,["audioChunks"],i)}return e}function Nu(t){const e={},n=s(t,["text"]);n!=null&&r(e,["text"],n);const i=s(t,["filteredReason"]);return i!=null&&r(e,["filteredReason"],i),e}function Uu(t){const e={};s(t,["setupComplete"])!=null&&r(e,["setupComplete"],wu());const i=s(t,["serverContent"]);i!=null&&r(e,["serverContent"],Du(i));const o=s(t,["filteredPrompt"]);return o!=null&&r(e,["filteredPrompt"],Nu(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $u(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function Fu(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["data"]);n!=null&&r(e,["data"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function Lu(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function Vu(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],$u(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],Fu(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],Lu(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=s(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=s(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function $t(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Vu(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function Gu(t){const e={},n=s(t,["anyOf"]);n!=null&&r(e,["anyOf"],n);const i=s(t,["default"]);i!=null&&r(e,["default"],i);const o=s(t,["description"]);o!=null&&r(e,["description"],o);const a=s(t,["enum"]);a!=null&&r(e,["enum"],a);const l=s(t,["example"]);l!=null&&r(e,["example"],l);const u=s(t,["format"]);u!=null&&r(e,["format"],u);const d=s(t,["items"]);d!=null&&r(e,["items"],d);const c=s(t,["maxItems"]);c!=null&&r(e,["maxItems"],c);const f=s(t,["maxLength"]);f!=null&&r(e,["maxLength"],f);const h=s(t,["maxProperties"]);h!=null&&r(e,["maxProperties"],h);const p=s(t,["maximum"]);p!=null&&r(e,["maximum"],p);const m=s(t,["minItems"]);m!=null&&r(e,["minItems"],m);const g=s(t,["minLength"]);g!=null&&r(e,["minLength"],g);const v=s(t,["minProperties"]);v!=null&&r(e,["minProperties"],v);const E=s(t,["minimum"]);E!=null&&r(e,["minimum"],E);const x=s(t,["nullable"]);x!=null&&r(e,["nullable"],x);const b=s(t,["pattern"]);b!=null&&r(e,["pattern"],b);const A=s(t,["properties"]);A!=null&&r(e,["properties"],A);const P=s(t,["propertyOrdering"]);P!=null&&r(e,["propertyOrdering"],P);const w=s(t,["required"]);w!=null&&r(e,["required"],w);const $=s(t,["title"]);$!=null&&r(e,["title"],$);const V=s(t,["type"]);return V!=null&&r(e,["type"],V),e}function qu(t){const e={};if(s(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=s(t,["category"]);n!=null&&r(e,["category"],n);const i=s(t,["threshold"]);return i!=null&&r(e,["threshold"],i),e}function Bu(t){const e={},n=s(t,["behavior"]);n!=null&&r(e,["behavior"],n);const i=s(t,["description"]);i!=null&&r(e,["description"],i);const o=s(t,["name"]);o!=null&&r(e,["name"],o);const a=s(t,["parameters"]);a!=null&&r(e,["parameters"],a);const l=s(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const u=s(t,["response"]);u!=null&&r(e,["response"],u);const d=s(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function Ou(t){const e={},n=s(t,["startTime"]);n!=null&&r(e,["startTime"],n);const i=s(t,["endTime"]);return i!=null&&r(e,["endTime"],i),e}function Hu(t){const e={},n=s(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],Ou(n)),e}function Ju(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["dynamicThreshold"]);return i!=null&&r(e,["dynamicThreshold"],i),e}function Wu(t){const e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Ju(n)),e}function zu(){return{}}function Ku(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>Bu(d))),r(e,["functionDeclarations"],u)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(t,["googleSearch"]);i!=null&&r(e,["googleSearch"],Hu(i));const o=s(t,["googleSearchRetrieval"]);if(o!=null&&r(e,["googleSearchRetrieval"],Wu(o)),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(t,["urlContext"])!=null&&r(e,["urlContext"],zu());const l=s(t,["codeExecution"]);return l!=null&&r(e,["codeExecution"],l),e}function Zu(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["allowedFunctionNames"]);return i!=null&&r(e,["allowedFunctionNames"],i),e}function Yu(t){const e={},n=s(t,["latitude"]);n!=null&&r(e,["latitude"],n);const i=s(t,["longitude"]);return i!=null&&r(e,["longitude"],i),e}function Xu(t){const e={},n=s(t,["latLng"]);n!=null&&r(e,["latLng"],Yu(n));const i=s(t,["languageCode"]);return i!=null&&r(e,["languageCode"],i),e}function Qu(t){const e={},n=s(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],Zu(n));const i=s(t,["retrievalConfig"]);return i!=null&&r(e,["retrievalConfig"],Xu(i)),e}function ju(t){const e={},n=s(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function Ho(t){const e={},n=s(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],ju(n)),e}function ec(t){const e={},n=s(t,["speaker"]);n!=null&&r(e,["speaker"],n);const i=s(t,["voiceConfig"]);return i!=null&&r(e,["voiceConfig"],Ho(i)),e}function tc(t){const e={},n=s(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ec(o))),r(e,["speakerVoiceConfigs"],i)}return e}function nc(t){const e={},n=s(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],Ho(n));const i=s(t,["multiSpeakerVoiceConfig"]);i!=null&&r(e,["multiSpeakerVoiceConfig"],tc(i));const o=s(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function ic(t){const e={},n=s(t,["includeThoughts"]);n!=null&&r(e,["includeThoughts"],n);const i=s(t,["thinkingBudget"]);return i!=null&&r(e,["thinkingBudget"],i),e}function oc(t,e,n){const i={},o=s(e,["systemInstruction"]);n!==void 0&&o!=null&&r(n,["systemInstruction"],$t(J(o)));const a=s(e,["temperature"]);a!=null&&r(i,["temperature"],a);const l=s(e,["topP"]);l!=null&&r(i,["topP"],l);const u=s(e,["topK"]);u!=null&&r(i,["topK"],u);const d=s(e,["candidateCount"]);d!=null&&r(i,["candidateCount"],d);const c=s(e,["maxOutputTokens"]);c!=null&&r(i,["maxOutputTokens"],c);const f=s(e,["stopSequences"]);f!=null&&r(i,["stopSequences"],f);const h=s(e,["responseLogprobs"]);h!=null&&r(i,["responseLogprobs"],h);const p=s(e,["logprobs"]);p!=null&&r(i,["logprobs"],p);const m=s(e,["presencePenalty"]);m!=null&&r(i,["presencePenalty"],m);const g=s(e,["frequencyPenalty"]);g!=null&&r(i,["frequencyPenalty"],g);const v=s(e,["seed"]);v!=null&&r(i,["seed"],v);const E=s(e,["responseMimeType"]);E!=null&&r(i,["responseMimeType"],E);const x=s(e,["responseSchema"]);if(x!=null&&r(i,["responseSchema"],Gu(It(x))),s(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(s(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const b=s(e,["safetySettings"]);if(n!==void 0&&b!=null){let U=b;Array.isArray(U)&&(U=U.map(z=>qu(z))),r(n,["safetySettings"],U)}const A=s(e,["tools"]);if(n!==void 0&&A!=null){let U=ut(A);Array.isArray(U)&&(U=U.map(z=>Ku(lt(z)))),r(n,["tools"],U)}const P=s(e,["toolConfig"]);if(n!==void 0&&P!=null&&r(n,["toolConfig"],Qu(P)),s(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=s(e,["cachedContent"]);n!==void 0&&w!=null&&r(n,["cachedContent"],_e(t,w));const $=s(e,["responseModalities"]);$!=null&&r(i,["responseModalities"],$);const V=s(e,["mediaResolution"]);V!=null&&r(i,["mediaResolution"],V);const O=s(e,["speechConfig"]);if(O!=null&&r(i,["speechConfig"],nc(Do(O))),s(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=s(e,["thinkingConfig"]);return k!=null&&r(i,["thinkingConfig"],ic(k)),i}function Zi(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],F(t,i));const o=s(e,["contents"]);if(o!=null){let l=ee(o);Array.isArray(l)&&(l=l.map(u=>$t(u))),r(n,["contents"],l)}const a=s(e,["config"]);return a!=null&&r(n,["generationConfig"],oc(t,a,n)),n}function sc(t,e){const n={},i=s(t,["taskType"]);e!==void 0&&i!=null&&r(e,["requests[]","taskType"],i);const o=s(t,["title"]);e!==void 0&&o!=null&&r(e,["requests[]","title"],o);const a=s(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&r(e,["requests[]","outputDimensionality"],a),s(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(s(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function rc(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],F(t,i));const o=s(e,["contents"]);o!=null&&r(n,["requests[]","content"],Po(t,o));const a=s(e,["config"]);a!=null&&r(n,["config"],sc(a,n));const l=s(e,["model"]);return l!==void 0&&r(n,["requests[]","model"],F(t,l)),n}function ac(t,e){const n={};if(s(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=s(t,["numberOfImages"]);e!==void 0&&i!=null&&r(e,["parameters","sampleCount"],i);const o=s(t,["aspectRatio"]);e!==void 0&&o!=null&&r(e,["parameters","aspectRatio"],o);const a=s(t,["guidanceScale"]);if(e!==void 0&&a!=null&&r(e,["parameters","guidanceScale"],a),s(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=s(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&r(e,["parameters","safetySetting"],l);const u=s(t,["personGeneration"]);e!==void 0&&u!=null&&r(e,["parameters","personGeneration"],u);const d=s(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&r(e,["parameters","includeSafetyAttributes"],d);const c=s(t,["includeRaiReason"]);e!==void 0&&c!=null&&r(e,["parameters","includeRaiReason"],c);const f=s(t,["language"]);e!==void 0&&f!=null&&r(e,["parameters","language"],f);const h=s(t,["outputMimeType"]);e!==void 0&&h!=null&&r(e,["parameters","outputOptions","mimeType"],h);const p=s(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&r(e,["parameters","outputOptions","compressionQuality"],p),s(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(s(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function lc(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],F(t,i));const o=s(e,["prompt"]);o!=null&&r(n,["instances[0]","prompt"],o);const a=s(e,["config"]);return a!=null&&r(n,["config"],ac(a,n)),n}function uc(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","name"],F(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function cc(t,e,n){const i={},o=s(e,["pageSize"]);n!==void 0&&o!=null&&r(n,["_query","pageSize"],o);const a=s(e,["pageToken"]);n!==void 0&&a!=null&&r(n,["_query","pageToken"],a);const l=s(e,["filter"]);n!==void 0&&l!=null&&r(n,["_query","filter"],l);const u=s(e,["queryBase"]);return n!==void 0&&u!=null&&r(n,["_url","models_url"],$o(t,u)),i}function dc(t,e){const n={},i=s(e,["config"]);return i!=null&&r(n,["config"],cc(t,i,n)),n}function fc(t,e){const n={},i=s(t,["displayName"]);e!==void 0&&i!=null&&r(e,["displayName"],i);const o=s(t,["description"]);e!==void 0&&o!=null&&r(e,["description"],o);const a=s(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&r(e,["defaultCheckpointId"],a),n}function hc(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","name"],F(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],fc(o,n)),n}function pc(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","name"],F(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function mc(t){const e={};if(s(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(s(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(s(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function gc(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],F(t,i));const o=s(e,["contents"]);if(o!=null){let l=ee(o);Array.isArray(l)&&(l=l.map(u=>$t(u))),r(n,["contents"],l)}const a=s(e,["config"]);return a!=null&&r(n,["config"],mc(a)),n}function yc(t){const e={};if(s(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=s(t,["imageBytes"]);n!=null&&r(e,["bytesBase64Encoded"],fe(n));const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function vc(t,e){const n={},i=s(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&r(e,["parameters","sampleCount"],i),s(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(s(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=s(t,["durationSeconds"]);if(e!==void 0&&o!=null&&r(e,["parameters","durationSeconds"],o),s(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=s(t,["aspectRatio"]);if(e!==void 0&&a!=null&&r(e,["parameters","aspectRatio"],a),s(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const l=s(t,["personGeneration"]);if(e!==void 0&&l!=null&&r(e,["parameters","personGeneration"],l),s(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=s(t,["negativePrompt"]);e!==void 0&&u!=null&&r(e,["parameters","negativePrompt"],u);const d=s(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&r(e,["parameters","enhancePrompt"],d),s(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(s(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");return n}function Cc(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],F(t,i));const o=s(e,["prompt"]);o!=null&&r(n,["instances[0]","prompt"],o);const a=s(e,["image"]);if(a!=null&&r(n,["instances[0]","image"],yc(a)),s(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const l=s(e,["config"]);return l!=null&&r(n,["config"],vc(l,n)),n}function Tc(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function _c(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["data"]);i!=null&&r(e,["data"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Ec(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["fileUri"]);i!=null&&r(e,["fileUri"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Sc(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Tc(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],_c(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],Ec(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=s(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=s(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function Ke(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Sc(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function xc(t){const e={},n=s(t,["anyOf"]);n!=null&&r(e,["anyOf"],n);const i=s(t,["default"]);i!=null&&r(e,["default"],i);const o=s(t,["description"]);o!=null&&r(e,["description"],o);const a=s(t,["enum"]);a!=null&&r(e,["enum"],a);const l=s(t,["example"]);l!=null&&r(e,["example"],l);const u=s(t,["format"]);u!=null&&r(e,["format"],u);const d=s(t,["items"]);d!=null&&r(e,["items"],d);const c=s(t,["maxItems"]);c!=null&&r(e,["maxItems"],c);const f=s(t,["maxLength"]);f!=null&&r(e,["maxLength"],f);const h=s(t,["maxProperties"]);h!=null&&r(e,["maxProperties"],h);const p=s(t,["maximum"]);p!=null&&r(e,["maximum"],p);const m=s(t,["minItems"]);m!=null&&r(e,["minItems"],m);const g=s(t,["minLength"]);g!=null&&r(e,["minLength"],g);const v=s(t,["minProperties"]);v!=null&&r(e,["minProperties"],v);const E=s(t,["minimum"]);E!=null&&r(e,["minimum"],E);const x=s(t,["nullable"]);x!=null&&r(e,["nullable"],x);const b=s(t,["pattern"]);b!=null&&r(e,["pattern"],b);const A=s(t,["properties"]);A!=null&&r(e,["properties"],A);const P=s(t,["propertyOrdering"]);P!=null&&r(e,["propertyOrdering"],P);const w=s(t,["required"]);w!=null&&r(e,["required"],w);const $=s(t,["title"]);$!=null&&r(e,["title"],$);const V=s(t,["type"]);return V!=null&&r(e,["type"],V),e}function Ac(t){const e={},n=s(t,["featureSelectionPreference"]);return n!=null&&r(e,["featureSelectionPreference"],n),e}function Mc(t){const e={},n=s(t,["method"]);n!=null&&r(e,["method"],n);const i=s(t,["category"]);i!=null&&r(e,["category"],i);const o=s(t,["threshold"]);return o!=null&&r(e,["threshold"],o),e}function wc(t){const e={};if(s(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=s(t,["description"]);n!=null&&r(e,["description"],n);const i=s(t,["name"]);i!=null&&r(e,["name"],i);const o=s(t,["parameters"]);o!=null&&r(e,["parameters"],o);const a=s(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const l=s(t,["response"]);l!=null&&r(e,["response"],l);const u=s(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function Ic(t){const e={},n=s(t,["startTime"]);n!=null&&r(e,["startTime"],n);const i=s(t,["endTime"]);return i!=null&&r(e,["endTime"],i),e}function bc(t){const e={},n=s(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],Ic(n)),e}function kc(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["dynamicThreshold"]);return i!=null&&r(e,["dynamicThreshold"],i),e}function Rc(t){const e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],kc(n)),e}function Pc(){return{}}function Dc(t){const e={},n=s(t,["apiKeyString"]);return n!=null&&r(e,["apiKeyString"],n),e}function Nc(t){const e={},n=s(t,["apiKeyConfig"]);n!=null&&r(e,["apiKeyConfig"],Dc(n));const i=s(t,["authType"]);i!=null&&r(e,["authType"],i);const o=s(t,["googleServiceAccountConfig"]);o!=null&&r(e,["googleServiceAccountConfig"],o);const a=s(t,["httpBasicAuthConfig"]);a!=null&&r(e,["httpBasicAuthConfig"],a);const l=s(t,["oauthConfig"]);l!=null&&r(e,["oauthConfig"],l);const u=s(t,["oidcConfig"]);return u!=null&&r(e,["oidcConfig"],u),e}function Uc(t){const e={},n=s(t,["authConfig"]);return n!=null&&r(e,["authConfig"],Nc(n)),e}function $c(){return{}}function Jo(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>wc(h))),r(e,["functionDeclarations"],f)}const i=s(t,["retrieval"]);i!=null&&r(e,["retrieval"],i);const o=s(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],bc(o));const a=s(t,["googleSearchRetrieval"]);a!=null&&r(e,["googleSearchRetrieval"],Rc(a)),s(t,["enterpriseWebSearch"])!=null&&r(e,["enterpriseWebSearch"],Pc());const u=s(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],Uc(u)),s(t,["urlContext"])!=null&&r(e,["urlContext"],$c());const c=s(t,["codeExecution"]);return c!=null&&r(e,["codeExecution"],c),e}function Fc(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["allowedFunctionNames"]);return i!=null&&r(e,["allowedFunctionNames"],i),e}function Lc(t){const e={},n=s(t,["latitude"]);n!=null&&r(e,["latitude"],n);const i=s(t,["longitude"]);return i!=null&&r(e,["longitude"],i),e}function Vc(t){const e={},n=s(t,["latLng"]);n!=null&&r(e,["latLng"],Lc(n));const i=s(t,["languageCode"]);return i!=null&&r(e,["languageCode"],i),e}function Gc(t){const e={},n=s(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],Fc(n));const i=s(t,["retrievalConfig"]);return i!=null&&r(e,["retrievalConfig"],Vc(i)),e}function qc(t){const e={},n=s(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function Bc(t){const e={},n=s(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],qc(n)),e}function Oc(t){const e={},n=s(t,["voiceConfig"]);if(n!=null&&r(e,["voiceConfig"],Bc(n)),s(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=s(t,["languageCode"]);return i!=null&&r(e,["languageCode"],i),e}function Hc(t){const e={},n=s(t,["includeThoughts"]);n!=null&&r(e,["includeThoughts"],n);const i=s(t,["thinkingBudget"]);return i!=null&&r(e,["thinkingBudget"],i),e}function Jc(t,e,n){const i={},o=s(e,["systemInstruction"]);n!==void 0&&o!=null&&r(n,["systemInstruction"],Ke(J(o)));const a=s(e,["temperature"]);a!=null&&r(i,["temperature"],a);const l=s(e,["topP"]);l!=null&&r(i,["topP"],l);const u=s(e,["topK"]);u!=null&&r(i,["topK"],u);const d=s(e,["candidateCount"]);d!=null&&r(i,["candidateCount"],d);const c=s(e,["maxOutputTokens"]);c!=null&&r(i,["maxOutputTokens"],c);const f=s(e,["stopSequences"]);f!=null&&r(i,["stopSequences"],f);const h=s(e,["responseLogprobs"]);h!=null&&r(i,["responseLogprobs"],h);const p=s(e,["logprobs"]);p!=null&&r(i,["logprobs"],p);const m=s(e,["presencePenalty"]);m!=null&&r(i,["presencePenalty"],m);const g=s(e,["frequencyPenalty"]);g!=null&&r(i,["frequencyPenalty"],g);const v=s(e,["seed"]);v!=null&&r(i,["seed"],v);const E=s(e,["responseMimeType"]);E!=null&&r(i,["responseMimeType"],E);const x=s(e,["responseSchema"]);x!=null&&r(i,["responseSchema"],xc(It(x)));const b=s(e,["routingConfig"]);b!=null&&r(i,["routingConfig"],b);const A=s(e,["modelSelectionConfig"]);A!=null&&r(i,["modelConfig"],Ac(A));const P=s(e,["safetySettings"]);if(n!==void 0&&P!=null){let ne=P;Array.isArray(ne)&&(ne=ne.map(ct=>Mc(ct))),r(n,["safetySettings"],ne)}const w=s(e,["tools"]);if(n!==void 0&&w!=null){let ne=ut(w);Array.isArray(ne)&&(ne=ne.map(ct=>Jo(lt(ct)))),r(n,["tools"],ne)}const $=s(e,["toolConfig"]);n!==void 0&&$!=null&&r(n,["toolConfig"],Gc($));const V=s(e,["labels"]);n!==void 0&&V!=null&&r(n,["labels"],V);const O=s(e,["cachedContent"]);n!==void 0&&O!=null&&r(n,["cachedContent"],_e(t,O));const k=s(e,["responseModalities"]);k!=null&&r(i,["responseModalities"],k);const U=s(e,["mediaResolution"]);U!=null&&r(i,["mediaResolution"],U);const z=s(e,["speechConfig"]);z!=null&&r(i,["speechConfig"],Oc(Do(z)));const Vt=s(e,["audioTimestamp"]);Vt!=null&&r(i,["audioTimestamp"],Vt);const Gt=s(e,["thinkingConfig"]);return Gt!=null&&r(i,["thinkingConfig"],Hc(Gt)),i}function Yi(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],F(t,i));const o=s(e,["contents"]);if(o!=null){let l=ee(o);Array.isArray(l)&&(l=l.map(u=>Ke(u))),r(n,["contents"],l)}const a=s(e,["config"]);return a!=null&&r(n,["generationConfig"],Jc(t,a,n)),n}function Wc(t,e){const n={},i=s(t,["taskType"]);e!==void 0&&i!=null&&r(e,["instances[]","task_type"],i);const o=s(t,["title"]);e!==void 0&&o!=null&&r(e,["instances[]","title"],o);const a=s(t,["outputDimensionality"]);e!==void 0&&a!=null&&r(e,["parameters","outputDimensionality"],a);const l=s(t,["mimeType"]);e!==void 0&&l!=null&&r(e,["instances[]","mimeType"],l);const u=s(t,["autoTruncate"]);return e!==void 0&&u!=null&&r(e,["parameters","autoTruncate"],u),n}function zc(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],F(t,i));const o=s(e,["contents"]);o!=null&&r(n,["instances[]","content"],Po(t,o));const a=s(e,["config"]);return a!=null&&r(n,["config"],Wc(a,n)),n}function Kc(t,e){const n={},i=s(t,["outputGcsUri"]);e!==void 0&&i!=null&&r(e,["parameters","storageUri"],i);const o=s(t,["negativePrompt"]);e!==void 0&&o!=null&&r(e,["parameters","negativePrompt"],o);const a=s(t,["numberOfImages"]);e!==void 0&&a!=null&&r(e,["parameters","sampleCount"],a);const l=s(t,["aspectRatio"]);e!==void 0&&l!=null&&r(e,["parameters","aspectRatio"],l);const u=s(t,["guidanceScale"]);e!==void 0&&u!=null&&r(e,["parameters","guidanceScale"],u);const d=s(t,["seed"]);e!==void 0&&d!=null&&r(e,["parameters","seed"],d);const c=s(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&r(e,["parameters","safetySetting"],c);const f=s(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const h=s(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&r(e,["parameters","includeSafetyAttributes"],h);const p=s(t,["includeRaiReason"]);e!==void 0&&p!=null&&r(e,["parameters","includeRaiReason"],p);const m=s(t,["language"]);e!==void 0&&m!=null&&r(e,["parameters","language"],m);const g=s(t,["outputMimeType"]);e!==void 0&&g!=null&&r(e,["parameters","outputOptions","mimeType"],g);const v=s(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&r(e,["parameters","outputOptions","compressionQuality"],v);const E=s(t,["addWatermark"]);e!==void 0&&E!=null&&r(e,["parameters","addWatermark"],E);const x=s(t,["enhancePrompt"]);return e!==void 0&&x!=null&&r(e,["parameters","enhancePrompt"],x),n}function Zc(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],F(t,i));const o=s(e,["prompt"]);o!=null&&r(n,["instances[0]","prompt"],o);const a=s(e,["config"]);return a!=null&&r(n,["config"],Kc(a,n)),n}function Ft(t){const e={},n=s(t,["gcsUri"]);n!=null&&r(e,["gcsUri"],n);const i=s(t,["imageBytes"]);i!=null&&r(e,["bytesBase64Encoded"],fe(i));const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Yc(t){const e={},n=s(t,["maskMode"]);n!=null&&r(e,["maskMode"],n);const i=s(t,["segmentationClasses"]);i!=null&&r(e,["maskClasses"],i);const o=s(t,["maskDilation"]);return o!=null&&r(e,["dilation"],o),e}function Xc(t){const e={},n=s(t,["controlType"]);n!=null&&r(e,["controlType"],n);const i=s(t,["enableControlImageComputation"]);return i!=null&&r(e,["computeControl"],i),e}function Qc(t){const e={},n=s(t,["styleDescription"]);return n!=null&&r(e,["styleDescription"],n),e}function jc(t){const e={},n=s(t,["subjectType"]);n!=null&&r(e,["subjectType"],n);const i=s(t,["subjectDescription"]);return i!=null&&r(e,["subjectDescription"],i),e}function ed(t){const e={},n=s(t,["referenceImage"]);n!=null&&r(e,["referenceImage"],Ft(n));const i=s(t,["referenceId"]);i!=null&&r(e,["referenceId"],i);const o=s(t,["referenceType"]);o!=null&&r(e,["referenceType"],o);const a=s(t,["maskImageConfig"]);a!=null&&r(e,["maskImageConfig"],Yc(a));const l=s(t,["controlImageConfig"]);l!=null&&r(e,["controlImageConfig"],Xc(l));const u=s(t,["styleImageConfig"]);u!=null&&r(e,["styleImageConfig"],Qc(u));const d=s(t,["subjectImageConfig"]);return d!=null&&r(e,["subjectImageConfig"],jc(d)),e}function td(t,e){const n={},i=s(t,["outputGcsUri"]);e!==void 0&&i!=null&&r(e,["parameters","storageUri"],i);const o=s(t,["negativePrompt"]);e!==void 0&&o!=null&&r(e,["parameters","negativePrompt"],o);const a=s(t,["numberOfImages"]);e!==void 0&&a!=null&&r(e,["parameters","sampleCount"],a);const l=s(t,["aspectRatio"]);e!==void 0&&l!=null&&r(e,["parameters","aspectRatio"],l);const u=s(t,["guidanceScale"]);e!==void 0&&u!=null&&r(e,["parameters","guidanceScale"],u);const d=s(t,["seed"]);e!==void 0&&d!=null&&r(e,["parameters","seed"],d);const c=s(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&r(e,["parameters","safetySetting"],c);const f=s(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const h=s(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&r(e,["parameters","includeSafetyAttributes"],h);const p=s(t,["includeRaiReason"]);e!==void 0&&p!=null&&r(e,["parameters","includeRaiReason"],p);const m=s(t,["language"]);e!==void 0&&m!=null&&r(e,["parameters","language"],m);const g=s(t,["outputMimeType"]);e!==void 0&&g!=null&&r(e,["parameters","outputOptions","mimeType"],g);const v=s(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&r(e,["parameters","outputOptions","compressionQuality"],v);const E=s(t,["editMode"]);e!==void 0&&E!=null&&r(e,["parameters","editMode"],E);const x=s(t,["baseSteps"]);return e!==void 0&&x!=null&&r(e,["parameters","editConfig","baseSteps"],x),n}function nd(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],F(t,i));const o=s(e,["prompt"]);o!=null&&r(n,["instances[0]","prompt"],o);const a=s(e,["referenceImages"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>ed(d))),r(n,["instances[0]","referenceImages"],u)}const l=s(e,["config"]);return l!=null&&r(n,["config"],td(l,n)),n}function id(t,e){const n={},i=s(t,["includeRaiReason"]);e!==void 0&&i!=null&&r(e,["parameters","includeRaiReason"],i);const o=s(t,["outputMimeType"]);e!==void 0&&o!=null&&r(e,["parameters","outputOptions","mimeType"],o);const a=s(t,["outputCompressionQuality"]);e!==void 0&&a!=null&&r(e,["parameters","outputOptions","compressionQuality"],a);const l=s(t,["numberOfImages"]);e!==void 0&&l!=null&&r(e,["parameters","sampleCount"],l);const u=s(t,["mode"]);return e!==void 0&&u!=null&&r(e,["parameters","mode"],u),n}function od(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],F(t,i));const o=s(e,["image"]);o!=null&&r(n,["instances[0]","image"],Ft(o));const a=s(e,["upscaleFactor"]);a!=null&&r(n,["parameters","upscaleConfig","upscaleFactor"],a);const l=s(e,["config"]);return l!=null&&r(n,["config"],id(l,n)),n}function sd(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","name"],F(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function rd(t,e,n){const i={},o=s(e,["pageSize"]);n!==void 0&&o!=null&&r(n,["_query","pageSize"],o);const a=s(e,["pageToken"]);n!==void 0&&a!=null&&r(n,["_query","pageToken"],a);const l=s(e,["filter"]);n!==void 0&&l!=null&&r(n,["_query","filter"],l);const u=s(e,["queryBase"]);return n!==void 0&&u!=null&&r(n,["_url","models_url"],$o(t,u)),i}function ad(t,e){const n={},i=s(e,["config"]);return i!=null&&r(n,["config"],rd(t,i,n)),n}function ld(t,e){const n={},i=s(t,["displayName"]);e!==void 0&&i!=null&&r(e,["displayName"],i);const o=s(t,["description"]);e!==void 0&&o!=null&&r(e,["description"],o);const a=s(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&r(e,["defaultCheckpointId"],a),n}function ud(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],F(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],ld(o,n)),n}function cd(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","name"],F(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],o),n}function dd(t,e){const n={},i=s(t,["systemInstruction"]);e!==void 0&&i!=null&&r(e,["systemInstruction"],Ke(J(i)));const o=s(t,["tools"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Jo(u))),r(e,["tools"],l)}const a=s(t,["generationConfig"]);return e!==void 0&&a!=null&&r(e,["generationConfig"],a),n}function fd(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],F(t,i));const o=s(e,["contents"]);if(o!=null){let l=ee(o);Array.isArray(l)&&(l=l.map(u=>Ke(u))),r(n,["contents"],l)}const a=s(e,["config"]);return a!=null&&r(n,["config"],dd(a,n)),n}function hd(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],F(t,i));const o=s(e,["contents"]);if(o!=null){let l=ee(o);Array.isArray(l)&&(l=l.map(u=>Ke(u))),r(n,["contents"],l)}const a=s(e,["config"]);return a!=null&&r(n,["config"],a),n}function pd(t){const e={},n=s(t,["uri"]);n!=null&&r(e,["gcsUri"],n);const i=s(t,["videoBytes"]);i!=null&&r(e,["bytesBase64Encoded"],fe(i));const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function md(t,e){const n={},i=s(t,["numberOfVideos"]);e!==void 0&&i!=null&&r(e,["parameters","sampleCount"],i);const o=s(t,["outputGcsUri"]);e!==void 0&&o!=null&&r(e,["parameters","storageUri"],o);const a=s(t,["fps"]);e!==void 0&&a!=null&&r(e,["parameters","fps"],a);const l=s(t,["durationSeconds"]);e!==void 0&&l!=null&&r(e,["parameters","durationSeconds"],l);const u=s(t,["seed"]);e!==void 0&&u!=null&&r(e,["parameters","seed"],u);const d=s(t,["aspectRatio"]);e!==void 0&&d!=null&&r(e,["parameters","aspectRatio"],d);const c=s(t,["resolution"]);e!==void 0&&c!=null&&r(e,["parameters","resolution"],c);const f=s(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const h=s(t,["pubsubTopic"]);e!==void 0&&h!=null&&r(e,["parameters","pubsubTopic"],h);const p=s(t,["negativePrompt"]);e!==void 0&&p!=null&&r(e,["parameters","negativePrompt"],p);const m=s(t,["enhancePrompt"]);e!==void 0&&m!=null&&r(e,["parameters","enhancePrompt"],m);const g=s(t,["generateAudio"]);e!==void 0&&g!=null&&r(e,["parameters","generateAudio"],g);const v=s(t,["lastFrame"]);return e!==void 0&&v!=null&&r(e,["instances[0]","lastFrame"],Ft(v)),n}function gd(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["_url","model"],F(t,i));const o=s(e,["prompt"]);o!=null&&r(n,["instances[0]","prompt"],o);const a=s(e,["image"]);a!=null&&r(n,["instances[0]","image"],Ft(a));const l=s(e,["video"]);l!=null&&r(n,["instances[0]","video"],pd(l));const u=s(e,["config"]);return u!=null&&r(n,["config"],md(u,n)),n}function yd(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function vd(t){const e={},n=s(t,["data"]);n!=null&&r(e,["data"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function Cd(t){const e={},n=s(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function Td(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],yd(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],vd(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],Cd(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=s(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=s(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function _d(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Td(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function Ed(t){const e={},n=s(t,["citationSources"]);return n!=null&&r(e,["citations"],n),e}function Sd(t){const e={},n=s(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const i=s(t,["urlRetrievalStatus"]);return i!=null&&r(e,["urlRetrievalStatus"],i),e}function xd(t){const e={},n=s(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Sd(o))),r(e,["urlMetadata"],i)}return e}function Ad(t){const e={},n=s(t,["content"]);n!=null&&r(e,["content"],_d(n));const i=s(t,["citationMetadata"]);i!=null&&r(e,["citationMetadata"],Ed(i));const o=s(t,["tokenCount"]);o!=null&&r(e,["tokenCount"],o);const a=s(t,["finishReason"]);a!=null&&r(e,["finishReason"],a);const l=s(t,["urlContextMetadata"]);l!=null&&r(e,["urlContextMetadata"],xd(l));const u=s(t,["avgLogprobs"]);u!=null&&r(e,["avgLogprobs"],u);const d=s(t,["groundingMetadata"]);d!=null&&r(e,["groundingMetadata"],d);const c=s(t,["index"]);c!=null&&r(e,["index"],c);const f=s(t,["logprobsResult"]);f!=null&&r(e,["logprobsResult"],f);const h=s(t,["safetyRatings"]);return h!=null&&r(e,["safetyRatings"],h),e}function Xi(t){const e={},n=s(t,["candidates"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>Ad(u))),r(e,["candidates"],l)}const i=s(t,["modelVersion"]);i!=null&&r(e,["modelVersion"],i);const o=s(t,["promptFeedback"]);o!=null&&r(e,["promptFeedback"],o);const a=s(t,["usageMetadata"]);return a!=null&&r(e,["usageMetadata"],a),e}function Md(t){const e={},n=s(t,["values"]);return n!=null&&r(e,["values"],n),e}function wd(){return{}}function Id(t){const e={},n=s(t,["embeddings"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Md(a))),r(e,["embeddings"],o)}return s(t,["metadata"])!=null&&r(e,["metadata"],wd()),e}function bd(t){const e={},n=s(t,["bytesBase64Encoded"]);n!=null&&r(e,["imageBytes"],fe(n));const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function Wo(t){const e={},n=s(t,["safetyAttributes","categories"]);n!=null&&r(e,["categories"],n);const i=s(t,["safetyAttributes","scores"]);i!=null&&r(e,["scores"],i);const o=s(t,["contentType"]);return o!=null&&r(e,["contentType"],o),e}function kd(t){const e={},n=s(t,["_self"]);n!=null&&r(e,["image"],bd(n));const i=s(t,["raiFilteredReason"]);i!=null&&r(e,["raiFilteredReason"],i);const o=s(t,["_self"]);return o!=null&&r(e,["safetyAttributes"],Wo(o)),e}function Rd(t){const e={},n=s(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>kd(a))),r(e,["generatedImages"],o)}const i=s(t,["positivePromptSafetyAttributes"]);return i!=null&&r(e,["positivePromptSafetyAttributes"],Wo(i)),e}function Pd(t){const e={},n=s(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const i=s(t,["createTime"]);i!=null&&r(e,["createTime"],i);const o=s(t,["updateTime"]);return o!=null&&r(e,["updateTime"],o),e}function an(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["displayName"]);i!=null&&r(e,["displayName"],i);const o=s(t,["description"]);o!=null&&r(e,["description"],o);const a=s(t,["version"]);a!=null&&r(e,["version"],a);const l=s(t,["_self"]);l!=null&&r(e,["tunedModelInfo"],Pd(l));const u=s(t,["inputTokenLimit"]);u!=null&&r(e,["inputTokenLimit"],u);const d=s(t,["outputTokenLimit"]);d!=null&&r(e,["outputTokenLimit"],d);const c=s(t,["supportedGenerationMethods"]);return c!=null&&r(e,["supportedActions"],c),e}function Dd(t,e){const n={},i=s(e,["nextPageToken"]);i!=null&&r(n,["nextPageToken"],i);const o=s(e,["_self"]);if(o!=null){let a=Fo(o);Array.isArray(a)&&(a=a.map(l=>an(l))),r(n,["models"],a)}return n}function Nd(){return{}}function Ud(t){const e={},n=s(t,["totalTokens"]);n!=null&&r(e,["totalTokens"],n);const i=s(t,["cachedContentTokenCount"]);return i!=null&&r(e,["cachedContentTokenCount"],i),e}function $d(t){const e={},n=s(t,["video","uri"]);n!=null&&r(e,["uri"],n);const i=s(t,["video","encodedVideo"]);i!=null&&r(e,["videoBytes"],fe(i));const o=s(t,["encoding"]);return o!=null&&r(e,["mimeType"],o),e}function Fd(t){const e={},n=s(t,["_self"]);return n!=null&&r(e,["video"],$d(n)),e}function Ld(t){const e={},n=s(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Fd(l))),r(e,["generatedVideos"],a)}const i=s(t,["raiMediaFilteredCount"]);i!=null&&r(e,["raiMediaFilteredCount"],i);const o=s(t,["raiMediaFilteredReasons"]);return o!=null&&r(e,["raiMediaFilteredReasons"],o),e}function Vd(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["metadata"]);i!=null&&r(e,["metadata"],i);const o=s(t,["done"]);o!=null&&r(e,["done"],o);const a=s(t,["error"]);a!=null&&r(e,["error"],a);const l=s(t,["response","generateVideoResponse"]);return l!=null&&r(e,["response"],Ld(l)),e}function Gd(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function qd(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["data"]);i!=null&&r(e,["data"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Bd(t){const e={},n=s(t,["displayName"]);n!=null&&r(e,["displayName"],n);const i=s(t,["fileUri"]);i!=null&&r(e,["fileUri"],i);const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Od(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Gd(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],qd(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],Bd(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=s(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=s(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function Hd(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Od(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function Jd(t){const e={},n=s(t,["citations"]);return n!=null&&r(e,["citations"],n),e}function Wd(t){const e={},n=s(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const i=s(t,["urlRetrievalStatus"]);return i!=null&&r(e,["urlRetrievalStatus"],i),e}function zd(t){const e={},n=s(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Wd(o))),r(e,["urlMetadata"],i)}return e}function Kd(t){const e={},n=s(t,["content"]);n!=null&&r(e,["content"],Hd(n));const i=s(t,["citationMetadata"]);i!=null&&r(e,["citationMetadata"],Jd(i));const o=s(t,["finishMessage"]);o!=null&&r(e,["finishMessage"],o);const a=s(t,["finishReason"]);a!=null&&r(e,["finishReason"],a);const l=s(t,["urlContextMetadata"]);l!=null&&r(e,["urlContextMetadata"],zd(l));const u=s(t,["avgLogprobs"]);u!=null&&r(e,["avgLogprobs"],u);const d=s(t,["groundingMetadata"]);d!=null&&r(e,["groundingMetadata"],d);const c=s(t,["index"]);c!=null&&r(e,["index"],c);const f=s(t,["logprobsResult"]);f!=null&&r(e,["logprobsResult"],f);const h=s(t,["safetyRatings"]);return h!=null&&r(e,["safetyRatings"],h),e}function Qi(t){const e={},n=s(t,["candidates"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Kd(c))),r(e,["candidates"],d)}const i=s(t,["createTime"]);i!=null&&r(e,["createTime"],i);const o=s(t,["responseId"]);o!=null&&r(e,["responseId"],o);const a=s(t,["modelVersion"]);a!=null&&r(e,["modelVersion"],a);const l=s(t,["promptFeedback"]);l!=null&&r(e,["promptFeedback"],l);const u=s(t,["usageMetadata"]);return u!=null&&r(e,["usageMetadata"],u),e}function Zd(t){const e={},n=s(t,["truncated"]);n!=null&&r(e,["truncated"],n);const i=s(t,["token_count"]);return i!=null&&r(e,["tokenCount"],i),e}function Yd(t){const e={},n=s(t,["values"]);n!=null&&r(e,["values"],n);const i=s(t,["statistics"]);return i!=null&&r(e,["statistics"],Zd(i)),e}function Xd(t){const e={},n=s(t,["billableCharacterCount"]);return n!=null&&r(e,["billableCharacterCount"],n),e}function Qd(t){const e={},n=s(t,["predictions[]","embeddings"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Yd(a))),r(e,["embeddings"],o)}const i=s(t,["metadata"]);return i!=null&&r(e,["metadata"],Xd(i)),e}function jd(t){const e={},n=s(t,["gcsUri"]);n!=null&&r(e,["gcsUri"],n);const i=s(t,["bytesBase64Encoded"]);i!=null&&r(e,["imageBytes"],fe(i));const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function zo(t){const e={},n=s(t,["safetyAttributes","categories"]);n!=null&&r(e,["categories"],n);const i=s(t,["safetyAttributes","scores"]);i!=null&&r(e,["scores"],i);const o=s(t,["contentType"]);return o!=null&&r(e,["contentType"],o),e}function vn(t){const e={},n=s(t,["_self"]);n!=null&&r(e,["image"],jd(n));const i=s(t,["raiFilteredReason"]);i!=null&&r(e,["raiFilteredReason"],i);const o=s(t,["_self"]);o!=null&&r(e,["safetyAttributes"],zo(o));const a=s(t,["prompt"]);return a!=null&&r(e,["enhancedPrompt"],a),e}function ef(t){const e={},n=s(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>vn(a))),r(e,["generatedImages"],o)}const i=s(t,["positivePromptSafetyAttributes"]);return i!=null&&r(e,["positivePromptSafetyAttributes"],zo(i)),e}function tf(t){const e={},n=s(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>vn(o))),r(e,["generatedImages"],i)}return e}function nf(t){const e={},n=s(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>vn(o))),r(e,["generatedImages"],i)}return e}function of(t){const e={},n=s(t,["endpoint"]);n!=null&&r(e,["name"],n);const i=s(t,["deployedModelId"]);return i!=null&&r(e,["deployedModelId"],i),e}function sf(t){const e={},n=s(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&r(e,["baseModel"],n);const i=s(t,["createTime"]);i!=null&&r(e,["createTime"],i);const o=s(t,["updateTime"]);return o!=null&&r(e,["updateTime"],o),e}function rf(t){const e={},n=s(t,["checkpointId"]);n!=null&&r(e,["checkpointId"],n);const i=s(t,["epoch"]);i!=null&&r(e,["epoch"],i);const o=s(t,["step"]);return o!=null&&r(e,["step"],o),e}function ln(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["displayName"]);i!=null&&r(e,["displayName"],i);const o=s(t,["description"]);o!=null&&r(e,["description"],o);const a=s(t,["versionId"]);a!=null&&r(e,["version"],a);const l=s(t,["deployedModels"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>of(p))),r(e,["endpoints"],h)}const u=s(t,["labels"]);u!=null&&r(e,["labels"],u);const d=s(t,["_self"]);d!=null&&r(e,["tunedModelInfo"],sf(d));const c=s(t,["defaultCheckpointId"]);c!=null&&r(e,["defaultCheckpointId"],c);const f=s(t,["checkpoints"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(p=>rf(p))),r(e,["checkpoints"],h)}return e}function af(t,e){const n={},i=s(e,["nextPageToken"]);i!=null&&r(n,["nextPageToken"],i);const o=s(e,["_self"]);if(o!=null){let a=Fo(o);Array.isArray(a)&&(a=a.map(l=>ln(l))),r(n,["models"],a)}return n}function lf(){return{}}function uf(t){const e={},n=s(t,["totalTokens"]);return n!=null&&r(e,["totalTokens"],n),e}function cf(t){const e={},n=s(t,["tokensInfo"]);return n!=null&&r(e,["tokensInfo"],n),e}function df(t){const e={},n=s(t,["gcsUri"]);n!=null&&r(e,["uri"],n);const i=s(t,["bytesBase64Encoded"]);i!=null&&r(e,["videoBytes"],fe(i));const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function ff(t){const e={},n=s(t,["_self"]);return n!=null&&r(e,["video"],df(n)),e}function hf(t){const e={},n=s(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>ff(l))),r(e,["generatedVideos"],a)}const i=s(t,["raiMediaFilteredCount"]);i!=null&&r(e,["raiMediaFilteredCount"],i);const o=s(t,["raiMediaFilteredReasons"]);return o!=null&&r(e,["raiMediaFilteredReasons"],o),e}function pf(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["metadata"]);i!=null&&r(e,["metadata"],i);const o=s(t,["done"]);o!=null&&r(e,["done"],o);const a=s(t,["error"]);a!=null&&r(e,["error"],a);const l=s(t,["response"]);return l!=null&&r(e,["response"],hf(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mf="Content-Type",gf="X-Server-Timeout",yf="User-Agent",un="x-goog-api-client",vf="1.6.0",Cf=`google-genai-sdk/${vf}`,Tf="v1beta1",_f="v1beta",ji=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Ef{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Tf,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:_f,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,u]of Object.entries(e.queryParams))o.searchParams.append(l,String(u));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(n))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const o=new AbortController,a=o.signal;n.timeout&&(n==null?void 0:n.timeout)>0&&setTimeout(()=>o.abort(),n.timeout),i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=a}return n&&n.extraBody!==null&&Sf(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await eo(o),new nn(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await eo(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var n;return Le(this,arguments,function*(){const o=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let l="";for(;;){const{done:u,value:d}=yield L(o.read());if(u){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=a.decode(d);try{const h=JSON.parse(c);if("error"in h){const p=JSON.parse(JSON.stringify(h.error)),m=p.status,g=p.code,v=`got status: ${m}. ${JSON.stringify(h)}`;if(g>=400&&g<600)throw new Ut({message:v,status:g})}}catch(h){if(h.name==="ApiError")throw h}l+=c;let f=l.match(ji);for(;f;){const h=f[1];try{const p=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield L(new nn(p)),l=l.slice(f[0].length),f=l.match(ji)}catch(p){throw new Error(`exception parsing stream chunk ${h}. ${p}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=Cf+" "+this.clientOptions.userAgentExtra;return e[yf]=n,e[un]=n,e[mf]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))n.append(i,o);e.timeout&&e.timeout>0&&n.append(gf,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);o.sizeBytes=String(l.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;const d=await this.fetchUploadUrl(o,n);return a.upload(e,d,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let o={};n!=null&&n.httpOptions?o=n.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},l=await this.request({path:S("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:o});if(!l||!(l!=null&&l.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(i=l==null?void 0:l.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function eo(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new Ut({message:o,status:n}):new Error(o)}}function Sf(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,l){const u=Object.assign({},a);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const c=l[d],f=u[d];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?u[d]=i(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),u[d]=c)}return u}const o=i(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xf="mcp_used/unknown";function Ko(t){for(const e of t)if(Cn(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function Zo(t){var e;const n=(e=t[un])!==null&&e!==void 0?e:"";t[un]=(n+` ${xf}`).trimStart()}function Af(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>Cn(o)))!==null&&i!==void 0?i:!1}function Mf(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>!Cn(o)))!==null&&i!==void 0?i:!1}function Cn(t){return t!==null&&typeof t=="object"&&t instanceof Tn}function wf(t,e=100){return Le(this,arguments,function*(){let i,o=0;for(;o<e;){const a=yield L(t.listTools({cursor:i}));for(const l of a.tools)yield yield L(l),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class Tn{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Tn(e,n)}async initialize(){var e,n,i,o;if(this.mcpTools.length>0)return;const a={},l=[];for(const f of this.mcpClients)try{for(var u=!0,d=(n=void 0,tt(wf(f))),c;c=await d.next(),e=c.done,!e;u=!0){o=c.value,u=!1;const h=o;l.push(h);const p=h.name;if(a[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);a[p]=f}}catch(h){n={error:h}}finally{try{!u&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),Mr(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await o.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function If(t,e,n){const i=new hr;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data);const a=Uu(o);Object.assign(i,a),e(i)}class bf{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=Pf(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(A=>{c=A}),h=e.callbacks,p=function(){c({})},m=this.apiClient,g={onopen:p,onmessage:A=>{If(m,h.onmessage,A)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(A){},onclose:(i=h==null?void 0:h.onclose)!==null&&i!==void 0?i:function(A){}},v=this.webSocketFactory.create(d,Rf(l),g);v.connect(),await f;const E=F(this.apiClient,e.model),x=Bo({model:E}),b=rn({setup:x});return v.send(JSON.stringify(b)),new kf(v,this.apiClient)}}class kf{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Zl(e),i=Oo(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Yl(e),i=rn(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const n=rn({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ue.PLAY)}pause(){this.sendPlaybackControl(Ue.PAUSE)}stop(){this.sendPlaybackControl(Ue.STOP)}resetContext(){this.sendPlaybackControl(Ue.RESET_CONTEXT)}close(){this.conn.close()}}function Rf(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function Pf(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Df="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Nf(t,e,n){const i=new fr;let o;if(n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),t.isVertexAI()){const a=Mu(o);Object.assign(i,a)}else{const a=Au(o);Object.assign(i,a)}e(i)}class Uf{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new bf(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,o,a,l,u;const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const h=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&Ko(e.config.tools)&&Zo(h);const p=Vf(h);if(this.apiClient.isVertexAI())f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const k=this.apiClient.getApiKey();let U="BidiGenerateContent",z="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),U="BidiGenerateContentConstrained",z="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${U}?${z}=${k}`}let m=()=>{};const g=new Promise(k=>{m=k}),v=e.callbacks,E=function(){var k;(k=v==null?void 0:v.onopen)===null||k===void 0||k.call(v),m({})},x=this.apiClient,b={onopen:E,onmessage:k=>{Nf(x,v.onmessage,k)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(k){},onclose:(i=v==null?void 0:v.onclose)!==null&&i!==void 0?i:function(k){}},A=this.webSocketFactory.create(f,Lf(p),b);A.connect(),await g;let P=F(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const k=this.apiClient.getProject(),U=this.apiClient.getLocation();P=`projects/${k}/locations/${U}/`+P}let w={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Mt.AUDIO]}:e.config.responseModalities=[Mt.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const $=(u=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],V=[];for(const k of $)if(this.isCallableTool(k)){const U=k;V.push(await U.tool())}else V.push(k);V.length>0&&(e.config.tools=V);const O={model:P,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?w=Bl(this.apiClient,O):w=ql(this.apiClient,O),delete w.config,A.send(JSON.stringify(w)),new Ff(A,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const $f={turnComplete:!0};class Ff{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=ee(n.turns),e.isVertexAI()?i=i.map(o=>Ke(o)):i=i.map(o=>$t(o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(Df)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},$f),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Kl(e)}:n={realtimeInput:zl(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Lf(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function Vf(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const to=10;function no(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(yt(l)){o=!0;break}if(!o)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function yt(t){return"callTool"in t&&typeof t.callTool=="function"}function io(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gf extends ze{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,o,a,l,u;const d=await this.processParamsForMcpUsage(n);if(!Af(n)||no(n.config))return await this.generateContentInternal(d);if(Mf(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,f;const h=ee(d.contents),p=(a=(o=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:to;let m=0;for(;m<p&&(c=await this.generateContentInternal(d),!(!c.functionCalls||c.functionCalls.length===0));){const g=c.candidates[0].content,v=[];for(const E of(u=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(yt(E)){const b=await E.callTool(c.functionCalls);v.push(...b)}m++,f={role:"user",parts:v},d.contents=ee(d.contents),d.contents.push(g),d.contents.push(f),io(d.config)&&(h.push(g),h.push(f))}return io(d.config)&&(c.automaticFunctionCallingHistory=h),c},this.generateContentStream=async n=>{if(no(n.config)){const i=await this.processParamsForMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let a;const l=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((o=d==null?void 0:d.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=d==null?void 0:d.safetyAttributes:l.push(d);let u;return a?u={generatedImages:l,positivePromptSafetyAttributes:a}:u={generatedImages:l},u}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Nt(Je.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)}}async processParamsForMcpUsage(e){var n,i,o;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const l=await Promise.all(a.map(async d=>yt(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(u.config.tools=l,e.config&&e.config.tools&&Ko(e.config.tools)){const d=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Zo(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var n,i,o;const a=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(yt(l)){const u=l,d=await u.tool();for(const c of(o=d.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(a.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);a.set(c.name,u)}}return a}async processAfcStream(e){var n,i,o;const a=(o=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:to;let l=!1,u=0;const d=await this.initAfcToolsMap(e);return function(c,f,h){var p,m;return Le(this,arguments,function*(){for(var g,v,E,x;u<a;){l&&(u++,l=!1);const w=yield L(c.processParamsForMcpUsage(h)),$=yield L(c.generateContentStreamInternal(w)),V=[],O=[];try{for(var b=!0,A=(v=void 0,tt($)),P;P=yield L(A.next()),g=P.done,!g;b=!0){x=P.value,b=!1;const k=x;if(yield yield L(k),k.candidates&&(!((p=k.candidates[0])===null||p===void 0)&&p.content)){O.push(k.candidates[0].content);for(const U of(m=k.candidates[0].content.parts)!==null&&m!==void 0?m:[])if(u<a&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(U.functionCall.name)){const z=yield L(f.get(U.functionCall.name).callTool([U.functionCall]));V.push(...z)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(k){v={error:k}}finally{try{!b&&!g&&(E=A.return)&&(yield L(E.call(A)))}finally{if(v)throw v.error}}if(V.length>0){l=!0;const k=new Ye;k.candidates=[{content:{role:"user",parts:V}}],yield yield L(k);const U=[];U.push(...O),U.push({role:"user",parts:V});const z=ee(h.contents).concat(U);h.contents=z}else break}})}(this,d,e)}async generateContentInternal(e){var n,i,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Yi(this.apiClient,e);return u=S("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>{const h=Qi(f),p=new Ye;return Object.assign(p,h),p})}else{const c=Zi(this.apiClient,e);return u=S("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const h=Xi(f),p=new Ye;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,i,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Yi(this.apiClient,e);return u=S("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(h){return Le(this,arguments,function*(){var p,m,g,v;try{for(var E=!0,x=tt(h),b;b=yield L(x.next()),p=b.done,!p;E=!0){v=b.value,E=!1;const P=Qi(yield L(v.json())),w=new Ye;Object.assign(w,P),yield yield L(w)}}catch(A){m={error:A}}finally{try{!E&&!p&&(g=x.return)&&(yield L(g.call(x)))}finally{if(m)throw m.error}}})})}else{const c=Zi(this.apiClient,e);return u=S("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(h){return Le(this,arguments,function*(){var p,m,g,v;try{for(var E=!0,x=tt(h),b;b=yield L(x.next()),p=b.done,!p;E=!0){v=b.value,E=!1;const P=Xi(yield L(v.json())),w=new Ye;Object.assign(w,P),yield yield L(w)}}catch(A){m={error:A}}finally{try{!E&&!p&&(g=x.return)&&(yield L(g.call(x)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var n,i,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=zc(this.apiClient,e);return u=S("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>{const h=Qd(f),p=new bi;return Object.assign(p,h),p})}else{const c=rc(this.apiClient,e);return u=S("{model}:batchEmbedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const h=Id(f),p=new bi;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,i,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Zc(this.apiClient,e);return u=S("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>{const h=ef(f),p=new ki;return Object.assign(p,h),p})}else{const c=lc(this.apiClient,e);return u=S("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const h=Rd(f),p=new ki;return Object.assign(p,h),p})}}async editImageInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=nd(this.apiClient,e);return a=S("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const c=tf(d),f=new rr;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=od(this.apiClient,e);return a=S("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const c=nf(d),f=new ar;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=sd(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>ln(f))}else{const c=uc(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>an(f))}}async listInternal(e){var n,i,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=ad(this.apiClient,e);return u=S("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>{const h=af(this.apiClient,f),p=new Ri;return Object.assign(p,h),p})}else{const c=dc(this.apiClient,e);return u=S("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const h=Dd(this.apiClient,f),p=new Ri;return Object.assign(p,h),p})}}async update(e){var n,i,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=ud(this.apiClient,e);return u=S("{model}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>ln(f))}else{const c=hc(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>an(f))}}async delete(e){var n,i,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=cd(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(()=>{const f=lf(),h=new Pi;return Object.assign(h,f),h})}else{const c=pc(this.apiClient,e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(()=>{const f=Nd(),h=new Pi;return Object.assign(h,f),h})}}async countTokens(e){var n,i,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=fd(this.apiClient,e);return u=S("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>{const h=uf(f),p=new Di;return Object.assign(p,h),p})}else{const c=gc(this.apiClient,e);return u=S("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const h=Ud(f),p=new Di;return Object.assign(p,h),p})}}async computeTokens(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=hd(this.apiClient,e);return a=S("{model}:computeTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const c=cf(d),f=new lr;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,i,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=gd(this.apiClient,e);return u=S("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>pf(f))}else{const c=Cc(this.apiClient,e);return u=S("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>Vd(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qf(t){const e={},n=s(t,["operationName"]);n!=null&&r(e,["_url","operationName"],n);const i=s(t,["config"]);return i!=null&&r(e,["config"],i),e}function Bf(t){const e={},n=s(t,["operationName"]);n!=null&&r(e,["_url","operationName"],n);const i=s(t,["config"]);return i!=null&&r(e,["config"],i),e}function Of(t){const e={},n=s(t,["operationName"]);n!=null&&r(e,["operationName"],n);const i=s(t,["resourceName"]);i!=null&&r(e,["_url","resourceName"],i);const o=s(t,["config"]);return o!=null&&r(e,["config"],o),e}function Hf(t){const e={},n=s(t,["video","uri"]);n!=null&&r(e,["uri"],n);const i=s(t,["video","encodedVideo"]);i!=null&&r(e,["videoBytes"],fe(i));const o=s(t,["encoding"]);return o!=null&&r(e,["mimeType"],o),e}function Jf(t){const e={},n=s(t,["_self"]);return n!=null&&r(e,["video"],Hf(n)),e}function Wf(t){const e={},n=s(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Jf(l))),r(e,["generatedVideos"],a)}const i=s(t,["raiMediaFilteredCount"]);i!=null&&r(e,["raiMediaFilteredCount"],i);const o=s(t,["raiMediaFilteredReasons"]);return o!=null&&r(e,["raiMediaFilteredReasons"],o),e}function zf(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["metadata"]);i!=null&&r(e,["metadata"],i);const o=s(t,["done"]);o!=null&&r(e,["done"],o);const a=s(t,["error"]);a!=null&&r(e,["error"],a);const l=s(t,["response","generateVideoResponse"]);return l!=null&&r(e,["response"],Wf(l)),e}function Kf(t){const e={},n=s(t,["gcsUri"]);n!=null&&r(e,["uri"],n);const i=s(t,["bytesBase64Encoded"]);i!=null&&r(e,["videoBytes"],fe(i));const o=s(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Zf(t){const e={},n=s(t,["_self"]);return n!=null&&r(e,["video"],Kf(n)),e}function Yf(t){const e={},n=s(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Zf(l))),r(e,["generatedVideos"],a)}const i=s(t,["raiMediaFilteredCount"]);i!=null&&r(e,["raiMediaFilteredCount"],i);const o=s(t,["raiMediaFilteredReasons"]);return o!=null&&r(e,["raiMediaFilteredReasons"],o),e}function oo(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["metadata"]);i!=null&&r(e,["metadata"],i);const o=s(t,["done"]);o!=null&&r(e,["done"],o);const a=s(t,["error"]);a!=null&&r(e,["error"],a);const l=s(t,["response"]);return l!=null&&r(e,["response"],Yf(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xf extends ze{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let a;return i&&"httpOptions"in i&&(a=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:a}})}else return this.getVideosOperationInternal({operationName:n.name,config:i})}async getVideosOperationInternal(e){var n,i,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Bf(e);return u=S("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>oo(f))}else{const c=qf(e);return u=S("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>zf(f))}}async fetchPredictVideosOperationInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Of(e);return a=S("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>oo(d))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qf(t){const e={},n=s(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function Yo(t){const e={},n=s(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],Qf(n)),e}function jf(t){const e={},n=s(t,["speaker"]);n!=null&&r(e,["speaker"],n);const i=s(t,["voiceConfig"]);return i!=null&&r(e,["voiceConfig"],Yo(i)),e}function eh(t){const e={},n=s(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>jf(o))),r(e,["speakerVoiceConfigs"],i)}return e}function th(t){const e={},n=s(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],Yo(n));const i=s(t,["multiSpeakerVoiceConfig"]);i!=null&&r(e,["multiSpeakerVoiceConfig"],eh(i));const o=s(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function nh(t){const e={},n=s(t,["fps"]);n!=null&&r(e,["fps"],n);const i=s(t,["endOffset"]);i!=null&&r(e,["endOffset"],i);const o=s(t,["startOffset"]);return o!=null&&r(e,["startOffset"],o),e}function ih(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["data"]);n!=null&&r(e,["data"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function oh(t){const e={};if(s(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=s(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const i=s(t,["mimeType"]);return i!=null&&r(e,["mimeType"],i),e}function sh(t){const e={},n=s(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],nh(n));const i=s(t,["thought"]);i!=null&&r(e,["thought"],i);const o=s(t,["inlineData"]);o!=null&&r(e,["inlineData"],ih(o));const a=s(t,["fileData"]);a!=null&&r(e,["fileData"],oh(a));const l=s(t,["thoughtSignature"]);l!=null&&r(e,["thoughtSignature"],l);const u=s(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=s(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=s(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=s(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const h=s(t,["text"]);return h!=null&&r(e,["text"],h),e}function rh(t){const e={},n=s(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>sh(a))),r(e,["parts"],o)}const i=s(t,["role"]);return i!=null&&r(e,["role"],i),e}function ah(t){const e={},n=s(t,["behavior"]);n!=null&&r(e,["behavior"],n);const i=s(t,["description"]);i!=null&&r(e,["description"],i);const o=s(t,["name"]);o!=null&&r(e,["name"],o);const a=s(t,["parameters"]);a!=null&&r(e,["parameters"],a);const l=s(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const u=s(t,["response"]);u!=null&&r(e,["response"],u);const d=s(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function lh(t){const e={},n=s(t,["startTime"]);n!=null&&r(e,["startTime"],n);const i=s(t,["endTime"]);return i!=null&&r(e,["endTime"],i),e}function uh(t){const e={},n=s(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],lh(n)),e}function ch(t){const e={},n=s(t,["mode"]);n!=null&&r(e,["mode"],n);const i=s(t,["dynamicThreshold"]);return i!=null&&r(e,["dynamicThreshold"],i),e}function dh(t){const e={},n=s(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],ch(n)),e}function fh(){return{}}function hh(t){const e={},n=s(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>ah(d))),r(e,["functionDeclarations"],u)}if(s(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=s(t,["googleSearch"]);i!=null&&r(e,["googleSearch"],uh(i));const o=s(t,["googleSearchRetrieval"]);if(o!=null&&r(e,["googleSearchRetrieval"],dh(o)),s(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(s(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");s(t,["urlContext"])!=null&&r(e,["urlContext"],fh());const l=s(t,["codeExecution"]);return l!=null&&r(e,["codeExecution"],l),e}function ph(t){const e={},n=s(t,["handle"]);if(n!=null&&r(e,["handle"],n),s(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function so(){return{}}function mh(t){const e={},n=s(t,["disabled"]);n!=null&&r(e,["disabled"],n);const i=s(t,["startOfSpeechSensitivity"]);i!=null&&r(e,["startOfSpeechSensitivity"],i);const o=s(t,["endOfSpeechSensitivity"]);o!=null&&r(e,["endOfSpeechSensitivity"],o);const a=s(t,["prefixPaddingMs"]);a!=null&&r(e,["prefixPaddingMs"],a);const l=s(t,["silenceDurationMs"]);return l!=null&&r(e,["silenceDurationMs"],l),e}function gh(t){const e={},n=s(t,["automaticActivityDetection"]);n!=null&&r(e,["automaticActivityDetection"],mh(n));const i=s(t,["activityHandling"]);i!=null&&r(e,["activityHandling"],i);const o=s(t,["turnCoverage"]);return o!=null&&r(e,["turnCoverage"],o),e}function yh(t){const e={},n=s(t,["targetTokens"]);return n!=null&&r(e,["targetTokens"],n),e}function vh(t){const e={},n=s(t,["triggerTokens"]);n!=null&&r(e,["triggerTokens"],n);const i=s(t,["slidingWindow"]);return i!=null&&r(e,["slidingWindow"],yh(i)),e}function Ch(t){const e={},n=s(t,["proactiveAudio"]);return n!=null&&r(e,["proactiveAudio"],n),e}function Th(t,e){const n={},i=s(t,["generationConfig"]);e!==void 0&&i!=null&&r(e,["setup","generationConfig"],i);const o=s(t,["responseModalities"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig","responseModalities"],o);const a=s(t,["temperature"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","temperature"],a);const l=s(t,["topP"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","topP"],l);const u=s(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const d=s(t,["maxOutputTokens"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","maxOutputTokens"],d);const c=s(t,["mediaResolution"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","mediaResolution"],c);const f=s(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const h=s(t,["speechConfig"]);e!==void 0&&h!=null&&r(e,["setup","generationConfig","speechConfig"],th(yn(h)));const p=s(t,["enableAffectiveDialog"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],p);const m=s(t,["systemInstruction"]);e!==void 0&&m!=null&&r(e,["setup","systemInstruction"],rh(J(m)));const g=s(t,["tools"]);if(e!==void 0&&g!=null){let w=ut(g);Array.isArray(w)&&(w=w.map($=>hh(lt($)))),r(e,["setup","tools"],w)}const v=s(t,["sessionResumption"]);e!==void 0&&v!=null&&r(e,["setup","sessionResumption"],ph(v));const E=s(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&r(e,["setup","inputAudioTranscription"],so());const x=s(t,["outputAudioTranscription"]);e!==void 0&&x!=null&&r(e,["setup","outputAudioTranscription"],so());const b=s(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&r(e,["setup","realtimeInputConfig"],gh(b));const A=s(t,["contextWindowCompression"]);e!==void 0&&A!=null&&r(e,["setup","contextWindowCompression"],vh(A));const P=s(t,["proactivity"]);return e!==void 0&&P!=null&&r(e,["setup","proactivity"],Ch(P)),n}function _h(t,e){const n={},i=s(e,["model"]);i!=null&&r(n,["setup","model"],F(t,i));const o=s(e,["config"]);return o!=null&&r(n,["config"],Th(o,n)),n}function Eh(t,e,n){const i={},o=s(e,["expireTime"]);n!==void 0&&o!=null&&r(n,["expireTime"],o);const a=s(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&r(n,["newSessionExpireTime"],a);const l=s(e,["uses"]);n!==void 0&&l!=null&&r(n,["uses"],l);const u=s(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&r(n,["bidiGenerateContentSetup"],_h(t,u));const d=s(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&r(n,["fieldMask"],d),i}function Sh(t,e){const n={},i=s(e,["config"]);return i!=null&&r(n,["config"],Eh(t,i,n)),n}function xh(t){const e={},n=s(t,["name"]);return n!=null&&r(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ah(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${n}.${a}`);e.push(...o)}else e.push(n)}return e.join(",")}function Mh(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const a=Ah(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];o.length>0&&(u=o.map(c=>l.includes(c)?`generationConfig.${c}`:c));const d=[];a&&d.push(a),u.length>0&&d.push(...u),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class wh extends ze{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Sh(this.apiClient,e);a=S("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const d=Mh(u,e.config);return o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>xh(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ih(t){const e={},n=s(t,["name"]);n!=null&&r(e,["_url","name"],n);const i=s(t,["config"]);return i!=null&&r(e,["config"],i),e}function bh(t,e){const n={},i=s(t,["pageSize"]);e!==void 0&&i!=null&&r(e,["_query","pageSize"],i);const o=s(t,["pageToken"]);e!==void 0&&o!=null&&r(e,["_query","pageToken"],o);const a=s(t,["filter"]);return e!==void 0&&a!=null&&r(e,["_query","filter"],a),n}function kh(t){const e={},n=s(t,["config"]);return n!=null&&r(e,["config"],bh(n,e)),e}function Rh(t){const e={},n=s(t,["textInput"]);n!=null&&r(e,["textInput"],n);const i=s(t,["output"]);return i!=null&&r(e,["output"],i),e}function Ph(t){const e={};if(s(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=s(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Rh(o))),r(e,["examples","examples"],i)}return e}function Dh(t,e){const n={};if(s(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=s(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&r(e,["displayName"],i),s(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=s(t,["epochCount"]);e!==void 0&&o!=null&&r(e,["tuningTask","hyperparameters","epochCount"],o);const a=s(t,["learningRateMultiplier"]);if(a!=null&&r(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),s(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(s(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=s(t,["batchSize"]);e!==void 0&&l!=null&&r(e,["tuningTask","hyperparameters","batchSize"],l);const u=s(t,["learningRate"]);return e!==void 0&&u!=null&&r(e,["tuningTask","hyperparameters","learningRate"],u),n}function Nh(t){const e={},n=s(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const i=s(t,["trainingDataset"]);i!=null&&r(e,["tuningTask","trainingData"],Ph(i));const o=s(t,["config"]);return o!=null&&r(e,["config"],Dh(o,e)),e}function Uh(t){const e={},n=s(t,["name"]);n!=null&&r(e,["_url","name"],n);const i=s(t,["config"]);return i!=null&&r(e,["config"],i),e}function $h(t,e){const n={},i=s(t,["pageSize"]);e!==void 0&&i!=null&&r(e,["_query","pageSize"],i);const o=s(t,["pageToken"]);e!==void 0&&o!=null&&r(e,["_query","pageToken"],o);const a=s(t,["filter"]);return e!==void 0&&a!=null&&r(e,["_query","filter"],a),n}function Fh(t){const e={},n=s(t,["config"]);return n!=null&&r(e,["config"],$h(n,e)),e}function Lh(t,e){const n={},i=s(t,["gcsUri"]);if(e!==void 0&&i!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],i),s(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function Vh(t){const e={},n=s(t,["gcsUri"]);return n!=null&&r(e,["validationDatasetUri"],n),e}function Gh(t,e){const n={},i=s(t,["validationDataset"]);e!==void 0&&i!=null&&r(e,["supervisedTuningSpec"],Vh(i));const o=s(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&r(e,["tunedModelDisplayName"],o);const a=s(t,["description"]);e!==void 0&&a!=null&&r(e,["description"],a);const l=s(t,["epochCount"]);e!==void 0&&l!=null&&r(e,["supervisedTuningSpec","hyperParameters","epochCount"],l);const u=s(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&r(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const d=s(t,["exportLastCheckpointOnly"]);e!==void 0&&d!=null&&r(e,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const c=s(t,["adapterSize"]);if(e!==void 0&&c!=null&&r(e,["supervisedTuningSpec","hyperParameters","adapterSize"],c),s(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(s(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function qh(t){const e={},n=s(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const i=s(t,["trainingDataset"]);i!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],Lh(i,e));const o=s(t,["config"]);return o!=null&&r(e,["config"],Gh(o,e)),e}function Bh(t){const e={},n=s(t,["name"]);n!=null&&r(e,["model"],n);const i=s(t,["name"]);return i!=null&&r(e,["endpoint"],i),e}function Xo(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["state"]);i!=null&&r(e,["state"],No(i));const o=s(t,["createTime"]);o!=null&&r(e,["createTime"],o);const a=s(t,["tuningTask","startTime"]);a!=null&&r(e,["startTime"],a);const l=s(t,["tuningTask","completeTime"]);l!=null&&r(e,["endTime"],l);const u=s(t,["updateTime"]);u!=null&&r(e,["updateTime"],u);const d=s(t,["description"]);d!=null&&r(e,["description"],d);const c=s(t,["baseModel"]);c!=null&&r(e,["baseModel"],c);const f=s(t,["_self"]);f!=null&&r(e,["tunedModel"],Bh(f));const h=s(t,["distillationSpec"]);h!=null&&r(e,["distillationSpec"],h);const p=s(t,["experiment"]);p!=null&&r(e,["experiment"],p);const m=s(t,["labels"]);m!=null&&r(e,["labels"],m);const g=s(t,["pipelineJob"]);g!=null&&r(e,["pipelineJob"],g);const v=s(t,["serviceAccount"]);v!=null&&r(e,["serviceAccount"],v);const E=s(t,["tunedModelDisplayName"]);return E!=null&&r(e,["tunedModelDisplayName"],E),e}function Oh(t){const e={},n=s(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const i=s(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Xo(a))),r(e,["tuningJobs"],o)}return e}function Hh(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["metadata"]);i!=null&&r(e,["metadata"],i);const o=s(t,["done"]);o!=null&&r(e,["done"],o);const a=s(t,["error"]);return a!=null&&r(e,["error"],a),e}function Jh(t){const e={},n=s(t,["checkpointId"]);n!=null&&r(e,["checkpointId"],n);const i=s(t,["epoch"]);i!=null&&r(e,["epoch"],i);const o=s(t,["step"]);o!=null&&r(e,["step"],o);const a=s(t,["endpoint"]);return a!=null&&r(e,["endpoint"],a),e}function Wh(t){const e={},n=s(t,["model"]);n!=null&&r(e,["model"],n);const i=s(t,["endpoint"]);i!=null&&r(e,["endpoint"],i);const o=s(t,["checkpoints"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>Jh(l))),r(e,["checkpoints"],a)}return e}function cn(t){const e={},n=s(t,["name"]);n!=null&&r(e,["name"],n);const i=s(t,["state"]);i!=null&&r(e,["state"],No(i));const o=s(t,["createTime"]);o!=null&&r(e,["createTime"],o);const a=s(t,["startTime"]);a!=null&&r(e,["startTime"],a);const l=s(t,["endTime"]);l!=null&&r(e,["endTime"],l);const u=s(t,["updateTime"]);u!=null&&r(e,["updateTime"],u);const d=s(t,["error"]);d!=null&&r(e,["error"],d);const c=s(t,["description"]);c!=null&&r(e,["description"],c);const f=s(t,["baseModel"]);f!=null&&r(e,["baseModel"],f);const h=s(t,["tunedModel"]);h!=null&&r(e,["tunedModel"],Wh(h));const p=s(t,["supervisedTuningSpec"]);p!=null&&r(e,["supervisedTuningSpec"],p);const m=s(t,["tuningDataStats"]);m!=null&&r(e,["tuningDataStats"],m);const g=s(t,["encryptionSpec"]);g!=null&&r(e,["encryptionSpec"],g);const v=s(t,["partnerModelTuningSpec"]);v!=null&&r(e,["partnerModelTuningSpec"],v);const E=s(t,["distillationSpec"]);E!=null&&r(e,["distillationSpec"],E);const x=s(t,["experiment"]);x!=null&&r(e,["experiment"],x);const b=s(t,["labels"]);b!=null&&r(e,["labels"],b);const A=s(t,["pipelineJob"]);A!=null&&r(e,["pipelineJob"],A);const P=s(t,["serviceAccount"]);P!=null&&r(e,["serviceAccount"],P);const w=s(t,["tunedModelDisplayName"]);return w!=null&&r(e,["tunedModelDisplayName"],w),e}function zh(t){const e={},n=s(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const i=s(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>cn(a))),r(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kh extends ze{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Nt(Je.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const i=await this.tuneMldevInternal(n);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:tn.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Uh(e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>cn(f))}else{const c=Ih(e);return u=S("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>Xo(f))}}async listInternal(e){var n,i,o,a;let l,u="",d={};if(this.apiClient.isVertexAI()){const c=Fh(e);return u=S("tuningJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>{const h=zh(f),p=new Ni;return Object.assign(p,h),p})}else{const c=kh(e);return u=S("tunedModels",c._url),d=c._query,delete c.config,delete c._url,delete c._query,l=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),l.then(f=>{const h=Oh(f),p=new Ni;return Object.assign(p,h),p})}}async tuneInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=qh(e);return a=S("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>cn(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let o,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Nh(e);return a=S("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>Hh(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zh{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Yh=1024*1024*8,Xh=3,Qh=1e3,jh=2,Wt="x-goog-upload-status";async function ep(t,e,n){var i,o,a;let l=0,u=0,d=new nn(new Response),c="upload";for(l=t.size;u<l;){const h=Math.min(Yh,l-u),p=t.slice(u,u+h);u+h>=l&&(c+=", finalize");let m=0,g=Qh;for(;m<Xh&&(d=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[Wt]));)m++,await np(g),g=g*jh;if(u+=h,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[Wt])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(d==null?void 0:d.json());if(((a=d==null?void 0:d.headers)===null||a===void 0?void 0:a[Wt])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function tp(t){return{size:t.size,type:t.type}}function np(t){return new Promise(e=>setTimeout(e,t))}class ip{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ep(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tp(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class op{create(e,n,i){return new sp(e,n,i)}}class sp{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ro="x-goog-api-key";class rp{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(ro)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ro,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ap="gl-node/";class lp{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=sr(e,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new rp(this.apiKey);this.apiClient=new Ef({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:ap+"web",uploader:new ip,downloader:new Zh}),this.models=new Gf(this.apiClient),this.live=new Uf(this.apiClient,o,new op),this.chats=new Pa(this.models,this.apiClient),this.caches=new ba(this.apiClient),this.files=new Ja(this.apiClient),this.operations=new Xf(this.apiClient),this.authTokens=new wh(this.apiClient),this.tunings=new Kh(this.apiClient)}}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const $e=["Bossa Nova","Minimal Techno","Drum and Bass","Post Punk","Shoegaze","Funk","Chiptune","Lush Strings","Sparkling Arpeggios","Staccato Rhythms","Punchy Kick","Dubstep","K Pop","Neo Soul","Trip Hop","Thrash"],zt=["#9900ff","#5200ff","#ff25f6","#2af6de","#ffdd28","#3dffab","#d8ff3e","#d9b2ff"];/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */function ao(t){const e=atob(t),n=e.length,i=new Uint8Array(n);for(let o=0;o<n;o++)i[o]=e.charCodeAt(o);return i}async function up(t,e,n,i){const o=new Int16Array(t.buffer,t.byteOffset,t.byteLength/2),a=e.createBuffer(i,o.length/i,n),l=new Float32Array(o.length);for(let u=0;u<o.length;u++)l[u]=o[u]/32768;for(let u=0;u<i;u++){const d=new Float32Array(l.length/i);for(let c=0;c<d.length;c++)d[c]=l[c*i+u];a.copyToChannel(d,u)}return a}function ht(t,e,n){for(let i=0;i<n.length;i++)t.setUint8(e+i,n.charCodeAt(i))}function cp(t,e,n,i){const o=e*(i/8),a=n*o,l=t.byteLength,u=new ArrayBuffer(44+l),d=new DataView(u);return ht(d,0,"RIFF"),d.setUint32(4,36+l,!0),ht(d,8,"WAVE"),ht(d,12,"fmt "),d.setUint32(16,16,!0),d.setUint16(20,1,!0),d.setUint16(22,e,!0),d.setUint32(24,n,!0),d.setUint32(28,a,!0),d.setUint16(32,o,!0),d.setUint16(34,i,!0),ht(d,36,"data"),d.setUint32(40,l,!0),new Uint8Array(u,44).set(t),new Blob([d],{type:"audio/wav"})}function dp(t,e){const n=URL.createObjectURL(t),i=document.createElement("a");i.style.display="none",i.href=n,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)}function lo(t,e){let n=0;return(...i)=>{const o=Date.now();o-n>=e&&(t(...i),n=o)}}function dn(t){const e=zt.filter(n=>!t.includes(n));return e.length===0?zt[Math.floor(Math.random()*zt.length)]:e[Math.floor(Math.random()*e.length)]}var fp=Object.defineProperty,hp=Object.getOwnPropertyDescriptor,Lt=(t,e,n,i)=>{for(var o=i>1?void 0:i?hp(e,n):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(o=(i?l(e,n,o):l(o))||o);return i&&o&&fp(e,n,o),o};let We=class extends j{constructor(){super(),this.value=0,this.color="#000",this.dragStartPos=0,this.dragStartValue=0,this.containerBounds=null,this.handlePointerDown=this.handlePointerDown.bind(this),this.handlePointerMove=this.handlePointerMove.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handlePointerUp=this.handlePointerUp.bind(this)}handlePointerDown(t){t.preventDefault(),this.containerBounds=this.scrollContainer.getBoundingClientRect(),this.dragStartPos=t.clientY,this.dragStartValue=this.value,document.body.classList.add("dragging"),window.addEventListener("pointermove",this.handlePointerMove),window.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),window.addEventListener("pointerup",this.handlePointerUp,{once:!0}),this.updateValueFromPosition(t.clientY)}handlePointerMove(t){this.updateValueFromPosition(t.clientY)}handleTouchMove(t){t.preventDefault(),this.updateValueFromPosition(t.touches[0].clientY)}handlePointerUp(){window.removeEventListener("pointermove",this.handlePointerMove),window.removeEventListener("touchmove",this.handleTouchMove),document.body.classList.remove("dragging"),this.containerBounds=null}handleWheel(t){t.preventDefault();const e=t.deltaY;this.value=this.value+e*-.005,this.value=Math.max(0,Math.min(2,this.value)),this.dispatchInputEvent()}updateValueFromPosition(t){if(!this.containerBounds)return;const e=this.containerBounds.height,n=t-this.containerBounds.top,i=1-Math.max(0,Math.min(e,n))/e;this.value=i*2,this.dispatchInputEvent()}dispatchInputEvent(){this.dispatchEvent(new CustomEvent("input",{detail:this.value}))}render(){const t=this.value/2*100,e=Ao({height:`${t}%`,backgroundColor:this.color,display:this.value>.01?"block":"none"}),n=this.value.toFixed(2);return H`
      <div
        class="scroll-container"
        @pointerdown=${this.handlePointerDown}
        @wheel=${this.handleWheel}>
        <div class="slider-container">
          <div id="thumb" style=${e}></div>
        </div>
        <div class="value-display">${n}</div>
      </div>
    `}};We.styles=de`
    :host {
      cursor: ns-resize;
      position: relative;
      height: 100%;
      display: flex;
      justify-content: center;
      flex-direction: column;
      align-items: center;
      padding: 5px;
    }
    .scroll-container {
      width: 100%;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    .value-display {
      font-size: 1.3vmin;
      color: #ccc;
      margin: 0.5vmin 0;
      user-select: none;
      text-align: center;
    }
    .slider-container {
      position: relative;
      width: 10px;
      height: 100%;
      background-color: #0009;
      border-radius: 4px;
    }
    #thumb {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      border-radius: 4px;
      box-shadow: 0 0 3px rgba(0, 0, 0, 0.7);
    }
  `;Lt([B({type:Number})],We.prototype,"value",2);Lt([B({type:String})],We.prototype,"color",2);Lt([ke(".scroll-container")],We.prototype,"scrollContainer",2);We=Lt([X("weight-slider")],We);var pp=Object.defineProperty,mp=Object.getOwnPropertyDescriptor,he=(t,e,n,i)=>{for(var o=i>1?void 0:i?mp(e,n):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(o=(i?l(e,n,o):l(o))||o);return i&&o&&pp(e,n,o),o};let te=class extends j{constructor(){super(...arguments),this.promptId="",this.text="",this.weight=0,this.color="",this.filtered=!1,this.locked=!1}handleTextKeyDown(t){t.key==="Enter"&&(t.preventDefault(),this.updateText(),t.target.blur())}dispatchPromptChange(){this.dispatchEvent(new CustomEvent("prompt-changed",{detail:{promptId:this.promptId,text:this.text,weight:this.weight}}))}updateText(){var e;const t=(e=this.textInput.textContent)==null?void 0:e.trim();if(t!==this.text){if(t===""){this.textInput.textContent=this.text;return}this.text=t??"",this.dispatchPromptChange()}}updateWeight(){this.weight=this.weightInput.value,this.dispatchPromptChange()}dispatchPromptRemoved(){this.locked||this.dispatchEvent(new CustomEvent("prompt-removed",{detail:this.promptId,bubbles:!0,composed:!0}))}toggleLock(){this.locked=!this.locked,this.dispatchEvent(new CustomEvent("prompt-lock-toggled",{detail:{promptId:this.promptId,locked:this.locked},bubbles:!0,composed:!0}))}renderLockedIcon(){return Y`<svg viewBox="0 0 24 24" fill="currentColor"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2z"/></svg>`}renderUnlockedIcon(){return Y`<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"/></svg>`}render(){return H`<div class="prompt">
      <div class="action-buttons">
        <button 
          class="remove-button" 
          @click=${this.dispatchPromptRemoved} 
          aria-label="Remove prompt"
          title="Remove prompt"
          ?disabled=${this.locked}>
          ✕
        </button>
      </div>
      <weight-slider
        id="weight"
        .value=${this.weight}
        .color=${this.color}
        @input=${this.updateWeight}></weight-slider>
      <div class="controls">
        <span
          id="text"
          role="textbox"
          aria-multiline="true"
          spellcheck="false"
          contenteditable="plaintext-only"
          @keydown=${this.handleTextKeyDown}
          @blur=${this.updateText}
          >${this.text}</span>
        <button 
          class="lock-button" 
          @click=${this.toggleLock} 
          aria-label=${this.locked?"Unlock prompt":"Lock prompt"}
          title=${this.locked?"Unlock prompt":"Lock prompt"}>
          ${this.locked?this.renderLockedIcon():this.renderUnlockedIcon()}
        </button>
      </div>
    </div>`}};te.styles=de`
    .prompt {
      position: relative;
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-sizing: border-box;
      overflow: hidden;
      background-color: #2a2a2a;
      border-radius: 5px;
    }
    .action-buttons { /* Will now only contain the remove button */
      position: absolute;
      top: 1.2vmin;
      left: 1.2vmin;
      z-index: 10;
    }
    .remove-button {
      background: #666;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 2.8vmin;
      height: 2.8vmin;
      font-size: 1.5vmin;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.2s, background-color 0.2s;
      padding: 0;
    }
    .remove-button:hover {
      opacity: 1;
      background-color: #777;
    }
    .remove-button[disabled] {
      opacity: 0.3;
      cursor: not-allowed;
      background-color: #555;
    }
    
    /* Styles for the lock button, now part of .controls div */
    .lock-button {
      background: #666;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 2.8vmin;
      height: 2.8vmin;
      font-size: 1.5vmin; /* Adjusted for icon */
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.2s, background-color 0.2s;
      padding: 0;
      flex-shrink: 0; /* Prevent lock button from shrinking */
    }
    .lock-button:hover {
      opacity: 1;
      background-color: #777;
    }
    .lock-button svg {
      width: 60%;
      height: 60%;
    }

    weight-slider {
      max-height: calc(100% - 13.5vmin); /* Adjusted: 4.5vmin top margin + 9vmin (controls + its margin) */
      flex: 1;
      min-height: 10vmin;
      width: 100%;
      box-sizing: border-box;
      overflow: hidden;
      margin-top: 4.5vmin; /* Adjusted: space for remove button */
      margin-bottom: 0; /* No margin needed before .controls */
    }
    .controls {
      display: flex;
      flex-direction: row; /* Changed to row */
      align-items: center; /* Vertically align items */
      justify-content: space-between; /* Space between text and lock button */
      gap: 0.8vmin; /* Gap between text and lock button */
      width: 100%;
      height: 8vmin;
      padding: 0 1.2vmin; /* Adjusted padding */
      box-sizing: border-box;
      margin-bottom: 1vmin;
    }
    #text {
      font-family: 'Google Sans', sans-serif;
      font-size: 1.8vmin;
      flex-grow: 1; /* Allow text to take available space */
      height: auto; /* Adjust height based on content or line-height */
      max-height: 100%; /* Limit to parent's height */
      padding: 0.4vmin;
      box-sizing: border-box;
      text-align: center;
      word-wrap: break-word;
      overflow-y: auto;
      border: none;
      outline: none;
      -webkit-font-smoothing: antialiased;
      color: #fff;
      background-color: transparent;
      scrollbar-width: thin;
      scrollbar-color: #666 #1a1a1a;
    }
    #text::-webkit-scrollbar {
      width: 6px;
    }
    #text::-webkit-scrollbar-track {
      background: #0009;
      border-radius: 3px;
    }
    #text::-webkit-scrollbar-thumb {
      background-color: #666;
      border-radius: 3px;
    }
    :host([filtered='true']) .prompt {
      outline: 2px solid #da2000;
      outline-offset: -2px;
    }
  `;he([B({type:String,reflect:!0})],te.prototype,"promptId",2);he([B({type:String})],te.prototype,"text",2);he([B({type:Number})],te.prototype,"weight",2);he([B({type:String})],te.prototype,"color",2);he([B({type:Boolean,reflect:!0})],te.prototype,"filtered",2);he([B({type:Boolean,reflect:!0})],te.prototype,"locked",2);he([ke("weight-slider")],te.prototype,"weightInput",2);he([ke("#text")],te.prototype,"textInput",2);te=he([X("prompt-controller")],te);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const _n=Eo(class extends So{constructor(t){var e;if(super(t),t.type!==_o.ATTRIBUTE||t.name!=="class"||((e=t.strings)==null?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var i,o;if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(a=>a!=="")));for(const a in e)e[a]&&!((i=this.nt)!=null&&i.has(a))&&this.st.add(a);return this.render(e)}const n=t.element.classList;for(const a of this.st)a in e||(n.remove(a),this.st.delete(a));for(const a in e){const l=!!e[a];l===this.st.has(a)||(o=this.nt)!=null&&o.has(a)||(l?(n.add(a),this.st.add(a)):(n.remove(a),this.st.delete(a)))}return ve}});var gp=Object.defineProperty,yp=Object.getOwnPropertyDescriptor,Re=(t,e,n,i)=>{for(var o=i>1?void 0:i?yp(e,n):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(o=(i?l(e,n,o):l(o))||o);return i&&o&&gp(e,n,o),o};let ce=class extends j{constructor(){super(...arguments),this.defaultConfig={temperature:1.1,topK:40,guidance:4,echoMix:0,reverbMix:0,distortionEnabled:!1,distortionAmount:0,chorusEnabled:!1,chorusRate:1.5,chorusDepth:.3,chorusDelay:.025,chorusFeedback:0,echoUiEnabled:!1,echoUiDelayTime:.25,echoUiFeedback:.3,echoUiMix:0,reverbUiEnabled:!1,reverbUiDelayTime:.05,reverbUiDecay:.2,reverbUiMix:0,flangerEnabled:!1,flangerRate:.2,flangerDepth:.002,flangerDelay:.005,flangerFeedback:.5,eqEnabled:!1,eqType:"peaking",eqFrequency:800,eqQ:1,eqGain:0,compressorEnabled:!1,compressorThreshold:-24,compressorKnee:30,compressorRatio:12,compressorAttack:.003,compressorRelease:.25,phaserEnabled:!1,phaserRate:.5,phaserDepth:.5,phaserFeedback:.3,phaserStages:4,phaserBaseFrequency:700,tremoloEnabled:!1,tremoloRate:5,tremoloDepth:.5,stereoPhaseShiftAmount:0},this.showadvanced=!1,this.config={...this.defaultConfig},this.autoDensity=!0,this.lastDefinedDensity=.5,this.autoBrightness=!0,this.lastDefinedBrightness=.5}resetToDefaults(){this.config={...this.defaultConfig},this.autoDensity=!0,this.autoBrightness=!0,this.config.density=void 0,this.config.brightness=void 0,this.dispatchSettingsChange(),this.requestUpdate()}updateSliderBackground(t){if(t.type!=="range")return;const e=Number(t.min)||0,n=Number(t.max)||1,o=(Number(t.value)-e)/(n-e)*100;t.style.setProperty("--value-percent",`${o}%`)}handleInputChange(t){const e=t.target;let n=e.id,i;if(e instanceof HTMLInputElement)e.type==="number"?e.value===""?i=void 0:(i=e.valueAsNumber,isNaN(i)&&(i=void 0)):e.type==="range"?(i=e.valueAsNumber,this.updateSliderBackground(e)):e.type==="checkbox"?i=e.checked:i=e.value===""?void 0:e.value;else if(e instanceof HTMLSelectElement)e.id==="scale"?i=e.value===""?void 0:e.value:(e.id,i=e.value);else return;const o={...this.config};if(n==="auto-density")this.autoDensity=!!i,o.density=this.autoDensity?void 0:this.lastDefinedDensity??.5;else if(n==="auto-brightness")this.autoBrightness=!!i,o.brightness=this.autoBrightness?void 0:this.lastDefinedBrightness??.5;else if(n==="density"&&(typeof i=="number"||typeof i>"u"))o.density=i,typeof i=="number"&&(this.lastDefinedDensity=i);else if(n==="brightness"&&(typeof i=="number"||typeof i>"u"))o.brightness=i,typeof i=="number"&&(this.lastDefinedBrightness=i);else if(n==="seed")if(i===void 0||String(i).trim()==="")o.seed=void 0;else{const a=parseInt(String(i),10);o.seed=isNaN(a)?void 0:a}else if(n==="scale")o.scale=i;else if(n==="eqType")o.eqType=i;else if(n in o){const a=this.defaultConfig[n];if(typeof a=="boolean"||n.endsWith("Enabled")||n.endsWith("UiEnabled"))o[n]=!!i;else if(typeof a=="number"||n==="bpm"||n.endsWith("Amount")||n.endsWith("Rate")||n.endsWith("Depth")||n.endsWith("Delay")||n.endsWith("Feedback")||n==="eqFrequency"||n==="eqQ"||n==="eqGain"||n==="compressorThreshold"||n==="compressorKnee"||n==="compressorRatio"||n==="compressorAttack"||n==="compressorRelease"||n==="phaserStages"||n==="phaserBaseFrequency"||n.startsWith("echoUi")||n.startsWith("reverbUi")||n==="stereoPhaseShiftAmount"){let l;if(typeof i=="number")l=i;else if(typeof i=="string")if(i.trim()==="")l=void 0;else{const u=parseFloat(i);l=isNaN(u)?void 0:u}else l=void 0;o[n]=l,isNaN(o[n])&&(o[n]=void 0)}else o[n]=i}this.config=o,this.dispatchSettingsChange()}updated(t){var e;super.updated(t),(t.has("config")||t.has("autoDensity")||t.has("autoBrightness")||t.has("showadvanced"))&&((e=this.shadowRoot)==null||e.querySelectorAll('input[type="range"]').forEach(n=>{this.updateSliderBackground(n)}))}dispatchSettingsChange(){const t={...this.config};this.autoDensity&&(t.density=void 0),this.autoBrightness&&(t.brightness=void 0),this.dispatchEvent(new CustomEvent("settings-changed",{detail:t,bubbles:!0,composed:!0}))}toggleAdvancedSettings(){this.showadvanced=!this.showadvanced}render(){const t=this.config,e=_n({"advanced-settings":!0,visible:this.showadvanced}),n=new Map([["Auto",""],["C Major / A Minor",K.C_MAJOR_A_MINOR],["C# Major / A# Minor",K.D_FLAT_MAJOR_B_FLAT_MINOR],["D Major / B Minor",K.D_MAJOR_B_MINOR],["D# Major / C Minor",K.E_FLAT_MAJOR_C_MINOR],["E Major / C# Minor",K.E_MAJOR_D_FLAT_MINOR],["F Major / D Minor",K.F_MAJOR_D_MINOR],["F# Major / D# Minor",K.G_FLAT_MAJOR_E_FLAT_MINOR],["G Major / E Minor",K.G_MAJOR_E_MINOR],["G# Major / F Minor",K.A_FLAT_MAJOR_F_MINOR],["A Major / F# Minor",K.A_MAJOR_G_FLAT_MINOR],["A# Major / G Minor",K.B_FLAT_MAJOR_G_MINOR],["B Major / G# Minor",K.B_MAJOR_A_FLAT_MINOR]]),i=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch"],o={lowpass:"Low-pass",highpass:"High-pass",bandpass:"Band-pass",lowshelf:"Low-shelf",highshelf:"High-shelf",peaking:"Peaking",notch:"Notch",allpass:"All-pass (Phaser)"},a=(f,h,p,m,g,v,E,x=!1,b=2,A,P=!1,w)=>{const $=v??E,V=A?A($):$.toFixed(b),O=w;return H`
        <div class="setting">
          <label for=${f}>${h}<span>${V}</span></label>
          <input
            type="range"
            id=${f}
            min=${p}
            max=${m}
            step=${g}
            .value=${String($)}
            ?disabled=${x}
            @input=${this.handleInputChange} />
          ${P&&O?H`
            <div class="slider-ticks">
              ${O.map(k=>H`<span style="left: ${k.percent}%">${k.label}</span>`)}
            </div>
          `:""}
        </div>`},l=[{label:"0°",percent:0},{label:"90°",percent:25},{label:"180°",percent:50},{label:"270°",percent:75},{label:"360°",percent:100}],u=t.eqType??this.defaultConfig.eqType,d=["lowpass","highpass","bandpass","peaking","notch"].includes(u),c=["lowshelf","highshelf","peaking"].includes(u);return H`
      <div class="core-settings-row">
        ${a("temperature","Temperature",0,3,.1,t.temperature,this.defaultConfig.temperature,!1,1)}
        ${a("guidance","Guidance",0,6,.1,t.guidance,this.defaultConfig.guidance,!1,1)}
        ${a("topK","Top K",1,100,1,t.topK,this.defaultConfig.topK,!1,0)}
      </div>
      <hr class="divider" />
      <div class=${e}>
        <div class="setting">
          <label for="seed">Seed</label>
          <input
            type="text"
            id="seed"
            .value=${t.seed===void 0?"":String(t.seed)}
            @input=${this.handleInputChange}
            placeholder="Auto" />
        </div>
        <div class="setting">
          <label for="bpm">BPM</label>
          <input
            type="number"
            id="bpm"
            min="60"
            max="180"
            .value=${t.bpm===void 0?"":String(t.bpm)}
            @input=${this.handleInputChange}
            placeholder="Auto (60-180)" />
        </div>
        <div class="setting" auto=${this.autoDensity.toString()}>
          <label for="density">Density</label>
          <input
            type="range"
            id="density"
            min="0"
            max="1"
            step="0.05"
            .value=${String(this.autoDensity?this.lastDefinedDensity??.5:t.density??this.lastDefinedDensity??.5)}
            ?disabled=${this.autoDensity}
            @input=${this.handleInputChange} />
          <div class="auto-row">
            <input
              type="checkbox"
              id="auto-density"
              aria-labelledby="label-auto-density"
              .checked=${this.autoDensity}
              @input=${this.handleInputChange} />
            <label id="label-auto-density" for="auto-density">Auto</label>
            <span>${(this.autoDensity?this.lastDefinedDensity??.5:t.density??this.lastDefinedDensity??.5).toFixed(2)}</span>
          </div>
        </div>
        <div class="setting" auto=${this.autoBrightness.toString()}>
          <label for="brightness">Brightness</label>
          <input
            type="range"
            id="brightness"
            min="0"
            max="1"
            step="0.05"
            .value=${String(this.autoBrightness?this.lastDefinedBrightness??.5:t.brightness??this.lastDefinedBrightness??.5)}
            ?disabled=${this.autoBrightness}
            @input=${this.handleInputChange} />
          <div class="auto-row">
            <input
              type="checkbox"
              id="auto-brightness"
              aria-labelledby="label-auto-brightness"
              .checked=${this.autoBrightness}
              @input=${this.handleInputChange} />
            <label id="label-auto-brightness" for="auto-brightness">Auto</label>
            <span>${(this.autoBrightness?this.lastDefinedBrightness??.5:t.brightness??this.lastDefinedBrightness??.5).toFixed(2)}</span>
          </div>
        </div>
         ${a("echoMix","Echo Mix (Model)",0,1,.05,t.echoMix,this.defaultConfig.echoMix)}
         ${a("reverbMix","Reverb Mix (Model)",0,1,.05,t.reverbMix,this.defaultConfig.reverbMix)}
        <div class="setting">
          <label for="scale">Scale</label>
          <select
            id="scale"
            .value=${t.scale||""}
            @change=${this.handleInputChange}>
            ${[...n.entries()].map(([f,h])=>H`<option .value=${h} ?selected=${t.scale===h||h===""&&!t.scale}>${f}</option>`)}
          </select>
        </div>
        <div class="setting">
          <div class="checkbox-setting">
            <input type="checkbox" id="muteBass" .checked=${!!t.muteBass} @change=${this.handleInputChange} />
            <label for="muteBass">Mute Bass</label>
          </div>
          <div class="checkbox-setting">
            <input type="checkbox" id="muteDrums" .checked=${!!t.muteDrums} @change=${this.handleInputChange} />
            <label for="muteDrums">Mute Drums</label>
          </div>
          <div class="checkbox-setting">
            <input type="checkbox" id="onlyBassAndDrums" .checked=${!!t.onlyBassAndDrums} @change=${this.handleInputChange} />
            <label for="onlyBassAndDrums">Only Bass & Drums</label>
          </div>
        </div>

        <!-- Distortion Effect Group -->
        <div class="effect-group" ?disabled=${!(t.distortionEnabled??this.defaultConfig.distortionEnabled)}>
            <h4>
                <input type="checkbox" id="distortionEnabled" .checked=${!!(t.distortionEnabled??this.defaultConfig.distortionEnabled)} @input=${this.handleInputChange}>
                Distortion
            </h4>
            ${a("distortionAmount","Amount",0,1,.01,t.distortionAmount,this.defaultConfig.distortionAmount,!(t.distortionEnabled??this.defaultConfig.distortionEnabled))}
        </div>

        <!-- Chorus Effect Group -->
        <div class="effect-group" ?disabled=${!(t.chorusEnabled??this.defaultConfig.chorusEnabled)}>
            <h4>
                <input type="checkbox" id="chorusEnabled" .checked=${!!(t.chorusEnabled??this.defaultConfig.chorusEnabled)} @input=${this.handleInputChange}>
                Chorus
            </h4>
            ${a("chorusRate","Rate (Hz)",.1,10,.1,t.chorusRate,this.defaultConfig.chorusRate,!(t.chorusEnabled??this.defaultConfig.chorusEnabled),1)}
            ${a("chorusDepth","Depth",0,1,.01,t.chorusDepth,this.defaultConfig.chorusDepth,!(t.chorusEnabled??this.defaultConfig.chorusEnabled))}
            ${a("chorusDelay","Delay (s)",.001,.05,.001,t.chorusDelay,this.defaultConfig.chorusDelay,!(t.chorusEnabled??this.defaultConfig.chorusEnabled),3)}
            ${a("chorusFeedback","Feedback",0,.95,.01,t.chorusFeedback,this.defaultConfig.chorusFeedback,!(t.chorusEnabled??this.defaultConfig.chorusEnabled))}
        </div>

        <!-- UI Echo Effect Group -->
        <div class="effect-group" ?disabled=${!(t.echoUiEnabled??this.defaultConfig.echoUiEnabled)}>
            <h4>
                <input type="checkbox" id="echoUiEnabled" .checked=${!!(t.echoUiEnabled??this.defaultConfig.echoUiEnabled)} @input=${this.handleInputChange}>
                Echo (UI)
            </h4>
            ${a("echoUiDelayTime","Delay (s)",.01,1,.01,t.echoUiDelayTime,this.defaultConfig.echoUiDelayTime,!(t.echoUiEnabled??this.defaultConfig.echoUiEnabled),2)}
            ${a("echoUiFeedback","Feedback",0,.95,.01,t.echoUiFeedback,this.defaultConfig.echoUiFeedback,!(t.echoUiEnabled??this.defaultConfig.echoUiEnabled),2)}
            ${a("echoUiMix","Mix",0,1,.01,t.echoUiMix,this.defaultConfig.echoUiMix,!(t.echoUiEnabled??this.defaultConfig.echoUiEnabled),2)}
        </div>

        <!-- UI Reverb Effect Group -->
        <div class="effect-group" ?disabled=${!(t.reverbUiEnabled??this.defaultConfig.reverbUiEnabled)}>
            <h4>
                <input type="checkbox" id="reverbUiEnabled" .checked=${!!(t.reverbUiEnabled??this.defaultConfig.reverbUiEnabled)} @input=${this.handleInputChange}>
                Reverb (UI)
            </h4>
            ${a("reverbUiDelayTime","Pre-Delay (s)",.001,.2,.001,t.reverbUiDelayTime,this.defaultConfig.reverbUiDelayTime,!(t.reverbUiEnabled??this.defaultConfig.reverbUiEnabled),3)}
            ${a("reverbUiDecay","Decay",0,.95,.01,t.reverbUiDecay,this.defaultConfig.reverbUiDecay,!(t.reverbUiEnabled??this.defaultConfig.reverbUiEnabled),2)}
            ${a("reverbUiMix","Mix",0,1,.01,t.reverbUiMix,this.defaultConfig.reverbUiMix,!(t.reverbUiEnabled??this.defaultConfig.reverbUiEnabled),2)}
        </div>

        <!-- Flanger Effect Group -->
        <div class="effect-group" ?disabled=${!(t.flangerEnabled??this.defaultConfig.flangerEnabled)}>
            <h4>
                <input type="checkbox" id="flangerEnabled" .checked=${!!(t.flangerEnabled??this.defaultConfig.flangerEnabled)} @input=${this.handleInputChange}>
                Flanger
            </h4>
            ${a("flangerRate","Rate (Hz)",.05,5,.05,t.flangerRate,this.defaultConfig.flangerRate,!(t.flangerEnabled??this.defaultConfig.flangerEnabled),2)}
            ${a("flangerDepth","Depth (mod s)",5e-4,.005,1e-4,t.flangerDepth,this.defaultConfig.flangerDepth,!(t.flangerEnabled??this.defaultConfig.flangerEnabled),4)}
            ${a("flangerDelay","Delay (s)",.001,.01,5e-4,t.flangerDelay,this.defaultConfig.flangerDelay,!(t.flangerEnabled??this.defaultConfig.flangerEnabled),4)}
            ${a("flangerFeedback","Feedback",0,.95,.01,t.flangerFeedback,this.defaultConfig.flangerFeedback,!(t.flangerEnabled??this.defaultConfig.flangerEnabled))}
        </div>

        <!-- EQ Effect Group -->
        <div class="effect-group" ?disabled=${!(t.eqEnabled??this.defaultConfig.eqEnabled)}>
            <h4>
                <input type="checkbox" id="eqEnabled" .checked=${!!(t.eqEnabled??this.defaultConfig.eqEnabled)} @input=${this.handleInputChange}>
                Filter / EQ
            </h4>
            <div class="setting">
                <label for="eqType">Type</label>
                <select id="eqType" .value=${u} @change=${this.handleInputChange} ?disabled=${!(t.eqEnabled??this.defaultConfig.eqEnabled)}>
                    ${i.map(f=>H`<option value=${f} ?selected=${f===u}>${o[f]}</option>`)}
                </select>
            </div>
            ${a("eqFrequency","Frequency (Hz)",20,2e4,1,t.eqFrequency,this.defaultConfig.eqFrequency,!(t.eqEnabled??this.defaultConfig.eqEnabled),0)}
            ${d?a("eqQ","Q Factor",1e-4,100,1e-4,t.eqQ,this.defaultConfig.eqQ,!(t.eqEnabled??this.defaultConfig.eqEnabled),4):""}
            ${c?a("eqGain","Gain (dB)",-40,40,.1,t.eqGain,this.defaultConfig.eqGain,!(t.eqEnabled??this.defaultConfig.eqEnabled),1):""}
        </div>

        <!-- Compressor Effect Group -->
        <div class="effect-group" ?disabled=${!(t.compressorEnabled??this.defaultConfig.compressorEnabled)}>
            <h4>
                <input type="checkbox" id="compressorEnabled" .checked=${!!(t.compressorEnabled??this.defaultConfig.compressorEnabled)} @input=${this.handleInputChange}>
                Compressor
            </h4>
            ${a("compressorThreshold","Threshold (dB)",-100,0,1,t.compressorThreshold,this.defaultConfig.compressorThreshold,!(t.compressorEnabled??this.defaultConfig.compressorEnabled),0)}
            ${a("compressorKnee","Knee (dB)",0,40,1,t.compressorKnee,this.defaultConfig.compressorKnee,!(t.compressorEnabled??this.defaultConfig.compressorEnabled),0)}
            ${a("compressorRatio","Ratio",1,20,1,t.compressorRatio,this.defaultConfig.compressorRatio,!(t.compressorEnabled??this.defaultConfig.compressorEnabled),0)}
            ${a("compressorAttack","Attack (s)",0,1,.001,t.compressorAttack,this.defaultConfig.compressorAttack,!(t.compressorEnabled??this.defaultConfig.compressorEnabled),3)}
            ${a("compressorRelease","Release (s)",0,1,.001,t.compressorRelease,this.defaultConfig.compressorRelease,!(t.compressorEnabled??this.defaultConfig.compressorEnabled),3)}
        </div>

        <!-- Phaser Effect Group -->
        <div class="effect-group" ?disabled=${!(t.phaserEnabled??this.defaultConfig.phaserEnabled)}>
            <h4>
                <input type="checkbox" id="phaserEnabled" .checked=${!!(t.phaserEnabled??this.defaultConfig.phaserEnabled)} @input=${this.handleInputChange}>
                Phaser
            </h4>
            ${a("phaserRate","Rate (Hz)",.05,10,.05,t.phaserRate,this.defaultConfig.phaserRate,!(t.phaserEnabled??this.defaultConfig.phaserEnabled),2)}
            ${a("phaserDepth","Depth",0,1,.01,t.phaserDepth,this.defaultConfig.phaserDepth,!(t.phaserEnabled??this.defaultConfig.phaserEnabled))}
            ${a("phaserFeedback","Feedback",0,.95,.01,t.phaserFeedback,this.defaultConfig.phaserFeedback,!(t.phaserEnabled??this.defaultConfig.phaserEnabled))}
            ${a("phaserStages","Stages",2,12,1,t.phaserStages,this.defaultConfig.phaserStages,!(t.phaserEnabled??this.defaultConfig.phaserEnabled),0)}
            ${a("phaserBaseFrequency","Base Freq (Hz)",300,3e3,50,t.phaserBaseFrequency,this.defaultConfig.phaserBaseFrequency,!(t.phaserEnabled??this.defaultConfig.phaserEnabled),0)}
        </div>

        <!-- Tremolo Effect Group -->
        <div class="effect-group" ?disabled=${!(t.tremoloEnabled??this.defaultConfig.tremoloEnabled)}>
            <h4>
                <input type="checkbox" id="tremoloEnabled" .checked=${!!(t.tremoloEnabled??this.defaultConfig.tremoloEnabled)} @input=${this.handleInputChange}>
                Tremolo
            </h4>
            ${a("tremoloRate","Rate (Hz)",.1,20,.1,t.tremoloRate,this.defaultConfig.tremoloRate,!(t.tremoloEnabled??this.defaultConfig.tremoloEnabled),1)}
            ${a("tremoloDepth","Depth",0,1,.01,t.tremoloDepth,this.defaultConfig.tremoloDepth,!(t.tremoloEnabled??this.defaultConfig.tremoloEnabled))}
        </div>

        <!-- General/Utility Effects Section -->
        <div class="general-effects-section">
            ${a("stereoPhaseShiftAmount","Phase Shift (R Ch.)",0,1,.01,t.stereoPhaseShiftAmount,this.defaultConfig.stereoPhaseShiftAmount,!1,2,f=>`${(f*360).toFixed(0)}°`,!0,l)}
        </div>

      </div>
      <div class="advanced-toggle" @click=${this.toggleAdvancedSettings} role="button" tabindex="0"
           @keydown=${f=>f.key==="Enter"||f.key===" "?this.toggleAdvancedSettings():null}
           aria-expanded=${this.showadvanced.toString()}>
        ${this.showadvanced?"Hide":"Show"} Advanced Settings
      </div>
    `}};ce.styles=de`
    :host {
      display: block;
      padding: 2vmin;
      background-color: #2a2a2a;
      color: #eee;
      box-sizing: border-box;
      border-radius: 5px;
      font-family: 'Google Sans', sans-serif;
      font-size: 1.5vmin;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: #666 #1a1a1a;
      transition: width 0.3s ease-out max-height 0.3s ease-out; /* Added max-height */
      max-height: 15vmin; /* Default max-height for compact view */
    }
    :host([showadvanced]) {
      max-height: 90vh; /* Increased max-height further */
    }
    :host::-webkit-scrollbar {
      width: 6px;
    }
    :host::-webkit-scrollbar-track {
      background: #1a1a1a;
      border-radius: 3px;
    }
    :host::-webkit-scrollbar-thumb {
      background-color: #666;
      border-radius: 3px;
    }
    .setting {
      margin-bottom: 0.5vmin;
      display: flex;
      flex-direction: column;
      gap: 0.5vmin;
    }
    label {
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
      white-space: nowrap;
      user-select: none;
    }
    label span:last-child {
      font-weight: normal;
      color: #ccc;
      min-width: 3em; /* Ensure space for value display */
      text-align: right;
    }
    input[type='range'] {
      --track-height: 8px;
      --track-bg: #0009;
      --track-border-radius: 4px;
      --thumb-size: 16px;
      --thumb-bg: #5200ff; /* Main interactive color */
      --thumb-border-radius: 50%;
      --thumb-box-shadow: 0 0 3px rgba(0, 0, 0, 0.7);
      --value-percent: 0%; /* Dynamic property for gradient fill */

      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: var(--track-height);
      background: transparent; /* Track background handled by ::-webkit-slider-runnable-track */
      cursor: pointer;
      margin: 0.5vmin 0;
      border: none;
      padding: 0;
      vertical-align: middle; /* Align with labels if needed */
    }

    /* Webkit/Blink specific track styling */
    input[type='range']::-webkit-slider-runnable-track {
      width: 100%;
      height: var(--track-height);
      cursor: pointer;
      border: none; /* Remove default border */
      background: linear-gradient(
        to right,
        var(--thumb-bg) var(--value-percent),
        var(--track-bg) var(--value-percent)
      );
      border-radius: var(--track-border-radius);
    }

    /* Mozilla specific track styling */
    input[type='range']::-moz-range-track {
      width: 100%;
      height: var(--track-height);
      cursor: pointer;
      background: var(--track-bg); /* Solid background, gradient fill not directly supported on track for FF like Webkit */
      border-radius: var(--track-border-radius);
      border: none;
    }
    /* Mozilla specific progress fill (lower part) - for a similar effect to webkit gradient */
    input[type='range']::-moz-range-progress {
        background-color: var(--thumb-bg);
        height: var(--track-height);
        border-radius: var(--track-border-radius);
    }


    /* Thumb styling for Webkit/Blink */
    input[type='range']::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      height: var(--thumb-size);
      width: var(--thumb-size);
      background: var(--thumb-bg);
      border-radius: var(--thumb-border-radius);
      box-shadow: var(--thumb-box-shadow);
      cursor: pointer;
      margin-top: calc((var(--thumb-size) - var(--track-height)) / -2); /* Center thumb on track */
    }

    /* Thumb styling for Mozilla */
    input[type='range']::-moz-range-thumb {
      height: var(--thumb-size);
      width: var(--thumb-size);
      background: var(--thumb-bg);
      border-radius: var(--thumb-border-radius);
      box-shadow: var(--thumb-box-shadow);
      cursor: pointer;
      border: none; /* Remove default border */
    }

    input[type='number'],
    input[type='text'],
    select {
      background-color: #2a2a2a; /* Match host background */
      color: #eee;
      border: 1px solid #666;
      border-radius: 3px;
      padding: 0.4vmin;
      font-size: 1.5vmin;
      font-family: inherit;
      box-sizing: border-box;
    }
    input[type='number'] {
      width: 6em;
    }
    input[type='text'] { /* Seed input */
      width: 100%; /* Take full width of its setting block */
    }
    input[type='text']::placeholder {
        color: #888;
    }
    input[type='number']:focus,
    input[type='text']:focus,
    select:focus {
      outline: none;
      border-color: #5200ff; /* Highlight color */
      box-shadow: 0 0 0 2px rgba(82, 0, 255, 0.3);
    }
    select {
      width: 100%; /* Take full width */
    }
    select option {
        background-color: #2a2a2a;
        color: #eee;
    }
    .checkbox-setting {
        flex-direction: row;
        align-items: center;
        gap: 1vmin;
    }
    .checkbox-setting label { /* Label next to checkbox */
        font-weight: normal;
        cursor: pointer;
    }
    input[type='checkbox'] {
        cursor: pointer;
        accent-color: #5200ff; /* Main interactive color */
        width: 1.8vmin;
        height: 1.8vmin;
        margin-right: 0.5vmin;
    }

    /* Layout for core settings */
    .core-settings-row {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap; /* Allow wrapping on smaller viewports */
        gap: 4vmin; /* Space between core settings */
        margin-bottom: 1vmin;
        justify-content: space-evenly; /* Distribute items */
    }
    .core-settings-row .setting {
        min-width: 16vmin; /* Minimum width for each core setting */
    }
    .core-settings-row label span:last-child {
        min-width: 2.5em; /* Slightly less min-width for value if needed */
    }


    /* Advanced Settings Toggle */
    .advanced-toggle {
      cursor: pointer;
      margin: 2vmin 0 1vmin 0;
      color: #aaa;
      text-decoration: underline;
      user-select: none;
      font-size: 1.4vmin;
      width: fit-content; /* Only take space needed for text */
    }
    .advanced-toggle:hover {
        color: #eee;
    }

    /* Advanced Settings Area */
    .advanced-settings {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(22vmin, 1fr)); /* Responsive columns */
      gap: 2vmin 3vmin; /* Row and column gap */
      overflow: hidden;
      max-height: 0;
      opacity: 0;
      transition:
        max-height 0.7s ease-out, /* Slower transition for more content */
        opacity 0.7s ease-out;
    }
    .advanced-settings.visible {
      max-width: 100%;
      max-height: 300vmin; /* Increased max-height further to accommodate ticks */
      opacity: 1;
    }

    hr.divider {
      display: none; /* Hidden by default, shown when advanced settings are visible */
      border: none;
      border-top: 1px solid #666; /* Subtle divider */
      margin: 2vmin 0;
      width: 100%;
    }
    :host([showadvanced]) hr.divider {
        display: block;
    }

    .auto-row {
      display: flex;
      align-items: center;
      gap: 0.5vmin; /* Space between checkbox and "Auto" label */
    }
    .setting[auto='true'] input[type='range'] {
      pointer-events: none; /* Disable slider when auto is checked */
      filter: grayscale(100%); /* Visually indicate disabled state */
    }
    .auto-row span { /* Value display for auto sliders */
      margin-left: auto; /* Push value to the right */
    }
    .auto-row label { /* "Auto" label */
      cursor: pointer; /* Indicate clickable */
    }
    .auto-row input[type='checkbox'] {
      cursor: pointer;
      margin: 0; /* Remove default margin */
    }

    .effect-group {
        border: 1px solid #444;
        border-radius: 4px;
        padding: 1.5vmin;
        margin-top: 1vmin; /* Add some space above each group */
        display: flex;
        flex-direction: column;
        gap: 1vmin; /* Space between settings within a group */
    }
    .effect-group h4 {
        margin: 0 0 0.5vmin 0;
        font-size: 1.6vmin;
        color: #ccc;
        font-weight: bold;
        display: flex; /* For aligning checkbox with title */
        align-items: center;
    }
    .effect-group h4 input[type="checkbox"] {
        margin-right: 1vmin; /* Space between checkbox and title text */
    }
    .effect-group .setting {
      margin-bottom: 0.5vmin; /* Space between settings within an effect group */
    }
    .effect-group .setting:last-child {
      margin-bottom: 0;
    }
    /* Disable sliders if effect is disabled */
    .effect-group[disabled] input[type='range'],
    .effect-group[disabled] select {
        pointer-events: none;
        filter: grayscale(80%) opacity(0.6);
    }
    .effect-group[disabled] label {
        color: #777;
    }
    .effect-group[disabled] label span:last-child {
        color: #777;
    }

    .general-effects-section { 
        grid-column: 1 / -1; 
        margin-top: 1vmin;
        padding-top: 1vmin;
    }
    .general-effects-section .setting {
      margin-bottom: 2vmin; /* Add more margin below slider to make space for ticks */
    }
    .slider-ticks {
      position: relative;
      height: 1.5vmin;
      margin-top: 0.2vmin; /* Position ticks closer to the slider */
      margin-left: calc(var(--thumb-size) / 2); /* Align ticks with slider track start */
      margin-right: calc(var(--thumb-size) / 2); /* Align ticks with slider track end */
      box-sizing: border-box;
    }
    .slider-ticks span {
      position: absolute;
      bottom: 0;
      transform: translateX(-50%);
      font-size: 1.4vmin; /* Increased font size */
      font-weight: bold; /* Added bold font weight */
      color: #bbb; /* Slightly brighter color for ticks */
      white-space: nowrap;
    }
    .slider-ticks span::before {
      content: '';
      position: absolute;
      bottom: calc(100% + 0.2vmin); /* Position tick line above the text */
      left: 50%;
      transform: translateX(-50%);
      width: 1px;
      height: 0.8vmin; /* Increased tick height */
      background-color: #999; /* Brighter tick line */
    }
  `;Re([B({type:Boolean,reflect:!0})],ce.prototype,"showadvanced",2);Re([Te()],ce.prototype,"config",2);Re([Te()],ce.prototype,"autoDensity",2);Re([Te()],ce.prototype,"lastDefinedDensity",2);Re([Te()],ce.prototype,"autoBrightness",2);Re([Te()],ce.prototype,"lastDefinedBrightness",2);ce=Re([X("settings-controller")],ce);var vp=Object.defineProperty,Cp=Object.getOwnPropertyDescriptor,En=(t,e,n,i)=>{for(var o=i>1?void 0:i?Cp(e,n):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(o=(i?l(e,n,o):l(o))||o);return i&&o&&vp(e,n,o),o};let rt=class extends j{constructor(){super(...arguments),this.message="",this.showing=!1}render(){return H`<div class=${_n({showing:this.showing,toast:!0})} role="alert" aria-live="assertive">
      <div class="message">${this.message}</div>
      <button @click=${this.hide} aria-label="Dismiss message">✕</button>
    </div>`}show(t,e=4e3){this.message=t,this.showing=!0,this.timeoutId&&clearTimeout(this.timeoutId),e>0&&(this.timeoutId=window.setTimeout(()=>this.hide(),e))}hide(){this.showing=!1,this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)}};rt.styles=de`
    .toast {
      line-height: 1.6;
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #000;
      color: white;
      padding: 15px;
      border-radius: 5px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 15px;
      min-width: 200px;
      max-width: 80vw;
      transition: transform 0.5s cubic-bezier(0.19, 1, 0.22, 1);
      z-index: 1100; /* Ensure toast is above other elements including modal backdrop */
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }
    button {
      border-radius: 100px;
      width: 24px;
      height: 24px;
      border: none;
      background-color: #333;
      color: #fff;
      cursor: pointer;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
      padding:0;
    }
    button:hover {
      background-color: #555;
    }
    .toast:not(.showing) {
      transition-duration: 1s;
      transform: translate(-50%, -200%);
    }
  `;En([B({type:String})],rt.prototype,"message",2);En([B({type:Boolean})],rt.prototype,"showing",2);rt=En([X("toast-message")],rt);/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const Sn=class Sn extends j{renderIcon(){return Y``}renderSVG(){return H` <svg
      width="140"
      height="140"
      viewBox="0 -10 140 150"
      fill="none"
      xmlns="http://www.w3.org/2000/svg">
      <rect
        x="22"
        y="6"
        width="96"
        height="96"
        rx="48"
        fill="black"
        fill-opacity="0.05" />
      <rect
        x="23.5"
        y="7.5"
        width="93"
        height="93"
        rx="46.5"
        stroke="black"
        stroke-opacity="0.3"
        stroke-width="3" />
      <g filter="url(#filter0_ddi_1048_7373)">
        <rect
          x="25"
          y="9"
          width="90"
          height="90"
          rx="45"
          fill="white"
          fill-opacity="0.05"
          shape-rendering="crispEdges" />
      </g>
      ${this.renderIcon()}
      <defs>
        <filter
          id="filter0_ddi_1048_7373"
          x="0"
          y="0"
          width="140"
          height="140"
          filterUnits="userSpaceOnUse"
          color-interpolation-filters="sRGB">
          <feFlood flood-opacity="0" result="BackgroundImageFix" />
          <feColorMatrix
            in="SourceAlpha"
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
            result="hardAlpha" />
          <feOffset dy="2" />
          <feGaussianBlur stdDeviation="4" />
          <feComposite in2="hardAlpha" operator="out" />
          <feColorMatrix
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
          <feBlend
            mode="normal"
            in2="BackgroundImageFix"
            result="effect1_dropShadow_1048_7373" />
          <feColorMatrix
            in="SourceAlpha"
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
            result="hardAlpha" />
          <feOffset dy="16" />
          <feGaussianBlur stdDeviation="12.5" />
          <feComposite in2="hardAlpha" operator="out" />
          <feColorMatrix
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
          <feBlend
            mode="normal"
            in2="effect1_dropShadow_1048_7373"
            result="effect2_dropShadow_1048_7373" />
          <feBlend
            mode="normal"
            in="SourceGraphic"
            in2="effect2_dropShadow_1048_7373"
            result="shape" />
          <feColorMatrix
            in="SourceAlpha"
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
            result="hardAlpha" />
          <feOffset dy="3" />
          <feGaussianBlur stdDeviation="1.5" />
          <feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1" />
          <feColorMatrix
            type="matrix"
            values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.05 0" />
          <feBlend
            mode="normal"
            in2="shape"
            result="effect3_innerShadow_1048_7373" />
        </filter>
      </defs>
    </svg>`}render(){return H`${this.renderSVG()}<div class="hitbox"></div>`}};Sn.styles=de`
    :host {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none; /* Pointer events handled by hitbox */
    }
    :host(:hover) svg {
      transform: scale(1.2);
    }
    svg {
      width: 100%;
      height: 100%;
      transition: transform 0.5s cubic-bezier(0.25, 1.56, 0.32, 0.99);
    }
    .hitbox {
      pointer-events: all;
      position: absolute;
      width: 65%; /* Effective clickable area */
      aspect-ratio: 1;
      top: 9%; /* Position hitbox over the visual button part */
      border-radius: 50%;
      cursor: pointer;
      /* For debugging hitbox: outline: 1px solid red; */
    }
  `;let ae=Sn;var Tp=Object.defineProperty,_p=Object.getOwnPropertyDescriptor,Qo=(t,e,n,i)=>{for(var o=i>1?void 0:i?_p(e,n):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(o=(i?l(e,n,o):l(o))||o);return i&&o&&Tp(e,n,o),o};let bt=class extends ae{constructor(){super(...arguments),this.playbackState="stopped"}renderPause(){return Y`<path
      d="M75.0037 69V39H83.7537V69H75.0037ZM56.2537 69V39H65.0037V69H56.2537Z"
      fill="#FEFEFE"
    />`}renderPlay(){return Y`<path d="M60 71.5V36.5L87.5 54L60 71.5Z" fill="#FEFEFE" />`}renderLoading(){return Y`<path shape-rendering="crispEdges" class="loader" d="M70,74.2L70,74.2c-10.7,0-19.5-8.7-19.5-19.5l0,0c0-10.7,8.7-19.5,19.5-19.5
            l0,0c10.7,0,19.5,8.7,19.5,19.5l0,0"/>`}renderIcon(){return this.playbackState==="playing"?this.renderPause():this.playbackState==="loading"?this.renderLoading():this.renderPlay()}};bt.styles=[ae.styles,de`
      .loader {
        stroke: #ffffff;
        stroke-width: 3;
        stroke-linecap: round;
        animation: spin linear 1s infinite;
        transform-origin: center;
        transform-box: fill-box;
      }
      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(359deg);
        }
      }
    `];Qo([B({type:String})],bt.prototype,"playbackState",2);bt=Qo([X("play-pause-button")],bt);var Ep=Object.defineProperty,Sp=Object.getOwnPropertyDescriptor,jo=(t,e,n,i)=>{for(var o=i>1?void 0:i?Sp(e,n):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(o=(i?l(e,n,o):l(o))||o);return i&&o&&Ep(e,n,o),o};let kt=class extends ae{constructor(){super(...arguments),this.recording=!1}renderRecordIcon(){return Y`<circle cx="70" cy="54" r="18" fill="#E74C3C" />`}renderStopIcon(){return Y`<rect x="56" y="40" width="28" height="28" rx="3" fill="#E74C3C" />`}renderIcon(){return this.recording?this.renderStopIcon():this.renderRecordIcon()}};kt.styles=[ae.styles,de`
      :host([recording]) svg {
        animation: pulseRecord 1.2s infinite ease-in-out;
        /* Ensure the animation origin is center for the SVG element itself */
        transform-origin: center; 
        transform-box: fill-box;
      }
      @keyframes pulseRecord {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05); /* Slightly larger pulse */
        }
        100% {
          transform: scale(1);
        }
      }
    `];jo([B({type:Boolean,reflect:!0})],kt.prototype,"recording",2);kt=jo([X("record-button")],kt);var xp=Object.getOwnPropertyDescriptor,Ap=(t,e,n,i)=>{for(var o=i>1?void 0:i?xp(e,n):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(o=l(o)||o);return o};let uo=class extends ae{renderResetIcon(){return Y`<path fill="#fefefe" d="M71,77.1c-2.9,0-5.7-0.6-8.3-1.7s-4.8-2.6-6.7-4.5c-1.9-1.9-3.4-4.1-4.5-6.7c-1.1-2.6-1.7-5.3-1.7-8.3h4.7
      c0,4.6,1.6,8.5,4.8,11.7s7.1,4.8,11.7,4.8c4.6,0,8.5-1.6,11.7-4.8c3.2-3.2,4.8-7.1,4.8-11.7s-1.6-8.5-4.8-11.7
      c-3.2-3.2-7.1-4.8-11.7-4.8h-0.4l3.7,3.7L71,46.4L61.5,37l9.4-9.4l3.3,3.4l-3.7,3.7H71c2.9,0,5.7,0.6,8.3,1.7
      c2.6,1.1,4.8,2.6,6.7,4.5c1.9,1.9,3.4,4.1,4.5,6.7c1.1,2.6,1.7,5.3,1.7,8.3c0,2.9-0.6,5.7-1.7,8.3c-1.1,2.6-2.6,4.8-4.5,6.7
      s-4.1,3.4-6.7,4.5C76.7,76.5,73.9,77.1,71,77.1z"/>`}renderIcon(){return this.renderResetIcon()}};uo=Ap([X("reset-button")],uo);var Mp=Object.getOwnPropertyDescriptor,wp=(t,e,n,i)=>{for(var o=i>1?void 0:i?Mp(e,n):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(o=l(o)||o);return o};let co=class extends ae{renderAddIcon(){return Y`<path d="M67 40 H73 V52 H85 V58 H73 V70 H67 V58 H55 V52 H67 Z" fill="#FEFEFE" />`}renderIcon(){return this.renderAddIcon()}};co=wp([X("add-prompt-button")],co);var Ip=Object.getOwnPropertyDescriptor,bp=(t,e,n,i)=>{for(var o=i>1?void 0:i?Ip(e,n):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(o=l(o)||o);return o};let fo=class extends ae{renderAddRandomIcon(){return Y`
      <path d="M67 40 H73 V52 H85 V58 H73 V70 H67 V58 H55 V52 H67 Z" fill="#FEFEFE" />
      <circle cx="78" cy="45.5" r="2.5" fill="#FEFEFE"/>
      <circle cx="84" cy="45.5" r="2.5" fill="#FEFEFE"/>
      <circle cx="78" cy="39.5" r="2.5" fill="#FEFEFE"/>
    `}renderIcon(){return this.renderAddRandomIcon()}};fo=bp([X("add-random-prompt-button")],fo);var kp=Object.getOwnPropertyDescriptor,Rp=(t,e,n,i)=>{for(var o=i>1?void 0:i?kp(e,n):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(o=l(o)||o);return o};let ho=class extends ae{renderInfoIcon(){return Y`
      <path d="M70 35 Q 60 35, 60 45 Q 60 55, 70 55 Q 80 55, 80 45 Q 80 35, 70 35 M 70 58 L 70 65" 
            stroke="#FEFEFE" stroke-width="6" fill="none" stroke-linecap="round" stroke-linejoin="round" />
      <circle cx="70" cy="72" r="3" fill="#FEFEFE" />
    `}renderIcon(){return this.renderInfoIcon()}};ho=Rp([X("info-button")],ho);var Pp=Object.defineProperty,Dp=Object.getOwnPropertyDescriptor,es=(t,e,n,i)=>{for(var o=i>1?void 0:i?Dp(e,n):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(o=(i?l(e,n,o):l(o))||o);return i&&o&&Pp(e,n,o),o};let Rt=class extends j{constructor(){super(...arguments),this.active=!1,this.boundHandleKeydown=this.handleKeydown.bind(this)}connectedCallback(){super.connectedCallback(),window.addEventListener("keydown",this.boundHandleKeydown)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("keydown",this.boundHandleKeydown)}handleKeydown(t){this.active&&t.key==="Escape"&&this.close()}close(){this.active=!1,this.dispatchEvent(new CustomEvent("closed",{bubbles:!0,composed:!0}))}handleOverlayClick(t){var e;t.target===((e=this.shadowRoot)==null?void 0:e.querySelector(".modal-overlay"))&&this.close()}render(){const t=_n({"modal-overlay":!0,active:this.active});return H`
      <div class=${t} @click=${this.handleOverlayClick} role="dialog" aria-modal="true" aria-labelledby="modal-title" ?hidden=${!this.active}>
        <div class="modal-content">
          <button class="close-button" @click=${this.close} aria-label="Close modal">✕</button>
          <slot></slot>
        </div>
      </div>
    `}};Rt.styles=de`
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0s linear 0.3s;
    }
    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
      transition: opacity 0.3s ease, visibility 0s linear 0s;
    }
    .modal-content {
      background-color: #222; /* Darker background for modal */
      color: #eee;
      padding: 2vmin 3vmin 3vmin 3vmin;
      border-radius: 8px;
      box-shadow: 0 5px 25px rgba(0, 0, 0, 0.5);
      width: 90vw;
      max-width: 800px;
      max-height: 85vh;
      overflow-y: auto;
      position: relative;
      transform: scale(0.95);
      transition: transform 0.3s ease;
      font-family: 'Google Sans', sans-serif;
      scrollbar-width: thin;
      scrollbar-color: #666 #333;
    }
    .modal-overlay.active .modal-content {
        transform: scale(1);
    }
    .modal-content::-webkit-scrollbar {
      width: 8px;
    }
    .modal-content::-webkit-scrollbar-track {
      background: #333;
      border-radius: 4px;
    }
    .modal-content::-webkit-scrollbar-thumb {
      background-color: #666;
      border-radius: 4px;
    }
    .close-button {
      position: absolute;
      top: 1.5vmin;
      right: 1.5vmin;
      background: #444;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 3.5vmin;
      height: 3.5vmin;
      min-width: 30px; /* ensure minimum size */
      min-height: 30px;
      font-size: 2vmin;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      line-height: 1;
      padding: 0;
    }
    .close-button:hover {
      background: #555;
    }
    h2 {
      margin-top: 0;
      color: #fff;
      font-size: 2.2vmin;
      border-bottom: 1px solid #444;
      padding-bottom: 1vmin;
      margin-bottom: 2vmin;
    }
    section {
      margin-bottom: 2.5vmin;
    }
    section h3 {
      font-size: 1.8vmin;
      color: #ddd;
      margin-bottom: 0.8vmin;
    }
    p {
      font-size: 2.2vmin; /* Increased from 1.8vmin */
      line-height: 1.6;
      color: #ccc;
      margin-top: 0;
      margin-bottom: 0.8vmin; /* Adjusted margin slightly for new font size */
    }
    strong {
        color: #eee;
    }
  `;es([B({type:Boolean,reflect:!0})],Rt.prototype,"active",2);Rt=es([X("info-modal")],Rt);var Np=Object.defineProperty,Up=Object.getOwnPropertyDescriptor,le=(t,e,n,i)=>{for(var o=i>1?void 0:i?Up(e,n):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(o=(i?l(e,n,o):l(o))||o);return i&&o&&Np(e,n,o),o};const $p=new lp({apiKey:void 0,apiVersion:"v1alpha"});let Fp="lyria-realtime-exp",Z=class extends j{constructor(t){super(),this.sampleRate=48e3,this.audioContext=new(window.AudioContext||window.webkitAudioContext)({sampleRate:this.sampleRate}),this.outputNode=this.audioContext.createGain(),this.nextStartTime=0,this.bufferTime=2,this.playbackState="stopped",this.filteredPrompts=new Set,this.connectionError=!0,this.isRecording=!1,this.recordedAudioChunks=[],this.isInfoModalOpen=!1,this.phaserStagesNodes=[],this.MAX_PHASER_STAGES=12,this.currentConfig={},this.setSessionPrompts=lo(async()=>{if(!this.session)return;const e=Array.from(this.prompts.values()).filter(n=>!this.filteredPrompts.has(n.text)&&n.weight!==0);try{await this.session.setWeightedPrompts({weightedPrompts:e})}catch(n){this.toastMessage.show(n.message),this.pauseAudio()}},200),this.updateSettings=lo(async e=>{if(!this.session)return;const n=e.detail;this.currentConfig=n,await this.session.setMusicGenerationConfig({musicGenerationConfig:this._stripUiEffects(n)}),this._applyAudioSettings(n)},200),this.prompts=t,this.nextPromptId=this.prompts.size;for(const e of this.prompts.values())e.locked===void 0&&(e.locked=!1);this._setupAudioEffects(),this.outputNode.connect(this.audioContext.destination)}async firstUpdated(){await this.connectToSession(),this.setSessionPrompts(),this.settingsController&&this._applyAudioSettings(this.settingsController.config)}_makeDistortionCurve(t=0){const e=t*200,n=44100,i=new Float32Array(n),o=Math.PI/180;if(e===0)for(let a=0;a<n;++a)i[a]=a*2/n-1;else for(let a=0;a<n;++a){const l=a*2/n-1;i[a]=(3+e)*l*20*o/(Math.PI+e*Math.abs(l))}return i}_setupAudioEffects(){var e;this.effectsChainInput=this.audioContext.createGain(),this.effectsChainOutput=this.audioContext.createGain(),this.distortionInputGain=this.audioContext.createGain(),this.distortionNode=this.audioContext.createWaveShaper(),this.distortionNode.curve=this._makeDistortionCurve(0),this.distortionNode.oversample="4x",this.distortionOutputGain=this.audioContext.createGain(),this.distortionInputGain.connect(this.distortionNode),this.distortionNode.connect(this.distortionOutputGain),this.chorusInputGain=this.audioContext.createGain(),this.chorusDelayNode=this.audioContext.createDelay(.1),this.chorusLFO=this.audioContext.createOscillator(),this.chorusLFOGain=this.audioContext.createGain(),this.chorusFeedbackGain=this.audioContext.createGain(),this.chorusWetGain=this.audioContext.createGain(),this.chorusDryGain=this.audioContext.createGain(),this.chorusOutputGain=this.audioContext.createGain(),this.chorusLFO.type="sine",this.chorusLFO.connect(this.chorusLFOGain),this.chorusLFOGain.connect(this.chorusDelayNode.delayTime),this.chorusInputGain.connect(this.chorusDelayNode),this.chorusDelayNode.connect(this.chorusWetGain),this.chorusInputGain.connect(this.chorusDryGain),this.chorusWetGain.connect(this.chorusOutputGain),this.chorusDryGain.connect(this.chorusOutputGain),this.chorusLFO.start(),this.echoUiInputGain=this.audioContext.createGain(),this.echoUiDelayNode=this.audioContext.createDelay(1),this.echoUiFeedbackGain=this.audioContext.createGain(),this.echoUiWetGain=this.audioContext.createGain(),this.echoUiDryGain=this.audioContext.createGain(),this.echoUiOutputGain=this.audioContext.createGain(),this.echoUiInputGain.connect(this.echoUiDelayNode),this.echoUiDelayNode.connect(this.echoUiFeedbackGain),this.echoUiFeedbackGain.connect(this.echoUiDelayNode),this.echoUiDelayNode.connect(this.echoUiWetGain),this.echoUiInputGain.connect(this.echoUiDryGain),this.echoUiWetGain.connect(this.echoUiOutputGain),this.echoUiDryGain.connect(this.echoUiOutputGain),this.reverbUiInputGain=this.audioContext.createGain(),this.reverbUiDelayNode=this.audioContext.createDelay(.5),this.reverbUiFeedbackGain=this.audioContext.createGain(),this.reverbUiWetGain=this.audioContext.createGain(),this.reverbUiDryGain=this.audioContext.createGain(),this.reverbUiOutputGain=this.audioContext.createGain(),this.reverbUiInputGain.connect(this.reverbUiDelayNode),this.reverbUiDelayNode.connect(this.reverbUiFeedbackGain),this.reverbUiFeedbackGain.connect(this.reverbUiDelayNode),this.reverbUiDelayNode.connect(this.reverbUiWetGain),this.reverbUiInputGain.connect(this.reverbUiDryGain),this.reverbUiWetGain.connect(this.reverbUiOutputGain),this.reverbUiDryGain.connect(this.reverbUiOutputGain),this.flangerInputGain=this.audioContext.createGain(),this.flangerDelayNode=this.audioContext.createDelay(.02),this.flangerLFO=this.audioContext.createOscillator(),this.flangerLFOGain=this.audioContext.createGain(),this.flangerFeedbackGain=this.audioContext.createGain(),this.flangerWetGain=this.audioContext.createGain(),this.flangerDryGain=this.audioContext.createGain(),this.flangerOutputGain=this.audioContext.createGain(),this.flangerLFO.type="sine",this.flangerLFO.connect(this.flangerLFOGain),this.flangerLFOGain.connect(this.flangerDelayNode.delayTime),this.flangerInputGain.connect(this.flangerDelayNode),this.flangerDelayNode.connect(this.flangerFeedbackGain),this.flangerFeedbackGain.connect(this.flangerDelayNode),this.flangerDelayNode.connect(this.flangerWetGain),this.flangerInputGain.connect(this.flangerDryGain),this.flangerWetGain.connect(this.flangerOutputGain),this.flangerDryGain.connect(this.flangerOutputGain),this.flangerLFO.start(),this.eqInputGain=this.audioContext.createGain(),this.eqDryGain=this.audioContext.createGain(),this.eqWetGain=this.audioContext.createGain(),this.eqNode=this.audioContext.createBiquadFilter(),this.eqOutputGain=this.audioContext.createGain(),this.eqInputGain.connect(this.eqDryGain),this.eqInputGain.connect(this.eqWetGain),this.eqWetGain.connect(this.eqNode),this.eqDryGain.connect(this.eqOutputGain),this.eqNode.connect(this.eqOutputGain),this.compressorInputGain=this.audioContext.createGain(),this.compressorDryGain=this.audioContext.createGain(),this.compressorWetGain=this.audioContext.createGain(),this.compressorNode=this.audioContext.createDynamicsCompressor(),this.compressorOutputGain=this.audioContext.createGain(),this.compressorInputGain.connect(this.compressorDryGain),this.compressorInputGain.connect(this.compressorWetGain),this.compressorWetGain.connect(this.compressorNode),this.compressorDryGain.connect(this.compressorOutputGain),this.compressorNode.connect(this.compressorOutputGain),this.phaserInputGain=this.audioContext.createGain(),this.phaserLFO=this.audioContext.createOscillator(),this.phaserLFOGain=this.audioContext.createGain(),this.phaserFeedbackGain=this.audioContext.createGain(),this.phaserWetGain=this.audioContext.createGain(),this.phaserDryGain=this.audioContext.createGain(),this.phaserOutputGain=this.audioContext.createGain(),this.phaserLFO.type="sine",this.phaserLFO.connect(this.phaserLFOGain);let t=this.phaserInputGain;for(let n=0;n<this.MAX_PHASER_STAGES;n++){const i=this.audioContext.createBiquadFilter();i.type="allpass",this.phaserStagesNodes.push(i),t.connect(i),t=i}t.connect(this.phaserWetGain),this.phaserInputGain.connect(this.phaserDryGain),this.phaserWetGain.connect(this.phaserOutputGain),this.phaserDryGain.connect(this.phaserOutputGain),this.phaserLFO.start(),this.tremoloInputGain=this.audioContext.createGain(),this.tremoloLFO=this.audioContext.createOscillator(),this.tremoloDepthGain=this.audioContext.createGain(),this.tremoloSignalGain=this.audioContext.createGain(),this.tremoloOutputGain=this.audioContext.createGain(),this.tremoloLFO.type="sine",this.tremoloLFO.connect(this.tremoloDepthGain),this.tremoloDepthGain.connect(this.tremoloSignalGain.gain),this.tremoloInputGain.connect(this.tremoloSignalGain),this.tremoloSignalGain.connect(this.tremoloOutputGain),this.tremoloLFO.start(),this.stereoPhaseShiftInputGain=this.audioContext.createGain(),this.stereoPhaseSplitterNode=this.audioContext.createChannelSplitter(2),this.stereoPhaseProcessingGainNode=this.audioContext.createGain(),this.stereoPhaseMergerNode=this.audioContext.createChannelMerger(2),this.stereoPhaseShiftOutputGain=this.audioContext.createGain(),this.stereoPhaseShiftInputGain.connect(this.stereoPhaseSplitterNode),this.stereoPhaseSplitterNode.connect(this.stereoPhaseMergerNode,0,0),this.stereoPhaseSplitterNode.connect(this.stereoPhaseProcessingGainNode,1,0),this.stereoPhaseProcessingGainNode.connect(this.stereoPhaseMergerNode,0,1),this.stereoPhaseMergerNode.connect(this.stereoPhaseShiftOutputGain),this.effectsChainInput.connect(this.distortionInputGain),this.distortionOutputGain.connect(this.chorusInputGain),this.chorusOutputGain.connect(this.echoUiInputGain),this.echoUiOutputGain.connect(this.reverbUiInputGain),this.reverbUiOutputGain.connect(this.flangerInputGain),this.flangerOutputGain.connect(this.eqInputGain),this.eqOutputGain.connect(this.compressorInputGain),this.compressorOutputGain.connect(this.phaserInputGain),this.phaserOutputGain.connect(this.tremoloInputGain),this.tremoloOutputGain.connect(this.stereoPhaseShiftInputGain),this.stereoPhaseShiftOutputGain.connect(this.effectsChainOutput),this.effectsChainOutput.connect(this.outputNode),this._applyAudioSettings(((e=this.settingsController)==null?void 0:e.defaultConfig)||{})}async connectToSession(){if(this.session=await $p.live.music.connect({model:Fp,callbacks:{onmessage:async t=>{var e,n;if(console.log(`Received message from the server: %s
`),console.log(t),t.setupComplete&&(this.connectionError=!1),t.filteredPrompt&&(this.filteredPrompts=new Set([...this.filteredPrompts,t.filteredPrompt.text]),this.toastMessage.show(t.filteredPrompt.filteredReason)),((e=t.serverContent)==null?void 0:e.audioChunks)!==void 0){if(this.playbackState==="paused"||this.playbackState==="stopped")return;const i=(n=t.serverContent)==null?void 0:n.audioChunks[0].data;if(this.isRecording&&(this.playbackState==="playing"||this.playbackState==="loading"))try{const l=ao(i);this.recordedAudioChunks.push(l)}catch(l){console.error("Error decoding audio chunk for recording:",l),this.toastMessage.show("Error processing audio for recording.")}const o=await up(ao(i),this.audioContext,this.sampleRate,2),a=this.audioContext.createBufferSource();if(a.buffer=o,a.connect(this.effectsChainInput),this.nextStartTime===0&&(this.nextStartTime=this.audioContext.currentTime+this.bufferTime,setTimeout(()=>{this.playbackState==="loading"&&(this.playbackState="playing")},this.bufferTime*1e3)),this.nextStartTime<this.audioContext.currentTime){console.log("under run"),this.playbackState="loading",this.nextStartTime=0;return}a.start(this.nextStartTime),this.nextStartTime+=o.duration}},onerror:t=>{console.log(`Error occurred: %s
`,JSON.stringify(t)),this.connectionError=!0,this.stopAudio(),this.toastMessage.show("Connection error, please restart audio.")},onclose:t=>{console.log("Connection closed."),this.connectionError=!0,this.stopAudio(),this.toastMessage.show("Connection error, please restart audio.")}}}),this.settingsController){const t=this.settingsController.config;this.currentConfig=t,await this.session.setMusicGenerationConfig({musicGenerationConfig:this._stripUiEffects(t)}),this._applyAudioSettings(t)}}_stripUiEffects(t){const{distortionEnabled:e,distortionAmount:n,chorusEnabled:i,chorusRate:o,chorusDepth:a,chorusDelay:l,chorusFeedback:u,echoUiEnabled:d,echoUiDelayTime:c,echoUiFeedback:f,echoUiMix:h,reverbUiEnabled:p,reverbUiDelayTime:m,reverbUiDecay:g,reverbUiMix:v,flangerEnabled:E,flangerRate:x,flangerDepth:b,flangerDelay:A,flangerFeedback:P,eqEnabled:w,eqType:$,eqFrequency:V,eqQ:O,eqGain:k,compressorEnabled:U,compressorThreshold:z,compressorKnee:Vt,compressorRatio:Gt,compressorAttack:ne,compressorRelease:ct,phaserEnabled:Bp,phaserRate:Op,phaserDepth:Hp,phaserFeedback:Jp,phaserStages:Wp,phaserBaseFrequency:zp,tremoloEnabled:Kp,tremoloRate:Zp,tremoloDepth:Yp,stereoPhaseShiftAmount:Xp,...ts}=t;return ts}_applyAudioSettings(t){this.currentConfig=t;const e=this.audioContext.currentTime,n=.02;this.distortionNode.curve=this._makeDistortionCurve(t.distortionEnabled?t.distortionAmount??0:0),this.chorusDryGain.gain.linearRampToValueAtTime(t.chorusEnabled?0:1,e+n),this.chorusWetGain.gain.linearRampToValueAtTime(t.chorusEnabled?1:0,e+n),t.chorusEnabled&&(this.chorusLFO.frequency.linearRampToValueAtTime(t.chorusRate??1.5,e+n),this.chorusLFOGain.gain.linearRampToValueAtTime((t.chorusDepth??.3)*.005,e+n),this.chorusDelayNode.delayTime.linearRampToValueAtTime(t.chorusDelay??.025,e+n),this.chorusFeedbackGain.gain.linearRampToValueAtTime(t.chorusFeedback??0,e+n)),this.echoUiDryGain.gain.linearRampToValueAtTime(t.echoUiEnabled?1-(t.echoUiMix??0):1,e+n),this.echoUiWetGain.gain.linearRampToValueAtTime(t.echoUiEnabled?t.echoUiMix??0:0,e+n),t.echoUiEnabled&&(this.echoUiDelayNode.delayTime.linearRampToValueAtTime(t.echoUiDelayTime??.25,e+n),this.echoUiFeedbackGain.gain.linearRampToValueAtTime(t.echoUiFeedback??.3,e+n)),this.reverbUiDryGain.gain.linearRampToValueAtTime(t.reverbUiEnabled?1-(t.reverbUiMix??0):1,e+n),this.reverbUiWetGain.gain.linearRampToValueAtTime(t.reverbUiEnabled?t.reverbUiMix??0:0,e+n),t.reverbUiEnabled&&(this.reverbUiDelayNode.delayTime.linearRampToValueAtTime(t.reverbUiDelayTime??.05,e+n),this.reverbUiFeedbackGain.gain.linearRampToValueAtTime(t.reverbUiDecay??.2,e+n)),this.flangerDryGain.gain.linearRampToValueAtTime(t.flangerEnabled?0:1,e+n),this.flangerWetGain.gain.linearRampToValueAtTime(t.flangerEnabled?1:0,e+n),t.flangerEnabled&&(this.flangerLFO.frequency.linearRampToValueAtTime(t.flangerRate??.2,e+n),this.flangerLFOGain.gain.linearRampToValueAtTime(t.flangerDepth??.002,e+n),this.flangerDelayNode.delayTime.linearRampToValueAtTime(t.flangerDelay??.005,e+n),this.flangerFeedbackGain.gain.linearRampToValueAtTime(t.flangerFeedback??.5,e+n));const i=t.eqEnabled??!1;if(this.eqDryGain.gain.linearRampToValueAtTime(i?0:1,e+n),this.eqWetGain.gain.linearRampToValueAtTime(i?1:0,e+n),i){this.eqNode.type=t.eqType??"peaking",this.eqNode.frequency.setTargetAtTime(t.eqFrequency??800,e,n),this.eqNode.Q.setTargetAtTime(t.eqQ??1,e,n);const u=t.eqType==="peaking"||t.eqType==="lowshelf"||t.eqType==="highshelf"?t.eqGain??0:0;this.eqNode.gain.setTargetAtTime(u,e,n)}else this.eqNode.type="allpass",this.eqNode.frequency.setTargetAtTime(800,e,n),this.eqNode.Q.setTargetAtTime(1,e,n),this.eqNode.gain.setTargetAtTime(0,e,n);const o=t.compressorEnabled??!1;if(this.compressorDryGain.gain.linearRampToValueAtTime(o?0:1,e+n),this.compressorWetGain.gain.linearRampToValueAtTime(o?1:0,e+n),o&&(this.compressorNode.threshold.setTargetAtTime(t.compressorThreshold??-24,e,n),this.compressorNode.knee.setTargetAtTime(t.compressorKnee??30,e,n),this.compressorNode.ratio.setTargetAtTime(t.compressorRatio??12,e,n),this.compressorNode.attack.setTargetAtTime(t.compressorAttack??.003,e,n),this.compressorNode.release.setTargetAtTime(t.compressorRelease??.25,e,n)),this.phaserDryGain.gain.linearRampToValueAtTime(t.phaserEnabled?0:1,e+n),this.phaserWetGain.gain.linearRampToValueAtTime(t.phaserEnabled?1:0,e+n),t.phaserEnabled?(this.phaserLFO.frequency.setTargetAtTime(t.phaserRate??.5,e,n),this.phaserLFOGain.gain.setTargetAtTime((t.phaserDepth??.5)*(t.phaserBaseFrequency??700)*.5,e,n),this.phaserFeedbackGain.gain.setTargetAtTime(t.phaserFeedback??.3,e,n),this.phaserStagesNodes.forEach((u,d)=>{if(u.frequency.setTargetAtTime(t.phaserBaseFrequency??700,e,n),d<(t.phaserStages??4)){try{this.phaserLFOGain.disconnect(u.frequency)}catch{}this.phaserLFOGain.connect(u.frequency)}else try{this.phaserLFOGain.disconnect(u.frequency)}catch{}})):this.phaserStagesNodes.forEach(u=>{try{this.phaserLFOGain.disconnect(u.frequency)}catch{}}),t.tremoloEnabled){this.tremoloLFO.frequency.setTargetAtTime(t.tremoloRate??5,e,n);const u=t.tremoloDepth??.5;this.tremoloSignalGain.gain.setTargetAtTime(1-u/2,e,n),this.tremoloDepthGain.gain.setTargetAtTime(u/2,e,n)}else this.tremoloSignalGain.gain.setTargetAtTime(1,e,n),this.tremoloDepthGain.gain.setTargetAtTime(0,e,n);const a=t.stereoPhaseShiftAmount??0,l=Math.cos(a*2*Math.PI);this.stereoPhaseProcessingGainNode.gain.setTargetAtTime(l,e,n)}dispatchPromptsChange(){this.dispatchEvent(new CustomEvent("prompts-changed",{detail:this.prompts}))}handlePromptChanged(t){const{promptId:e,text:n,weight:i}=t.detail;if(!e){console.error("Prompt ID missing in prompt-changed event");return}const o=this.prompts.get(e);if(!o){console.error("prompt not found",e);return}n!==void 0&&(o.text=n),i!==void 0&&(o.weight=i);const a=new Map(this.prompts);a.set(e,o),this.prompts=a,this.setSessionPrompts(),this.requestUpdate(),this.dispatchPromptsChange()}handlePromptLockToggled(t){const{promptId:e,locked:n}=t.detail,i=this.prompts.get(e);i&&(i.locked=n,this.prompts=new Map(this.prompts),this.dispatchPromptsChange(),this.requestUpdate("prompts"))}makeBackground(){const t=o=>Math.min(Math.max(o,0),1),i=[];return[...this.prompts.values()].forEach((o,a)=>{const l=t(o.weight/.5)*.6,u=Math.round(l*255).toString(16).padStart(2,"0"),d=o.weight/2,c=a%4/3,f=Math.floor(a/4)/3,h=`radial-gradient(circle at ${c*100}% ${f*100}%, ${o.color}${u} 0px, ${o.color}00 ${d*100}%)`;i.push(h)}),i.join(", ")}async handlePlayPause(){this.playbackState==="playing"?this.pauseAudio():this.playbackState==="paused"||this.playbackState==="stopped"?(this.connectionError&&(await this.connectToSession(),this.setSessionPrompts()),this.loadAudio()):this.playbackState==="loading"&&this.stopAudio(),console.debug("handlePlayPause")}pauseAudio(){var t;this.isRecording&&this.stopRecordingAndSave(),(t=this.session)==null||t.pause(),this.playbackState="paused",this.audioContext.state==="running"?this.outputNode.gain.setTargetAtTime(0,this.audioContext.currentTime,.01):this.outputNode.gain.value=0,this.nextStartTime=0}loadAudio(){var t;this.audioContext.resume(),(t=this.session)==null||t.play(),this.playbackState="loading",this.audioContext.state==="running"?this.outputNode.gain.setTargetAtTime(1,this.audioContext.currentTime,.01):this.outputNode.gain.value=1}stopAudio(){var t;this.isRecording&&this.stopRecordingAndSave(),(t=this.session)==null||t.stop(),this.playbackState="stopped",this.audioContext.state==="running"?(this.outputNode.gain.cancelScheduledValues(this.audioContext.currentTime),this.outputNode.gain.setValueAtTime(0,this.audioContext.currentTime)):this.outputNode.gain.value=0,this.nextStartTime=0}async handleAddPrompt(){var a;const t=`prompt-${this.nextPromptId++}`,e=[...this.prompts.values()].map(l=>l.color),n={promptId:t,text:"New Prompt",weight:0,color:dn(e),locked:!1},i=new Map(this.prompts);i.set(t,n),this.prompts=i,await this.setSessionPrompts(),this.dispatchPromptsChange(),await this.updateComplete;const o=this.renderRoot.querySelector(`prompt-controller[promptId="${t}"]`);if(o){o.scrollIntoView({behavior:"smooth",block:"nearest",inline:"end"});const l=(a=o.shadowRoot)==null?void 0:a.querySelector("#text");if(l){l.focus();const u=window.getSelection(),d=document.createRange();d.selectNodeContents(l),u==null||u.removeAllRanges(),u==null||u.addRange(d)}}}async handleAddRandomPrompt(){var l;const t=`prompt-${this.nextPromptId++}`,e=[...this.prompts.values()].map(u=>u.color);let n="Random Prompt";if($e.length>0){const u=Math.floor(Math.random()*$e.length);n=$e[u]}const i={promptId:t,text:n,weight:0,color:dn(e),locked:!1},o=new Map(this.prompts);o.set(t,i),this.prompts=o,await this.setSessionPrompts(),this.dispatchPromptsChange(),await this.updateComplete;const a=this.renderRoot.querySelector(`prompt-controller[promptId="${t}"]`);if(a){a.scrollIntoView({behavior:"smooth",block:"nearest",inline:"end"});const u=(l=a.shadowRoot)==null?void 0:l.querySelector("#text");if(u){u.focus();const d=window.getSelection(),c=document.createRange();c.selectNodeContents(u),d==null||d.removeAllRanges(),d==null||d.addRange(c)}}}handlePromptRemoved(t){t.stopPropagation();const e=t.detail,n=this.prompts.get(e);if(n!=null&&n.locked){this.toastMessage.show("Cannot remove a locked prompt.");return}if(this.prompts.has(e)){this.prompts.delete(e);const i=new Map(this.prompts);this.prompts=i,this.setSessionPrompts(),this.dispatchPromptsChange()}else console.warn(`Attempted to remove non-existent prompt ID: ${e}`)}handlePromptsContainerWheel(t){const e=t.currentTarget;t.deltaX!==0&&(e.scrollLeft+=t.deltaX)}async handleReset(){var t;this.isRecording&&this.stopRecordingAndSave(),(this.connectionError||!this.session)&&await this.connectToSession(),this.pauseAudio(),(t=this.session)==null||t.resetContext(),this.settingsController&&this.settingsController.resetToDefaults(),setTimeout(()=>{this.setSessionPrompts(),this.playbackState!=="playing"&&this.playbackState!=="loading"&&this.loadAudio()},200)}async handleRecordToggle(){this.isRecording?this.stopRecordingAndSave():(this.isRecording=!0,this.recordedAudioChunks=[],this.toastMessage.show("Recording started..."),this.recordButton&&(this.recordButton.recording=!0),(this.playbackState==="stopped"||this.playbackState==="paused")&&((this.connectionError||!this.session)&&(await this.connectToSession(),this.setSessionPrompts()),this.loadAudio()))}stopRecordingAndSave(){if(!(!this.isRecording&&this.recordedAudioChunks.length===0)){if(this.isRecording=!1,this.recordButton&&(this.recordButton.recording=!1),this.recordedAudioChunks.length===0){this.toastMessage.show("No audio data to save.");return}try{let t=0;for(const o of this.recordedAudioChunks)t+=o.length;const e=new Uint8Array(t);let n=0;for(const o of this.recordedAudioChunks)e.set(o,n),n+=o.length;const i=cp(e,2,this.sampleRate,16);dp(i,"prompt-dj-recording.wav"),this.toastMessage.show("Recording saved as WAV.")}catch(t){console.error("Error saving WAV file:",t),this.toastMessage.show("Error saving recording.")}finally{this.recordedAudioChunks=[]}}}renderInfoModalContent(){const t=$e.join(", ");return H`
      <h2>Руководство по элементам управления</h2>

      <section>
        <h3>Управление подсказками (Prompts)</h3>
        <p><strong>Текстовые подсказки:</strong> Вводите музыкальные идеи, жанры, настроения или инструменты. ИИ попытается интерпретировать их для генерации музыки.</p>
        <p><em>Примеры поддерживаемых стилей: ${t}. Вы также можете экспериментировать с другими описаниями!</em></p>
        <p><strong>Регуляторы веса:</strong> Настройте влияние каждой подсказки. Больший вес означает, что ИИ будет больше уделять внимание этой подсказке. Перетаскивайте ползунок или используйте колесо мыши. Значение от 0 (нет влияния) до 2.</p>
        <p><strong>Замок (🔒/🔓):</strong> Нажмите, чтобы заблокировать/разблокировать карточку. Заблокированные карточки нельзя удалить, и они сохранят свое состояние при следующей загрузке.</p>
        <p><strong>Удалить подсказку (×):</strong> Нажмите '×' на карточке подсказки, чтобы удалить ее (невозможно, если карточка заблокирована).</p>
      </section>

      <section>
        <h3>Основные элементы управления воспроизведением</h3>
        <p><strong>Кнопка Play/Pause:</strong> Запускает, приостанавливает или возобновляет генерацию музыки. Отображает индикатор загрузки при первоначальном подключении или буферизации.</p>
        <p><strong>Кнопка записи:</strong> Нажмите, чтобы начать запись генерируемого аудио. Нажмите снова, чтобы остановить и загрузить запись в формате WAV.</p>
        <p><strong>Кнопка сброса:</strong> Сбрасывает все настройки генерации (включая эффекты) до значений по умолчанию, очищает текущий музыкальный контекст и перезапускает генерацию. Подсказки сохраняются.</p>
        <p><strong>Кнопка добавления подсказки (+):</strong> Добавляет новую пустую карточку подсказки справа.</p>
        <p><strong>Кнопка добавления случайной подсказки (+🎲):</strong> Добавляет новую карточку подсказки со случайно выбранным стилем из списка пресетов.</p>
      </section>

      <section>
        <h3>Основные настройки генерации музыки (Панель настроек)</h3>
        <p><strong>Temperature (Температура):</strong> Контролирует случайность. Более высокие значения (например, 1.1-3.0) приводят к более разнообразной и неожиданной музыке. Низкие значения (ближе к 0) делают ее более предсказуемой. По умолчанию: 1.1.</p>
        <p><strong>Guidance (Ведение):</strong> Насколько строго ИИ следует вашим подсказкам. Более высокие значения означают более точное следование. По умолчанию: 4.0.</p>
        <p><strong>Top K:</strong> Ограничивает выбор ИИ для следующего музыкального события 'K' наиболее вероятными вариантами. Меньшие значения могут сделать музыку более сфокусированной, но менее разнообразной. По умолчанию: 40.</p>
      </section>

      <section>
        <h3>Расширенные настройки (Нажмите "Show Advanced Settings")</h3>
        <p><strong>Seed (Зерно генерации):</strong> Число для инициализации генератора случайных чисел. Одинаковое зерно + одинаковые настройки = похожая музыка. Оставьте пустым для случайного значения.</p>
        <p><strong>BPM (Удары в минуту):</strong> Устанавливает темп музыки (60-180). Оставьте пустым для автоматического определения.</p>
        <p><strong>Density (Плотность) (Авто):</strong> Музыкальная насыщенность/сложность. Выше значение — больше нот/слоев. "Auto" позволяет ИИ решать. Ползунок: 0-1, По умолчанию: 0.5 (когда не авто).</p>
        <p><strong>Brightness (Яркость) (Авто):</strong> Тембральное качество, связанное с высокими частотами. "Auto" позволяет ИИ решать. Ползунок: 0-1, По умолчанию: 0.5 (когда не авто).</p>
        <p><strong>Scale (Лад/Тональность):</strong> Устанавливает музыкальный лад/тональность (например, До мажор). "Auto" позволяет ИИ выбирать.</p>
        <p><strong>Mute Bass/Drums, Only Bass & Drums:</strong> Чекбоксы для управления партиями баса и ударных.</p>
        
        <h4>Эффекты пост-обработки:</h4>
        <p><strong>Echo Mix (Model) (Микс эхо - Модель):</strong> Уровень эффекта эхо, встроенного в модель Lyria (0 = нет, 1 = макс). По умолчанию: 0.</p>
        <p><strong>Reverb Mix (Model) (Микс реверберации - Модель):</strong> Уровень реверберации, встроенной в модель Lyria (0 = нет, 1 = макс). По умолчанию: 0.</p>
        <p><strong>Distortion (Дисторшн):</strong> Добавляет искажения к звуку. "Amount" контролирует интенсивность.</p>
        <p><strong>Chorus (Хорус):</strong> Создает эффект "размытого" или "многоголосого" звучания. Параметры: Rate, Depth, Delay, Feedback.</p>
        <p><strong>Echo (UI) (Эхо - Интерфейс):</strong> Клиентский эффект эхо. Параметры: Delay (время задержки), Feedback (обратная связь), Mix (уровень эффекта).</p>
        <p><strong>Reverb (UI) (Реверберация - Интерфейс):</strong> Клиентский эффект реверберации (простой). Параметры: Pre-Delay (предварительная задержка), Decay (затухание), Mix (уровень эффекта).</p>
        <p><strong>Flanger (Флэнжер):</strong> Создает "закрученный", "реактивный" звук. Параметры: Rate, Depth, Delay, Feedback.</p>
        <p><strong>Filter / EQ (Фильтр / Эквалайзер):</strong> Позволяет изменять тембр звука, усиливая или ослабляя определенные частоты. "Type" - тип фильтра (low-pass, high-pass, peaking и др.), "Frequency" - частота, "Q" - добротность/ширина полосы, "Gain" - усиление/ослабление (для некоторых типов).</p>
        <p><strong>Compressor (Компрессор):</strong> Уменьшает динамический диапазон, делая громкие звуки тише, а тихие - громче. Параметры: Threshold (порог), Knee (изгиб), Ratio (соотношение), Attack (атака), Release (восстановление).</p>
        <p><strong>Phaser (Фэйзер):</strong> Создает "плывущий" эффект за счет модуляции фазы. Параметры: Rate (скорость), Depth (глубина), Feedback (обратная связь), Stages (количество каскадов), Base Frequency (базовая частота).</p>
        <p><strong>Tremolo (Тремоло):</strong> Создает эффект пульсации громкости. Параметры: Rate (скорость), Depth (глубина).</p>
        <p><strong>Stereo Phase Shift (R Ch.) (Сдвиг фазы стерео, правый канал):</strong> Позволяет плавно регулировать фазовый сдвиг правого аудиоканала от 0° до 360°. При 0° и 360° фаза соответствует оригиналу (усиление 1x), при 180° происходит полная инверсия фазы (усиление -1x). Промежуточные значения, такие как 90° или 270°, приведут к ослаблению или полному заглушению сигнала в правом канале. Этот эффект может изменить восприятие стереопанорамы или создать эффекты вычитания в зависимости от аудиоматериала.</p>
      </section>
    `}render(){var e;const t=Ao({backgroundImage:this.makeBackground()});return H`<div id="background" style=${t}></div>
      <div class="prompts-area">
        <div
          id="prompts-container"
          @prompt-removed=${this.handlePromptRemoved}
          @prompt-lock-toggled=${this.handlePromptLockToggled}
          @wheel=${this.handlePromptsContainerWheel}>
          ${this.renderPrompts()}
        </div>
        <div class="add-prompt-button-container">
          <add-prompt-button @click=${this.handleAddPrompt} title="Add New Prompt"></add-prompt-button>
          <add-random-prompt-button @click=${this.handleAddRandomPrompt} title="Add Random Prompt"></add-random-prompt-button>
        </div>
      </div>
      <div id="settings-container">
        <settings-controller
          .showadvanced=${((e=this.settingsController)==null?void 0:e.showadvanced)??!1} 
          @settings-changed=${this.updateSettings}></settings-controller>
      </div>
      <div class="playback-container">
        <play-pause-button
          @click=${this.handlePlayPause}
          .playbackState=${this.playbackState}></play-pause-button>
        <record-button 
            .recording=${this.isRecording}
            @click=${this.handleRecordToggle}></record-button>
        <reset-button @click=${this.handleReset}></reset-button>
        <info-button @click=${()=>this.isInfoModalOpen=!0}></info-button>
      </div>
      <toast-message></toast-message>
      <info-modal 
        .active=${this.isInfoModalOpen} 
        @closed=${()=>this.isInfoModalOpen=!1}>
        ${this.renderInfoModalContent()}
      </info-modal>
      `}renderPrompts(){return[...this.prompts.values()].map(t=>H`<prompt-controller
        .promptId=${t.promptId}
        filtered=${this.filteredPrompts.has(t.text)}
        .text=${t.text}
        .weight=${t.weight}
        .color=${t.color}
        .locked=${t.locked??!1}
        @prompt-changed=${this.handlePromptChanged}>
      </prompt-controller>`)}};Z.styles=de`
    :host {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      box-sizing: border-box;
      padding: 2vmin;
      position: relative;
      font-size: 1.8vmin;
    }
    #background {
      position: absolute;
      height: 100%;
      width: 100%;
      z-index: -1;
      background: #111;
    }
    .prompts-area {
      display: flex;
      align-items: flex-end;
      justify-content: center;
      flex: 4;
      width: 100%;
      margin-top: 2vmin;
      gap: 2vmin;
    }
    #prompts-container {
      display: flex;
      flex-direction: row;
      align-items: flex-end;
      flex-shrink: 1;
      height: 100%;
      gap: 2vmin;
      margin-left: 10vmin; /* To somewhat center content with add button */
      padding: 1vmin; /* Padding for scrollbar */
      overflow-x: auto;
      /* Custom scrollbar styling */
      scrollbar-width: thin;
      scrollbar-color: #666 #1a1a1a;
    }
    #prompts-container::-webkit-scrollbar {
      height: 8px;
    }
    #prompts-container::-webkit-scrollbar-track {
      background: #111; /* Or match prompts-area background */
      border-radius: 4px;
    }
    #prompts-container::-webkit-scrollbar-thumb {
      background-color: #666;
      border-radius: 4px;
    }
    #prompts-container::-webkit-scrollbar-thumb:hover {
      background-color: #777;
    }
    /* Add pseudo-elements for centering while keeping elements visible when scrolling */
    #prompts-container::before,
    #prompts-container::after {
      content: '';
      flex: 1; /* Distribute remaining space */
      min-width: 0.5vmin; /* Ensure some space even if only one item */
    }
    .add-prompt-button-container {
      display: flex;
      align-items: flex-end; /* Align button to bottom like prompts */
      height: 100%; /* Match prompts-container height */
      flex-shrink: 0; /* Prevent button from shrinking */
      gap: 1.5vmin; /* Gap between add buttons */
    }
    #settings-container {
      flex: 1;
      margin: 2vmin 0 1vmin 0;
      /* max-height controlled by settings-controller itself */
    }
    .playback-container {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-shrink: 0; /* Prevent container from shrinking */
    }
    play-pause-button,
    add-prompt-button,
    add-random-prompt-button, /* New */
    reset-button,
    record-button,
    info-button { 
      width: 12vmin;
      flex-shrink: 0;
    }
    prompt-controller {
      height: 100%;
      max-height: 80vmin; /* Max height for a prompt controller */
      min-width: 14vmin; /* Min width for a prompt controller */
      max-width: 16vmin; /* Max width for a prompt controller */
      flex: 1; /* Allow prompt to grow if few prompts, but also shrink */
    }
  `;le([B({type:Object,attribute:!1})],Z.prototype,"prompts",2);le([Te()],Z.prototype,"playbackState",2);le([B({type:Object})],Z.prototype,"filteredPrompts",2);le([Te()],Z.prototype,"isRecording",2);le([Te()],Z.prototype,"isInfoModalOpen",2);le([ke("play-pause-button")],Z.prototype,"playPauseButton",2);le([ke("toast-message")],Z.prototype,"toastMessage",2);le([ke("settings-controller")],Z.prototype,"settingsController",2);le([ke("record-button")],Z.prototype,"recordButton",2);Z=le([X("prompt-dj")],Z);function Lp(t){const e=Vp(),n=new Z(e);t.appendChild(n),n.addEventListener("prompts-changed",i=>{Gp(i.detail)})}function Vp(){const{localStorage:t}=window,e=t.getItem("prompts");if(e)try{const d=JSON.parse(e);console.log("Loading stored prompts",d);const c=d.map(f=>({...f,locked:f.locked??!1}));return new Map(c.map(f=>[f.promptId,f]))}catch(d){console.error("Failed to parse stored prompts",d)}console.log("No stored prompts, creating prompt presets");const n=Math.min(4,$e.length),i=[...$e].sort(()=>Math.random()-.5),o=[],a=[];for(let d=0;d<n;d++){const c=i[d],f=dn(a);a.push(f),o.push({promptId:`prompt-${d}`,text:c,weight:0,color:f,locked:!1})}const l=[...o].sort(()=>Math.random()-.5),u=Math.min(2,o.length);for(let d=0;d<u;d++)l[d]&&(l[d].weight=1);return new Map(o.map(d=>[d.promptId,d]))}function Gp(t){const e=JSON.stringify([...t.values()]),{localStorage:n}=window;n.setItem("prompts",e)}function qp(t){Lp(t)}qp(document.body);
